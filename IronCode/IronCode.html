<!DOCTYPE html>
<html>

<head>
    <link href="https://fonts.googleapis.com/css?family=Rakkas&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Permanent+Marker&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="IronCodeCSS.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />


</head>

<body onload="loadimg()" onkeydown="whatkey()">

    <video width="1920" height="1080" id="Deathscreen">
        <source src="Image/Death.mp4" type="video/mp4">
    </video>
    Fps: <span id="FPS"></span>
    <br />
    <div id="BossHealthContainer">
        <div id="BossHealthText">
            <span id="BossHealth"></span>/<span id="BossmaxHp">7</span>
        </div>
        <div id="BossHealthBox">

        </div>
    </div>
    score: <span id="score"></span>
    <br />
    <!-- EnergyboxUI -->
    <div id="Energycontainer">
        <div id="energytext">
            Energy <span id="energy"></span>/<span id="maxEnergy">100</span>
        </div>
        <div id="Energybox">

        </div>
    </div>

    <!-- livesboxUI -->
    <div id="Livescontainer">
        <div id="livestext">
            Health <span id="lives"></span>/<span id="maxHP">7</span>
        </div>
        <div id="Livesbox">

        </div>
    </div>
    <div id="Shieldcontainer">
        <div id="shieldtext">
            Chaos <span id="shield"></span>/100
            <div id="Shieldbox">
            </div>
        </div>
    </div>
    <div id="soundsettingContainer">
        Master<br />
        <input type="range" min="0" max="100" id="masterslider" value="50"> <br />
        Music<br />
        <input type="range" min="0" max="100" id="musicslider" value="50"> <br />
        Sfx<br />
        <input type="range" min="0" max="100" id="sfxslider" value="50"> <br />



    </div>
    <div id="abilityContainer">
        EXP:<span id="exp">0</span><br />
        Exp needed: <span id="eregens">5</span> <br /><button id="Energy_Regen_button" onclick="EnergyRegenAdd()">Energy
            Regen <span id="eregenlvl">0</span>/50</button><br />





        Exp needed: <span id="reachlbl">10</span><br /><button id="Energy_Regen_button" onclick="reach()">Reach <span
                id="reachspan">0</span>/200</button>

        <br />
        Exp needed: <span id="speedlbl">35</span><br /><button id="Energy_Regen_button" onclick="speed()">Speed <span
                id="speedspan">0</span>/50</button>
        <br />
        Exp needed: <span id="Knocklbl">20</span><br /><button id="Energy_Regen_button"
            onclick="knockbackstrengthadd()">Knockback <span id="Knockspan">0</span>/10</button>

    </div>
    <div id="inventorycontainer">
        <div id="InventorySlot1" onmouseover="over(1)" onmouseout="out(1)" onclick="upgrade(1)" title="Empty"></div>
        <div id="InventorySlot2" onmouseover="over(2)" onmouseout="out(2)" onclick="upgrade(2)"
            title="Helmet: 1 Max health"></div>
        <div id="InventorySlot3" onmouseover="over(3)" onmouseout="out(3)" onclick="upgrade(3)"
            title="Chestplate: 4 Max health"></div>
        <div id="InventorySlot4" onmouseover="over(4)" onmouseout="out(4)" onclick="upgrade(4)"
            title="Leggings: 2 Max health"></div>
        <div id="InventorySlot5" onmouseover="over(5)" onmouseout="out(5)" onclick="upgrade(5)" title="Boots: Empty">
        </div>
        <div id="InventorySlot6" onmouseover="over(6)" onmouseout="out(6)" onclick="upgrade(6)" title="Sword: 1 Damage">
        </div>
        <div id="InventorySlot7" onmouseover="over(7)" onmouseout="out(7)" onclick="InventorySwitch(1)"></div>
        <div id="InventorySlot8" onmouseover="over(8)" onmouseout="out(8)" onclick="InventorySwitch(2)"></div>
        <div id="InventorySlot9" onmouseover="over(9)" onmouseout="out(9)" onclick="InventorySwitch(3)"></div>
        <div id="InventorySlot10" onmouseover="over(10)" onmouseout="out(10)" onclick="InventorySwitch(4)"></div>
        <div id="InventorySlot11" onmouseover="over(11)" onmouseout="out(11)" onclick="InventorySwitch(5)"></div>
        <div id="InventorySlot12" onmouseover="over(12)" onmouseout="out(12)" onclick="InventorySwitch(6)"></div>
        <div id="InventorySlot13" onmouseover="over(13)" onmouseout="out(13)" onclick="InventorySwitch(7)"></div>
        <div id="InventorySlot14" onmouseover="over(14)" onmouseout="out(14)" onclick="InventorySwitch(8)"></div>
        <div id="InventorySlot15" onmouseover="over(15)" onmouseout="out(15)" onclick="InventorySwitch(9)"></div>
        <div id="InventorySlot16" onmouseover="over(16)" onmouseout="out(16)" onclick="InventorySwitch(10)"></div>
        <div id="InventorySlot17" onmouseover="over(17)" onmouseout="out(17)" onclick="InventorySwitch(11)"></div>
        <div id="InventorySlot18" onmouseover="over(18)" onmouseout="out(18)" onclick="InventorySwitch(12)"></div>
        <div id="InventorySlot19" onmouseover="over(19)" onmouseout="out(19)" onclick="InventorySwitch(13)"></div>
        <div id="InventorySlot20" onmouseover="over(20)" onmouseout="out(20)" onclick="InventorySwitch(14)"></div>
        <div id="InventorySlot21" onmouseover="over(21)" onmouseout="out(21)" onclick="InventorySwitch(15)"></div>
        <div id="InventorySlot22" onmouseover="over(22)" onmouseout="out(22)" onclick="InventorySwitch(16)"></div>
        <div id="InventorySlot23" onmouseover="over(23)" onmouseout="out(23)" onclick="InventorySwitch(17)"></div>
        <div id="InventorySlot24" onmouseover="over(24)" onmouseout="out(24)" onclick="InventorySwitch(18)"></div>
        <div id="InventorySlot25" onmouseover="over(25)" onmouseout="out(25)" onclick="InventorySwitch(19)"></div>
        <div id="Gold">
        </div>
        <div id="Golds"> : <span id="CurrentGold">0</span> Cost: <span id="Cost"></span></div>

    </div>
    <div id="Stat">
        Damage: <span id="playerdamage">1</span>
        Health: <span id="playerhealth">7</span>
        Knockback: <span id="playerknockback">0.1</span><br />
        Reach: <span id="playerreach">0</span>
        Darkness: <span id="playerdarkness">0</span>
        EnergyRegen: <span id="playerEnergyRegen">1.25</span><br />
        ChaosRegen: <span id="playerChaosRegen">1</span>
        <div id="Potioncontainer">
            <span id="amountText">Amount: <span id="potionAmount">0</span></span>
            <div id="Potion1" onmouseover="" onmouseout="" onclick="" title=""></div>
            <div id="Potion2" onmouseover="" onmouseout="" onclick="" title=""></div>
            <div id="Potion3" onmouseover="" onmouseout="" onclick="" title=""></div>
            <div id="Potion4" onmouseover="" onmouseout="" onclick="" title=""></div>
            <div id="Potion5" onmouseover="" onmouseout="" onclick="" title=""></div>
        </div>

    </div>
    <button onclick="tooglequests()" id="Togglequests"></button>
    <div id="Questcontainer">
        <br />
        <div id="Quest1">
            <br />
            <span id="Quest1content"></span><br />
            <span id="for1"></span><br />
            <span id="Quest1reward"></span>
        </div>
        <div id="Quest2">
            <br />
            <span id="Quest2content"></span><br />
            <span id="for2"></span><br />
            <span id="Quest2reward"></span>
        </div>

        <div id="Quest3">
            <br />
            <span id="Quest3content"></span><br />
            <span id="for3"></span><br />
            <span id="Quest3reward"></span>
        </div>

        <div id="Questspecial">
            <br />
            <span id="Questspecialcontent"></span><br />
            <span id="for4"></span><br />
            <span id="Questspecialreward"></span>
        </div>
        <div id="Questbuttons">
            <button id="Quest1button" onclick="CompleteQuest(1)" disabled="true">Hand in Quest</button>
            <button id="Quest2button" onclick="CompleteQuest(2)" disabled="true">Hand in Quest</button>
            <button id="Quest3button" onclick="CompleteQuest(3)" disabled="true">Hand in Quest</button>
            <button id="Quest4button" onclick="CompleteQuest(4)" disabled="true">Hand in Quest</button>
        </div>
    </div>
    <button onclick="toogleshop()" id="Toggleshop"></button>
    <div id="shopcontainer">
        <span id="shop">Shop</span><span id="auction">Auction</span>
        <br />

        <div id="itemContainer">
            <button id="item1" onclick="shopBuy(1)"></button> Cost: 100 gold
            <br />
            <button id="item2" onclick="shopBuy(2)"></button> Cost: 400 gold




            <br />
            <button id="item3" onclick="shopBuy(3)"></button> Cost: 200 gold
            <br />
            <button id="item4" onclick="shopBuy(4)"></button> Cost: 120 gold
            <br />
            <button id="item5" onclick="shopBuy(5)"></button> Cost: 1000 gold
            <br />
            <span id="Summon">Boss Summon</span><br />
            <button id="item6" onclick="shopBuy(6)"></button> Cost: 10000 gold and
            <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100000 darkness <br />
            <br />






        </div>



        <div id="auctionContainer">
            <div id="auctionSlot1" onclick="returnItem(1)"></div><span id="auctionSlot1Text">Open!</span><br />
            <div id="auctionSlot2" onclick="returnItem(2)"></div><span id="auctionSlot2Text">Open!</span><br />
            <div id="auctionSlot3" onclick="returnItem(3)"></div><span id="auctionSlot3Text">Open!</span><br />


        </div>
    </div>
    <div id="texthere">Current healthmultipler: x<span id="healthmultipler">1</span></div>

    <div id="darknesscontainer">
        <div id="darknesstext">
            Darkness<span id="darkness"></span>
            <div id="darknessbox">
            </div>
        </div>
    </div>
    <input type="text" onkeydown="Cheats()" id="cheatconsole"></input>
    <div id="BossReturn">
        <span>Nadir Drach </span><br />
        <span>Returns in:</span><br />
        <span id="BossReturnTimer"></span>
    </div>
    <button id="GameStart" onclick="startGame()">Start Game</button>

    <script>//Game start
        addEventListener("click", function () {
            fullscreen();
        });

        function fullscreen() {
            var
                el = document.documentElement
                , rfs =
                    el.requestFullScreen
                    || el.webkitRequestFullScreen
                    || el.mozRequestFullScreen
                ;
            rfs.call(el);
        }
        function startGame() {
            myGameArea.start();
            document.getElementById('GameStart').style.display = "none";
            scores();
            document.getElementById('Livescontainer').style.display = "block";
            document.getElementById('Energycontainer').style.display = "block";
            document.getElementById('Stat').style.display = "block";
            document.getElementById('inventorycontainer').style.display = "block";
            document.getElementById('darknesscontainer').style.display = "block";
            document.getElementById('abilityContainer').style.display = "block";

            document.getElementById('Potion2').title = "0";
            document.getElementById('Potion3').title = "0";
            document.getElementById('Potion4').title = "0";
            document.getElementById('Potion5').title = "0";
            MusicBot(9, 1);
            casterTimer = setInterval(function () {

                for (i = 0; i < fiender.length; i++) {
                    var tmp = i;
                    if (!BossEvent) {
                        if (fiender[tmp].type == "casterwalk") {

                            if ((player.x - fiender[tmp].x) < 500 && fiender[tmp].x > 0) {

                                fiender[tmp].speedX = 0;

                                fiender[tmp].type = "casterattack";

                            }
                        }
                        else if (fiender[tmp].type == "casterattack") {
                            for (i = 0; i < fiender.length; i++) {

                                var tmp = i;
                                if ((player.x - fiender[tmp].x) < 500 && fiender[tmp].x > 0) {
                                    if (fiender[tmp].type == "casterattack") {
                                        if (!pauseineffect) {
                                            if (fiender[tmp].fire >= 5)
                                                fiender[tmp].fire = 0;
                                            fiender[tmp].fire++;

                                        }
                                    }
                                    if (fiender[tmp].fire == 2) {
                                        var tmpw;
                                        for (i = 0; i < projectile.length + 1; i++) {

                                            if (projectile[i] == "" || projectile[i] == null) {
                                                tmpw = i;
                                            }
                                        }


                                        projectile[tmpw] = new component(200, 200, "casterpro", fiender[tmp].x - 15, fiender[tmp].y - 15)

                                        x = (player.x);
                                        y = (player.y + 2);
                                        var dx = (fiender[tmp].x) - x;

                                        var dy = (fiender[tmp].y) - y;
                                        if (x > fiender[tmp].x)
                                            dx *= -1;
                                        if (y > fiender[tmp].y)
                                            dy *= -1;
                                        var angle = Math.atan2(dy, dx);
                                        var velX = (2 * Math.cos(angle));
                                        var velY = (2 * Math.sin(angle));
                                        if (x > fiender[tmp].x)
                                            velX = velX;
                                        else if (x < fiender[tmp].x)
                                            velX *= -1;
                                        if (y > fiender[tmp].y)
                                            velY = velY;
                                        else if (y < fiender[tmp].y)
                                            velY *= -1;
                                        projectile[tmpw].speedX = velX;
                                        projectile[tmpw].speedY = velY;


                                        fiender[tmp].fire = 0;




                                    }
                                }
                                else {
                                    if (fiender[tmp].type == "casterattack") {

                                        fiender[tmp].type = "casterwalk";

                                        fiender[tmp].speedX = 0.2;
                                    }
                                }
                            }
                        }
                    }
                }
            }, 1000);

            document.documentElement.style.background = "lightgray";
            fixvolume();
            refreshLoop();
            document.getElementById('BossHealthContainer').style.display = "none";
            document.getElementById('energy').innerHTML = energy;
            document.getElementById('maxHP').innerHTML = maxhealth;
            document.getElementById('shield').innerHTML = shield;

            document.getElementById('Shieldcontainer').style.display = "none";
            document.getElementById('inventorycontainer').style.marginTop = "-50px";
            bonus1 = new bonus(0, 0, 0, 0, 0);
            bonus2 = new bonus(0, 0, 0, 0, 0);
            bonus3 = new bonus(0, 0, 0, 0, 0);
            bonuses = [bonus1, bonus2, bonus3];


        }
    </script>
    <script>//varibles
        var player;
        var gam;
        var auctionInUse = [0, 0, 0];
        var epicwintime;
        var Bossmaxhealth;
        var casterTimer;
        var SummoningPhase = false;
        var Quest1;
        var Quest2;
        var Quest3;
        var Quest4;
        var TheFinalBoss;
        var finalbossactive = false;
        var FinalBossAttack = [];
        var FinalBossIdle = [];
        var FinalBossDeath = [];
        var FinalBossFly = [];
        var trer = false;
        var trera = false;
        var auctionSlot1Timer;
        var auctionSlot2Timer;
        var auctionSlot3Timer;
        var potions = [0, 0, 0, 0];
        var potionSelect = [0, 0, 0, 0];
        var knockbacks = false;
        var helper1target = null;
        var helper2target = null;
        var helper3target = null;
        var knockbackres = 1;
        var stunres = 1;
        var bosskilled = 0;
        var scoreen;
        var Healthregens;
        var Healtregenreset = 0;
        var helper;
        var spawnValue = 10;
        var tmpknock = [];
        var tmpI = [];
        var lightnings = 0;
        var reachexpreq = 10;
        var speedexpreq = 35;
        var reachx = 35;
        var reachy = 25;
        var lightningComponent;
        var ability1 = false;
        var ability1unlocked = false;
        var sfxslider = document.getElementById('sfxslider');
        var musicslider = document.getElementById('musicslider');
        var masterslider = document.getElementById('masterslider');
        var masterlvl = 0.5;
        var musiclvl = 0.5;
        var sfxlvl = 0.5;
        var soundhit = false;
        var autokillLvl = 1;
        var backgrounds;
        var currentnumber = 0;
        var autokillEXPreq = 50;
        var autokillEXPreqmult = 1.1;
        var shield = 100;
        var Eregenreq = 5;
        var eregenlvl = 0;
        var autolvl = 0;
        var bosscounter = 0;
        var boss;
        var ast = 0;
        var asf = 0;


        var finalbossframe = 0;

        const times = [];
        var WitchWalk = []
        let fps;
        var BossEvent = false;
        var audio = new Audio("Audio/Song1.mp3");
        var swordAudiofast = new Audio("Audio/Swordattackfast.mp3");
        var swordAudioslow = new Audio("Audio/Swordattackmedium.mp3");
        var swordAudiohit = new Audio("Audio/Swordhit.mp3");
        var SongLife = new Audio("Audio/Life.mp3");
        var SongDragonWar = new Audio("Audio/Dragon War.mp3");
        var SongBehindTheMemories = new Audio("Audio/Behind the Memories.mp3");
        var SongTheWar = new Audio("Audio/The War.mp3");
        var SongDreamsAndFantasies = new Audio("Audio/Dreams and Fantasies.mp3");
        var ChaosGolemTheme = new Audio("Audio/ChaosGolemTheme.mp3");
        var epicwin1 = new Audio("Audio/Part1.mp3");
        var epicwin2 = new Audio("Audio/Part2.mp3");
        var death = new Audio("Audio/death.mp3");
        var finalbossmusic = new Audio("Audio/Finalboss.mp3");
        var reachlvl = 0;
        var speedlvl = 0;
        var knockbackstrength = 0.2;
        var knockback = [];
        var knockbackTTL = 0;
        var wallhitvar = [];
        var Inventory = [1, 2, 3, 4, 1, 5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 35, 35, 35];
        var InventoryDesc = [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null,
            "Instant Energy potion", "Instant Health potion", "Health potion", "Fur: value 20 gold", "Crooked teeth: value 25 gold",
            "Crystal formation: value 120 gold", "Dark Orb: 20000 Darkness", "Quest", "Special quest", null,
            "Shark tooth:-5 Health, +5 Damage, +10 max Energy, +2 Sprint speed, -1 Energy regen", "Golden necklage: +1 Health, -10 Max energy, +4 Energy regen",
            "Diamond ring: +2 Health, +1 Max energy", "Golden ring: +1 Damage, +10 Max energy,+1 Sprint speed", "Viking shield: +5 Health, -0.5 Sprint speed, +1 knockbackresistents, +1 stunresistents",
            "Dagger: -6 Health, +6 Damage, -50 Max Energy, +5 Energy Regen", "Golden horn: +4 Health, -1 Damage, +5 Max energy, +10 Sprint speed, -1 Energy regen",
            "Knight's shield: +10 Health, +2 knockbackresistents, +2 stunresistents", "Yuki's belt: +10 Health, -5 Damage, +20 Max energy, +2 Sprint speed, +1 Energy regen", "Piercing bolt: +6 Damage, +5 Max energy, -1 Sprint speed",
            "Chaos hammer: -20 Health, +20 Damage, -70 Max energy, -10 Sprint speed, +2 Energy regen ", "Progenitor of Chaos"]
        var ArmourLvl = [1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        var pauseineffect = false;
        var Gold = 0;
        var InventoryChosen = null;
        var InventoryChosenReset;
        var Inventorytmp;
        var Inventoryuse;
        var Invenoryusebool = false;
        var slot23bonus = false;
        var slot24bonus = false;
        var slot25bonus = false;
        var bonus1;
        var bonus2;
        var bonus3;
        var bonuses;
        var xtarget;
        var ytarget;
        var playerisknockbacked = false;
        var maxhealth = 7;
        var playerhealth = 7;
        var ERegen = 1;
        var Energyregen = 1.25;
        var energymax = 100;
        var energy = 100;
        var sprint = 0;
        var playerdmg = 1;
        var playerspeed = 1.5;
        var penalty = 0;
        var playerknockbackres = 1;
        var playerstunres = 1;
        var FinalBossAttackPattern = 0;
    </script>
    <script>

        var helperimage = new Image();

        var backgroundimg = new Image();

        var playermoveright1 = new Image();
        var playermoveright2 = new Image();
        var playermoveright3 = new Image();
        var playermoveright4 = new Image();
        var playermoveright5 = new Image();
        var playermoveright6 = new Image();
        var playermoveright7 = new Image();
        var playermoveright8 = new Image();

        var playermoveleft1 = new Image();
        var playermoveleft2 = new Image();
        var playermoveleft3 = new Image();
        var playermoveleft4 = new Image();
        var playermoveleft5 = new Image();
        var playermoveleft6 = new Image();
        var playermoveleft7 = new Image();
        var playermoveleft8 = new Image();

        var playerattack1 = new Image();
        var playerattack2 = new Image();
        var playerattack3 = new Image();
        var playerattack4 = new Image();
        var playerattack5 = new Image();
        var playerattack6 = new Image();
        var playerattack7 = new Image();
        var playerattack8 = new Image();
        var playerattack9 = new Image();
        var playerattack10 = new Image();
        var playerattack11 = new Image();
        var playerattack12 = new Image();
        var playerattack13 = new Image();
        var playerattack14 = new Image();
        var playerattack15 = new Image();
        var playerattack16 = new Image();
        var playerattack17 = new Image();
        var playerattack18 = new Image();
        var playerattack19 = new Image();

        var playerattackleft1 = new Image();
        var playerattackleft2 = new Image();
        var playerattackleft3 = new Image();
        var playerattackleft4 = new Image();
        var playerattackleft5 = new Image();
        var playerattackleft6 = new Image();
        var playerattackleft7 = new Image();
        var playerattackleft8 = new Image();
        var playerattackleft9 = new Image();
        var playerattackleft10 = new Image();
        var playerattackleft11 = new Image();
        var playerattackleft12 = new Image();
        var playerattackleft13 = new Image();
        var playerattackleft14 = new Image();
        var playerattackleft15 = new Image();
        var playerattackleft16 = new Image();
        var playerattackleft17 = new Image();
        var playerattackleft18 = new Image();
        var playerattackleft19 = new Image();

        var playeridle1 = new Image();
        var playeridle2 = new Image();
        var playeridle3 = new Image();
        var playeridle4 = new Image();
        var playeridle5 = new Image();
        var playeridle6 = new Image();
        var playeridle7 = new Image();
        var playeridle8 = new Image();
        var playeridle9 = new Image();
        var playeridle10 = new Image();
        var playeridle11 = new Image();
        var playeridle12 = new Image();
        var playeridle13 = new Image();
        var playeridle14 = new Image();
        var playeridle15 = new Image();

        var playeridleleft1 = new Image();
        var playeridleleft2 = new Image();
        var playeridleleft3 = new Image();
        var playeridleleft4 = new Image();
        var playeridleleft5 = new Image();
        var playeridleleft6 = new Image();
        var playeridleleft7 = new Image();
        var playeridleleft8 = new Image();
        var playeridleleft9 = new Image();
        var playeridleleft10 = new Image();
        var playeridleleft11 = new Image();
        var playeridleleft12 = new Image();
        var playeridleleft13 = new Image();
        var playeridleleft14 = new Image();
        var playeridleleft15 = new Image();
        var imgback = new Image();

    </script>
    <script>
        var resetcombo = setTimeout(function () {
            combos = 0;


        }, 3000);
        var playerknockbackbool = false;
        var Darkness = 0;
        var chaosregen;
        var pressed = false;
        var LifeDrainKeyFrame = 0;
        var LifeDrainKeyFrames;
        var LifeDrainKeyFrame2 = 0;
        var LifeDrainKeyFrames2;
        var LifeDrainKeyFrame3 = 0;
        var LifeDrainKeyFrames3;
        var CasterWalkframes;
        var shakeIt = 0;
        var currentframe1 = 0;
        var autokillactive = false;
        var autokillbarses = 1;
        var sprinttrue = false;
        var opacitydeath = 0;
        var diff = 1;
        var diff2 = 1;
        var exp = 0;
        var pressed2 = false;
        var keysdown = [0, 0, 0, 0];
        var leftorright = [0, 1];
        var combos = 0;
        var combocoldown = false;
        var rightmove = 0;
        var rightnum = 0;
        var attacknum = 0;
        var leftmove = 0;
        var leftnum = 0;
        var idlenum = 0;
        var attacknow = 0;
        var turn = 0;
        var fiends = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
            0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
        var fiender = [];
        var spawn = 0;
        var lives = maxhealth;;
        var turnspeed = 0;
        var autokilltime = 0;
        var lefthit = false;
        var righthit = false;
        var tophit = false;
        var bottomhit = false;
        var autokilllvl = 0;
        var autokillbarwidth = 0;

        var currentframe = 0;
        var score = 0;
        var WolfWalk = [];
        var GolemWalk = [];
        var CasterWalk = [];
        var CasterAttack = [];
        var ChaosGolemWalk = [];
        var LifeDrainImages = [];
        var InventoryImages = [];
        var CasterAttacks = [];
        var knockbacklvl = 0;
        var knockbackexpreq = 20;
        var ChaosGolem;
        var helperactive = false;
        var helper2active = false;
        var helper2;
        var helper3;
        var helper3active = false;
        var LifeDrainSpeed = 1.5;
        var projectile = [];

    </script>
    <script>//Fiends
        var testsa;
        var testsa2;
        function FiendSpawn() {
            if (bosscounter / (diff2 / 10) >= (7500 / (diff2 * 10)) && finalbossactive === false) {
                bosscounter = 0;
                BossEvent = true;
                document.documentElement.style.transition = "background 5s, color 10s";
                document.documentElement.style.background = "rgb(17, 5, 26)";
                document.documentElement.style.color = "white";
                document.getElementById('BossHealthBox').style.background = "purple";
                ChaosGolemTheme.play();
                setTimeout(function () { MusicBot(4, 1) }, 142000);
                MusicBot(0, 2);
                spawnValue = 0;
                spawn = 0;
                ChaosGolem = new component(608, 608, "ChaosGolem", -150, 250, (Math.round(10 + (100 * diff))), (6 + (bosskilled * 4)));
                document.getElementById('BossHealthContainer').style.display = "block";
                document.getElementById('BossmaxHp').innerHTML = ChaosGolem.hp;
                document.getElementById('BossHealth').innerHTML = "ChaosGolem " + ChaosGolem.hp;
                Bossmaxhealth = ChaosGolem.hp;
                document.getElementById('BossHealthBox').style.width = (Math.round(ChaosGolem.hp * 1000) / 1000 * (1200 / Bossmaxhealth)) + "px";
                trer = true;
                trera = true;
                ChaosGolem.speedX = 0.1 + (0.05 * (diff2 / 100));
                ChaosGolemShake();
                for (var i = 0; i <= diff2; i++) {
                    fiends[i] = 0;
                    fiender[i] = null;

                }
            }

            spawn = spawn + spawnValue;
            if (BossEvent && finalbossactive != true) {
                if (ChaosGolem.x >= 1200) {
                    ChaosGolem.speedX = 0
                    lives -= ChaosGolem.dmg;
                    ChaosGolem = null;
                    diff += 0.5;
                    BossEvent = false;
                    spawnValue = 10;
                    document.documentElement.style.background = "lightgray";
                    document.documentElement.style.color = "black";
                    document.getElementById('BossHealthContainer').style.display = "none";
                    document.getElementById('lives').innerHTML = lives;
                    document.getElementById('maxHP').innerHTML = maxhealth;
                    document.getElementById('Livesbox').style.width = (lives * (600 / maxhealth)) + "px";
                    if (lives <= 0) {
                        gameStop();
                    }
                }
                if (ChaosGolem != null) {
                    ChaosGolem.update();
                    ChaosGolem.newPos();

                }
            }
            if (!BossEvent) {
                for (var i = 0; i <= diff2; i++) {

                    if (fiends[i] == 0) {

                        if (spawn >= 200) {
                            var r3 = Math.round((Math.random() * 1000) / 10);
                            var r = Math.round(Math.random() * 1000) / 1.8;
                            var r2 = Math.round((Math.random() + 0.1) * 10) / 2;
                            r2 = ((r2 / 20) + 0.3) * ((diff / 2.5) / 10) + 0.1;


                            if (r3 <= 35) {
                                if (diff2 > 1.1) {
                                    fiender[i] = new component(60, 60, "Witch", -25, r, Math.round(3 * (diff)), 2);
                                    fiender[i].speedX = r2;
                                    fiends[i] = 1;
                                    spawn = 0;
                                    currentnumber++;
                                }
                                else {
                                    fiender[i] = new component(78, 78, "Wolf", -25, r, 2, 1);
                                    fiender[i].speedX = r2 + 0.5;
                                    fiends[i] = 1;
                                    spawn = 0;
                                    currentnumber++;

                                }
                            }
                            else if (r3 > 35 && r3 < 70) {
                                fiender[i] = new component(78, 78, "Wolf", -25, r, 2, 1);
                                fiender[i].speedX = r2 + 0.5;
                                fiends[i] = 1;
                                spawn = 0;
                                currentnumber++;


                            }
                            else if (r3 >= 70 && r3 < 90) {
                                if (diff2 > 2) {
                                    fiender[i] = new component(80, 80, "casterwalk", -25, r, 3, 1, i);
                                    fiender[i].speedX = r2 / 0.5;
                                    fiends[i] = 1;
                                    spawn = 0;
                                    currentnumber++;
                                }
                                else {
                                    var r4 = Math.round((Math.random() * 1000) / 10);
                                    if (r4 >= 50) {
                                        fiender[i] = new component(78, 78, "Wolf", -25, r, 2, 1);
                                        fiender[i].speedX = r2 + 0.5;
                                        fiends[i] = 1;
                                        spawn = 0;
                                        currentnumber++;
                                    }
                                    else {
                                        fiender[i] = new component(60, 60, "Witch", -25, r, Math.round(3 * (diff)), 2);
                                        fiender[i].speedX = r2;
                                        fiends[i] = 1;
                                        spawn = 0;
                                        currentnumber++;

                                    }
                                }
                            }
                            else {
                                if (diff2 > 3) {
                                    fiender[i] = new component(76, 76, "Golem", -25, r, Math.round(6 * diff), 5);
                                    fiender[i].speedX = r2 / 1.5;
                                    fiends[i] = 1;
                                    spawn = 0;
                                    currentnumber++;

                                }
                                else {
                                    var r4 = Math.round((Math.random() * 1000) / 10);
                                    if (r4 >= 35) {
                                        fiender[i] = new component(78, 78, "Wolf", -25, r, 2, 1);
                                        fiender[i].speedX = r2 + 0.5;
                                        fiends[i] = 1;
                                        spawn = 0;
                                        currentnumber++;
                                    }
                                    else if (r4 >= 70) {
                                        fiender[i] = new component(60, 60, "Witch", -25, r, Math.round(3 * (diff)), 2);
                                        fiender[i].speedX = r2;
                                        fiends[i] = 1;
                                        spawn = 0;
                                        currentnumber++;

                                    }
                                    else {
                                        fiender[i] = new component(80, 80, "casterwalk", -25, r, 3, 1, i);
                                        fiender[i].speedX = r2 / 0.5;
                                        fiends[i] = 1;
                                        spawn = 0;
                                        currentnumber++;

                                    }
                                }
                            }


                        }
                    }
                }
            }
        }

        function fiendmove() {

            for (var i = 0; i < fiender.length; i++) {

                if (fiender[i] != null) {

                    if (fiender[i].x >= 1200) {
                        fiender[i].x = -25;
                        fiender[i].speedX = 0;

                        lives = lives - fiender[i].dmg;

                        var dur;
                        if (fiender[i].dmg == 10) {

                            document.body.style.animation = "shake 0.75s";
                            document.body.style.webkitAnimation = "shake 0.75s";
                            setTimeout(function () {
                                document.body.style.animation = "";
                                document.body.style.webkitAnimation = "";
                            }, 750);
                        }


                        document.getElementById('lives').innerHTML = lives;
                        document.getElementById('maxHP').innerHTML = maxhealth;
                        document.getElementById('Livesbox').style.width = (lives * (600 / maxhealth)) + "px";
                        backgroundflash();
                        if (lives <= 0) {
                            gameStop();
                        }



                        fiends[i] = 0;

                        currentnumber--;

                    }
                    else {
                        fiender[i].newPos();
                    }
                    fiender[i].update();

                }
            }
        }

        function KnockBackReset(s,) {

            knockbacks = true;
            if (knockback[s]) {
                testsa = s;


                setTimeout(function () {
                    var s = testsa;


                    testsa = null;

                    if (fiender[s].x <= 0) {

                        fiender[s].speedX = 0;
                        fiender[s].x = -10;
                        testsa = s;

                        setTimeout(function () {
                            var s = testsa;

                            testsa = null;


                            fiender[s].speedX = wallhitvar[s];
                            knockbacks = false;
                            tmpknock[s] = null;
                            wallhitvar[s] = null;
                            tmpI[s] = null;
                            knockback[s] = null;
                        }, 1000);

                    }
                    else {
                        fiender[s].speedX += 0.01;

                        if (fiender[s].speedX >= tmpknock[s]) {
                            knockback[s] = null;
                            fiender[s].speedX = tmpknock[s];
                            tmpknock[s] = null;
                            wallhitvar[s] = null;
                            tmpI[s] = null;
                            knockbacks = false;
                        }
                        else {
                            KnockBackReset(s);

                        }
                    }
                }, 1);

            }

        }
        function CheckFiendDetah() {
            if (!BossEvent || SummoningPhase) {
                var difftmp;
                if (finalbossactive)
                    difftmp = 10;
                else
                    difftmp = diff2;
                for (var i = 0; i < diff2; i++) {

                    if (fiends[i] == 1) {
                        var playerx = player.x;
                        var fiendx = fiender[i].x;
                        var playery = player.y;
                        var fiendy = fiender[i].y;
                        if (leftorright[0] == 1) {

                            if (playerx < (fiendx + reachx) && playerx > (fiendx - 15)) {
                                if (playery > (fiendy - reachy) && playery < (fiendy + reachy)) {
                                    fiender[i].hp -= player.dmg;
                                    if (fiender[i].hp <= 0) {
                                        soundhit = true;

                                        swordAudiohit.play();
                                        var tmp = fiender[i].type;
                                        exp += Math.round(4 * ((diff2 / 10) * diff) + 3);
                                        score += 5;
                                        gooditem();
                                        document.getElementById('score').innerHTML = score;
                                        fiends[i] = 0;
                                        fiender[i].speedX = 0;
                                        fiender[i].x = -55;
                                        currentnumber--;
                                        bosscounter++;
                                        document.getElementById('exp').innerHTML = exp;
                                        var r = Math.round(Math.random() * 10);
                                        switch (tmp) {
                                            case "Wolf":
                                                for (i = 0; i < 3; i++) {

                                                    switch (i) {
                                                        case 0:
                                                            if (Quest1 != null) {
                                                                if (Quest1.type == 1) {

                                                                    Quest1.done++;
                                                                    if (Quest1.done == Quest1.amount) {
                                                                        document.getElementById('Quest1button').disabled = false;

                                                                    }
                                                                    if (Quest1.done > Quest1.amount)
                                                                        Quest1.done = Quest1.amount;
                                                                    document.getElementById('Quest1content').innerHTML = 'Kill ' + Quest1.done + '/' + Quest1.amount + ' Wolfs' + '<br />';
                                                                }

                                                            }
                                                            break;
                                                        case 1:
                                                            if (Quest2 != null) {
                                                                if (Quest2.type == 1) {

                                                                    Quest2.done++;
                                                                    if (Quest2.done == Quest2.amount) {
                                                                        document.getElementById('Quest2button').disabled = false;

                                                                    }
                                                                    if (Quest2.done > Quest2.amount)
                                                                        Quest2.done = Quest2.amount;
                                                                    document.getElementById('Quest2content').innerHTML = 'Kill ' + Quest2.done + '/' + Quest2.amount + ' Wolfs' + '<br />';
                                                                }

                                                            }
                                                            break;
                                                        case 2:
                                                            if (Quest3 != null) {
                                                                if (Quest3.type == 1) {

                                                                    Quest3.done++;
                                                                    if (Quest3.done == Quest3.amount) {
                                                                        document.getElementById('Quest3button').disabled = false;

                                                                    }
                                                                    if (Quest3.done > Quest3.amount)
                                                                        Quest3.done = Quest3.amount;
                                                                    document.getElementById('Quest3content').innerHTML = 'Kill ' + Quest3.done + '/' + Quest3.amount + ' Wolfs' + '<br />';
                                                                }

                                                            }
                                                            break;

                                                    }

                                                }

                                                if (r > 3) {
                                                    for (i = 6; i < 24; i++) {
                                                        if (Inventory[i] == 1) {
                                                            Inventory[i] = 29;
                                                            fixinventory(29, i);
                                                            break;
                                                        }

                                                    }

                                                }
                                                break;
                                            case "Witch":
                                                for (i = 0; i < 3; i++) {

                                                    switch (i) {
                                                        case 0:
                                                            if (Quest1 != null) {
                                                                if (Quest1.type == 3) {

                                                                    Quest1.done++;
                                                                    if (Quest1.done == Quest1.amount) {
                                                                        document.getElementById('Quest1button').disabled = false;

                                                                    }
                                                                    if (Quest1.done > Quest1.amount)
                                                                        Quest1.done = Quest1.amount;
                                                                    document.getElementById('Quest1content').innerHTML = 'Kill ' + Quest1.done + '/' + Quest1.amount + ' Witches' + '<br />';
                                                                }

                                                            }
                                                            break;
                                                        case 1:
                                                            if (Quest2 != null) {
                                                                if (Quest2.type == 3) {

                                                                    Quest2.done++;
                                                                    if (Quest2.done == Quest2.amount) {
                                                                        document.getElementById('Quest2button').disabled = false;

                                                                    }
                                                                    if (Quest2.done > Quest2.amount)
                                                                        Quest2.done = Quest2.amount;
                                                                    document.getElementById('Quest2content').innerHTML = 'Kill ' + Quest2.done + '/' + Quest2.amount + ' Witches' + '<br />';
                                                                }

                                                            }
                                                            break;
                                                        case 2:
                                                            if (Quest3 != null) {
                                                                if (Quest3.type == 3) {

                                                                    Quest3.done++;
                                                                    if (Quest3.done == Quest3.amount) {
                                                                        document.getElementById('Quest3button').disabled = false;

                                                                    }
                                                                    if (Quest3.done > Quest3.amount)
                                                                        Quest3.done = Quest3.amount;
                                                                    document.getElementById('Quest3content').innerHTML = 'Kill ' + Quest3.done + '/' + Quest3.amount + ' Witches' + '<br />';
                                                                }

                                                            }
                                                            break;

                                                    }

                                                }

                                                if (r > 5) {
                                                    for (i = 6; i < 24; i++) {
                                                        if (Inventory[i] == 1) {
                                                            Inventory[i] = 30;
                                                            fixinventory(30, i);
                                                            break;
                                                        }

                                                    }

                                                }
                                                break;

                                            case "Golem":
                                                for (i = 6; i < 24; i++) {
                                                    if (Inventory[i] == 1) {
                                                        Inventory[i] = 31;
                                                        fixinventory(31, i);
                                                        if (Quest4 != null) {
                                                            Quest4.done++;
                                                            document.getElementById('Questspecialcontent').innerHTML = 'Kill ' + Quest4.done + '/' + Quest4.amount + ' Golems' + '<br>';
                                                            if (Quest4.done >= Quest4.amount) {
                                                                switch (Quest4.type) {
                                                                    case "darkness":
                                                                        Darkness += Quest4.reward;
                                                                        break;
                                                                    case "damage":
                                                                        playerdmg += Quest4.reward;
                                                                        break;
                                                                    case "gold":
                                                                        Gold += Quest4.reward;
                                                                        break;
                                                                    case "item":
                                                                        var random = Math.round(Math.random() * 10);
                                                                        var item;
                                                                        switch (random) {
                                                                            case 1:
                                                                                item = 36;
                                                                                break;
                                                                            case 2:
                                                                                item = 37;
                                                                                break;
                                                                            case 3:
                                                                                item = 38;
                                                                                break;
                                                                            case 4:
                                                                                item = 39;
                                                                                break;
                                                                            case 5:
                                                                                item = 40;
                                                                                break;
                                                                            case 6:
                                                                                item = 41;
                                                                                break;
                                                                            case 7:
                                                                                item = 42;
                                                                                break;
                                                                            case 8:
                                                                                item = 43;
                                                                                break;
                                                                            case 9:
                                                                                item = 44;
                                                                                break;
                                                                            case 10:
                                                                                item = 45;
                                                                                break;


                                                                        }
                                                                        for (n = 6; n < 24; n++) {
                                                                            if (Inventory[n] == 1) {
                                                                                Inventory[n] = item;
                                                                                fixinventory(Inventory[n], n);
                                                                                document.getElementById('Questspecialcontent').innerHTML = "";
                                                                                document.getElementById('Questspecialreward').innerHTML = "";
                                                                                break;
                                                                            }


                                                                        }
                                                                        break;


                                                                }
                                                                Quest4 = null;
                                                            }

                                                        }
                                                        break;
                                                    }

                                                }

                                        }

                                    }

                                    else {
                                        var tempo;
                                        for (n = 0; n < tmpknock.length + 1; n++) {

                                            if (tmpknock[n] == null) {
                                                tempo = n;

                                            }
                                        }
                                        if (fiender[i].speedX < 0) {

                                        }
                                        else {
                                            if (!knockbacks) {

                                                tmpknock[i] = fiender[i].speedX;
                                                wallhitvar[i] = fiender[i].speedX;
                                                fiender[i].speedX = -knockbackstrength;
                                                tmpI[i] = i;

                                                knockbacks = true;

                                                knockback[i] = true;
                                                KnockBackReset(i);
                                                tempo = null;


                                            }
                                        }
                                    }
                                }
                            }
                        }
                        else if (leftorright[1] == 1) {


                            if (playerx > (fiendx - (reachx + 25)) && playerx < (fiendx - 5)) {
                                if (playery > (fiendy - reachy) && playery < (fiendy + reachy)) {
                                    fiender[i].hp -= player.dmg;
                                    if (fiender[i].hp <= 0) {
                                        soundhit = true;

                                        swordAudiohit.play();
                                        var tmp = fiender[i].type;
                                        exp += Math.round(4 * ((diff2 / 10) * diff) + 3);
                                        score += 5;
                                        gooditem();
                                        document.getElementById('score').innerHTML = score;
                                        fiends[i] = 0;
                                        fiender[i].speedX = 0;
                                        fiender[i].x = -25;
                                        currentnumber--;
                                        bosscounter++;
                                        document.getElementById('exp').innerHTML = exp;
                                        var r = Math.round(Math.random() * 10);
                                        switch (tmp) {
                                            case "Wolf":
                                                for (i = 0; i < 3; i++) {

                                                    switch (i) {
                                                        case 0:
                                                            if (Quest1 != null) {
                                                                if (Quest1.type == 1) {

                                                                    Quest1.done++;
                                                                    if (Quest1.done == Quest1.amount) {
                                                                        document.getElementById('Quest1button').disabled = false;

                                                                    }
                                                                    if (Quest1.done > Quest1.amount)
                                                                        Quest1.done = Quest1.amount;
                                                                    document.getElementById('Quest1content').innerHTML = 'Kill ' + Quest1.done + '/' + Quest1.amount + ' Wolfs' + '<br />';
                                                                }

                                                            }
                                                            break;
                                                        case 1:
                                                            if (Quest2 != null) {
                                                                if (Quest2.type == 1) {

                                                                    Quest2.done++;
                                                                    if (Quest2.done == Quest2.amount) {
                                                                        document.getElementById('Quest2button').disabled = false;

                                                                    }
                                                                    if (Quest2.done > Quest2.amount)
                                                                        Quest2.done = Quest2.amount;
                                                                    document.getElementById('Quest2content').innerHTML = 'Kill ' + Quest2.done + '/' + Quest2.amount + ' Wolfs' + '<br />';
                                                                }

                                                            }
                                                            break;
                                                        case 2:
                                                            if (Quest3 != null) {
                                                                if (Quest3.type == 1) {

                                                                    Quest3.done++;
                                                                    if (Quest3.done == Quest3.amount) {
                                                                        document.getElementById('Quest3button').disabled = false;

                                                                    }
                                                                    if (Quest3.done > Quest3.amount)
                                                                        Quest3.done = Quest3.amount;
                                                                    document.getElementById('Quest3content').innerHTML = 'Kill ' + Quest3.done + '/' + Quest3.amount + ' Wolfs' + '<br />';
                                                                }

                                                            }
                                                            break;

                                                    }

                                                }

                                                if (r > 3) {
                                                    for (i = 6; i < 24; i++) {
                                                        if (Inventory[i] == 1) {
                                                            Inventory[i] = 29;
                                                            fixinventory(29, i);
                                                            break;
                                                        }

                                                    }

                                                }
                                                break;
                                            case "Witch":
                                                for (i = 0; i < 3; i++) {

                                                    switch (i) {
                                                        case 0:
                                                            if (Quest1 != null) {
                                                                if (Quest1.type == 3) {

                                                                    Quest1.done++;
                                                                    if (Quest1.done == Quest1.amount) {
                                                                        document.getElementById('Quest1button').disabled = false;

                                                                    }
                                                                    if (Quest1.done > Quest1.amount)
                                                                        Quest1.done = Quest1.amount;
                                                                    document.getElementById('Quest1content').innerHTML = 'Kill ' + Quest1.done + '/' + Quest1.amount + ' Witches' + '<br />';
                                                                }

                                                            }
                                                            break;
                                                        case 1:
                                                            if (Quest2 != null) {
                                                                if (Quest2.type == 3) {

                                                                    Quest2.done++;
                                                                    if (Quest2.done == Quest2.amount) {
                                                                        document.getElementById('Quest2button').disabled = false;

                                                                    }
                                                                    if (Quest2.done > Quest2.amount)
                                                                        Quest2.done = Quest2.amount;
                                                                    document.getElementById('Quest2content').innerHTML = 'Kill ' + Quest2.done + '/' + Quest2.amount + ' Witches' + '<br />';
                                                                }

                                                            }
                                                            break;
                                                        case 2:
                                                            if (Quest3 != null) {
                                                                if (Quest3.type == 3) {

                                                                    Quest3.done++;
                                                                    if (Quest3.done == Quest3.amount) {
                                                                        document.getElementById('Quest3button').disabled = false;

                                                                    }
                                                                    if (Quest3
                                                                        .done > Quest3.amount)
                                                                        Quest3.done = Quest3.amount;
                                                                    document.getElementById('Quest3content').innerHTML = 'Kill ' + Quest3.done + '/' + Quest3.amount + ' Witches' + '<br />';
                                                                }

                                                            }
                                                            break;

                                                    }

                                                }

                                                if (r > 5) {
                                                    for (i = 6; i < 24; i++) {
                                                        if (Inventory[i] == 1) {
                                                            Inventory[i] = 30;
                                                            fixinventory(30, i);
                                                            break;
                                                        }

                                                    }

                                                }
                                                break;

                                            case "Golem":
                                                for (i = 6; i < 24; i++) {
                                                    if (Inventory[i] == 1) {
                                                        Inventory[i] = 31;
                                                        fixinventory(31, i);

                                                        if (Quest4 != null) {
                                                            Quest4.done++;
                                                            document.getElementById('Questspecialcontent').innerHTML = 'Kill ' + Quest4.done + '/' + Quest4.amount + ' Golems' + '<br>';
                                                            if (Quest4.done >= Quest4.amount) {
                                                                switch (Quest4.type) {
                                                                    case "darkness":
                                                                        Darkness += Quest4.reward;
                                                                        break;
                                                                    case "damage":
                                                                        playerdmg += Quest4.reward;
                                                                        GivePlayerBonuses();
                                                                        break;
                                                                    case "gold":
                                                                        Gold += Quest4.reward;
                                                                        break;
                                                                    case "item":
                                                                        var random = Math.round(Math.random() * 10);
                                                                        var item;
                                                                        switch (random) {
                                                                            case 1:
                                                                                item = 36;
                                                                                break;
                                                                            case 2:
                                                                                item = 37;
                                                                                break;
                                                                            case 3:
                                                                                item = 38;
                                                                                break;
                                                                            case 4:
                                                                                item = 39;
                                                                                break;
                                                                            case 5:
                                                                                item = 40;
                                                                                break;
                                                                            case 6:
                                                                                item = 41;
                                                                                break;
                                                                            case 7:
                                                                                item = 42;
                                                                                break;
                                                                            case 8:
                                                                                item = 43;
                                                                                break;
                                                                            case 9:
                                                                                item = 44;
                                                                                break;
                                                                            case 10:
                                                                                item = 45;
                                                                                break;


                                                                        }
                                                                        for (n = 6; n < 24; n++) {
                                                                            if (Inventory[n] == 1) {
                                                                                Inventory[n] = item;
                                                                                fixinventory(Inventory[n], n);

                                                                                document.getElementById('Questspecialcontent').innerHTML = "";
                                                                                document.getElementById('Questspecialreward').innerHTML = "";
                                                                                break;

                                                                            }


                                                                        }
                                                                        break;


                                                                }
                                                                Quest4 = null;
                                                            }

                                                        }
                                                        break;
                                                    }

                                                }

                                                break;
                                        }

                                    }
                                    else {


                                    }
                                }
                            }
                        }
                        soundhit = false;
                    }
                    else {
                        continue;
                    }




                }
            }
            if (ChaosGolem != null) {

                if (leftorright[0] == 1) {
                    if (player.x > (ChaosGolem.x) && player.x < (ChaosGolem.x + 125)) {
                        if (player.y > (ChaosGolem.y - (reachy)) && player.y < ((ChaosGolem.y + 110) + reachy)) {

                            ChaosGolem.hp -= player.dmg;
                            if (ChaosGolem.hp <= 0) {
                                if (!finalbossactive) {
                                    soundhit = true;

                                    swordAudiohit.play();
                                    document.getElementById('BossHealthContainer').style.display = "none";
                                    exp += Math.round(4000 * ((diff2 / 10) * diff) + 3);
                                    score += 5000;

                                    document.getElementById('score').innerHTML = score;
                                    BossEvent = false;
                                    if (bosskilled > 2)
                                        bosskilled++;
                                    spawnValue = 10;
                                    document.documentElement.style.background = "lightgray";
                                    document.documentElement.style.color = "black";
                                    document.getElementById('exp').innerHTML = exp;
                                    ChaosGolem = null;
                                    for (i = 6; i < 24; i++) {
                                        if (Inventory[i] == 1) {
                                            Inventory[i] = 32;
                                            fixinventory(32, i);
                                            break;
                                        }

                                    }
                                }
                                else {
                                    ChaosGolem = null;

                                }
                            }
                            else {
                                var color;
                                if (ChaosGolem.hp >= (Bossmaxhealth / 2)) {
                                    color = "Purple";
                                }
                                if (ChaosGolem.hp <= (Bossmaxhealth / 2)) {
                                    color = "Yellow";
                                }
                                if (ChaosGolem.hp <= (Bossmaxhealth / 4)) {
                                    color = "rgb(171, 80, 5)";
                                    ChaosGolem.speedX *= 1.1;
                                }
                                if (ChaosGolem.hp <= (Bossmaxhealth / 10)) {
                                    color = "rgb(69, 5, 0)";
                                    if (!finalbossactive) {
                                        ChaosGolem.speedX *= 2.5;
                                    }
                                }

                                document.getElementById('BossHealthBox').style.background = color;
                            } if (ChaosGolem != null) {
                                document.getElementById('BossHealth').innerHTML = ChaosGolem.hp;
                                document.getElementById('BossHealthBox').style.width = (Math.round(ChaosGolem.hp * 1000) / 1000 * (1200 / Bossmaxhealth)) + "px";
                            }
                            else
                                document.getElementById('BossHealthContainer').style.display = "none";
                        }

                    }
                }
                else if (leftorright[1] == 1) {
                    if (player.x > (ChaosGolem.x - (reachx - 15)) && player.x < (ChaosGolem.x + 125)) {
                        if (player.y > (ChaosGolem.y - (reachy)) && player.y < ((ChaosGolem.y + 110) + reachy)) {
                            ChaosGolem.hp -= player.dmg;
                            if (ChaosGolem.hp <= 0) {
                                if (!finalbossactive) {
                                    soundhit = true;

                                    swordAudiohit.play();
                                    document.getElementById('BossHealthContainer').style.display = "none";
                                    exp += Math.round(4000 * ((diff2 / 10) * diff) + 3);
                                    score += 5000;
                                    document.getElementById('score').innerHTML = score;
                                    BossEvent = false;
                                    gooditem();
                                    if (bosskilled > 2)
                                        bosskilled++;
                                    spawnValue = 10;
                                    document.documentElement.style.background = "lightgray";
                                    document.documentElement.style.color = "black";
                                    document.getElementById('exp').innerHTML = exp;
                                    ChaosGolem = null;
                                    for (i = 6; i < 24; i++) {
                                        if (Inventory[i] == 1) {
                                            Inventory[i] = 32;
                                            fixinventory(32, i);
                                            break;
                                        }

                                    }
                                }
                                else {
                                    ChaosGolem = null;
                                }
                            }
                            else {
                                var color;

                                if (ChaosGolem.hp >= (Bossmaxhealth / 2)) {
                                    color = "Purple";
                                }
                                if (ChaosGolem.hp <= (Bossmaxhealth / 2)) {
                                    color = "Yellow";
                                }
                                if (ChaosGolem.hp <= (Bossmaxhealth / 4)) {
                                    color = "rgb(171, 80, 5)";
                                    ChaosGolem.speedX *= 1.1;
                                }
                                if (ChaosGolem.hp <= (Bossmaxhealth / 10)) {
                                    color = "rgb(69, 5, 0)";
                                    if (!finalbossactive) {
                                        ChaosGolem.speedX *= 2.5;
                                    }
                                }

                                document.getElementById('BossHealthBox').style.background = color;
                            } if (ChaosGolem != null) {
                                document.getElementById('BossHealth').innerHTML = ChaosGolem.hp;
                                document.getElementById('BossHealthBox').style.width = (Math.round(ChaosGolem.hp * 1000) / 1000 * (1200 / Bossmaxhealth)) + "px";
                            }
                            else
                                document.getElementById('BossHealthContainer').style.display = "none";
                        }
                    }
                }
            }



            if (finalbossactive) {

                if (leftorright[0] == 1) {

                    if (player.x > (TheFinalBoss.x) && player.x < (TheFinalBoss.x + 220)) {
                        if (player.y > (TheFinalBoss.y + 50 - (reachy)) && player.y < ((TheFinalBoss.y + 200) + reachy)) {

                            TheFinalBoss.hp -= player.dmg;
                            if (TheFinalBoss.hp <= 0) {
                                soundhit = true;

                                swordAudiohit.play();
                                document.getElementById('BossHealthContainer').style.display = "none";
                                exp += Math.round(4000 * ((diff2 / 10) * diff) + 3);
                                score += 5000;

                                document.getElementById('score').innerHTML = score;
                                BossEvent = false;
                                if (bosskilled > 2)
                                    bosskilled++;
                                spawnValue = 10;
                                document.documentElement.style.background = "lightgray";
                                document.documentElement.style.color = "black";
                                document.getElementById('exp').innerHTML = exp;
                                TheFinalBoss = null;

                            }
                            else {
                                var color;

                                if (TheFinalBoss.hp >= (Bossmaxhealth / 2)) {
                                    color = "Purple";
                                }
                                if (TheFinalBoss.hp <= (Bossmaxhealth / 2)) {
                                    color = "Yellow";
                                }
                                if (TheFinalBoss.hp <= (Bossmaxhealth / 4)) {
                                    color = "rgb(171, 80, 5)";

                                }
                                if (TheFinalBoss.hp <= (Bossmaxhealth / 10)) {
                                    color = "rgb(69, 5, 0)";

                                }

                                document.getElementById('BossHealthBox').style.background = color;
                            }
                            document.getElementById('BossHealth').innerHTML = TheFinalBoss.hp;
                            document.getElementById('BossHealthBox').style.width = (Math.round(TheFinalBoss.hp * 1000) / 1000 * (1200 / Bossmaxhealth)) + "px";
                        }

                    }
                }
                else if (leftorright[1] == 1) {
                    if (player.x > (TheFinalBoss.x + (reachx)) && player.x < (TheFinalBoss.x + 220)) {
                        if (player.y > (TheFinalBoss.y + 50 - (reachy)) && player.y < ((TheFinalBoss.y + 200) + reachy)) {
                            TheFinalBoss.hp -= player.dmg;
                            if (TheFinalBoss.hp <= 0) {
                                soundhit = true;

                                swordAudiohit.play();
                                document.getElementById('BossHealthContainer').style.display = "none";
                                exp += Math.round(40000 * ((diff2 / 10) * diff) + 3);
                                score += 50000;
                                document.getElementById('score').innerHTML = score;
                                BossEvent = false;
                                gooditem();
                                if (bosskilled > 2)
                                    bosskilled++;
                                spawnValue = 10;
                                document.documentElement.style.background = "lightgray";
                                document.documentElement.style.color = "black";
                                document.getElementById('exp').innerHTML = exp;
                                TheFinalBoss = null;

                            }
                            else {
                                var color;


                                if (TheFinalBoss.hp >= (Bossmaxhealth / 2)) {
                                    color = "Purple";
                                }
                                if (TheFinalBoss.hp <= (Bossmaxhealth / 2)) {
                                    color = "Yellow";
                                }
                                if (TheFinalBoss.hp <= (Bossmaxhealth / 4)) {
                                    color = "rgb(171, 80, 5)";

                                }
                                if (TheFinalBoss.hp <= (Bossmaxhealth / 10)) {
                                    color = "rgb(69, 5, 0)";

                                }
                                document.getElementById('BossHealthBox').style.background = color;
                            }
                            document.getElementById('BossHealth').innerHTML = TheFinalBoss.hp;
                            document.getElementById('BossHealthBox').style.width = (Math.round(TheFinalBoss.hp * 1000) / 1000 * (1200 / Bossmaxhealth)) + "px";

                        }
                    }
                }
            }

        }

    </script>
    <script>//Player
        function abilityOne() {




        }
        function knockbackstrengthadd() {
            if (knockbacklvl < 10) {
                if (exp >= knockbackexpreq) {
                    exp -= knockbackexpreq;
                    knockbackexpreq *= 1.3;

                    knockbackexpreq = Math.round(knockbackexpreq);

                    knockbacklvl++;
                    knockbackstrength += 0.1
                    document.getElementById('Knockspan').innerHTML = knockbacklvl;
                    document.getElementById('exp').innerHTML = exp;
                    document.getElementById('Knocklbl').innerHTML = knockbackexpreq;

                }
            }
        }
        function reach() {

            if (reachlvl < 200) {
                if (exp >= reachexpreq) {
                    exp -= reachexpreq;
                    reachx += 4;
                    reachy += Math.round(4 * 0.71);
                    reachexpreq *= 2.3;
                    reachexpreq = Math.round(reachexpreq);

                    reachlvl++;
                    document.getElementById('reachspan').innerHTML = reachlvl;
                    document.getElementById('exp').innerHTML = exp;
                    document.getElementById('reachlbl').innerHTML = reachexpreq;
                }

            }
        }
        function speed() {
            if (speedlvl < 50) {
                if (exp >= speedexpreq) {
                    playerspeed += 0.1;
                    exp -= speedexpreq;

                    speedexpreq *= 1.25;
                    speedexpreq = Math.round(speedexpreq);
                    speedlvl++;

                    document.getElementById('speedspan').innerHTML = speedlvl;
                    document.getElementById('exp').innerHTML = exp;
                    document.getElementById('speedlbl').innerHTML = speedexpreq;
                }
            }
        }
        function Attack() {
            attacknow = 1;
            if (combocoldown === false) {
                combos++
            }

            setTimeout(function () {
                attacknow = 0;
                rightnum = 0;
                leftnum = 0;
                attacknum = 0;
                CheckFiendDetah();
                <!-- test(); -->
            }, 500);

            if (soundhit === false) {
                switch (combos) {
                    case 1:
                        swordAudiofast.volume = sfxlvl * masterlvl;
                        swordAudiofast.play();
                        break;
                    case 2:
                        swordAudiofast.play();
                        break;
                    case 3:
                        swordAudioslow.play();
                        break;
                    case 4:
                        swordAudiofast.play();
                        break;

                }
            }
            if (combos == 4) {
                combos = 0;

                combocoldown = true;
                setTimeout(function () {
                    combocoldown = false;

                }, 1000);
            }
        }

        function Checkobs() {

            if (player.x < 2) {
                player.speedX = 0;
                lefthit = true;
                player.x = 3;
            }
            if (player.x > 1169) {
                player.x = 1168;
                player.speedX = 0;
                righthit = true;
            }
            if (player.y < 3) {
                player.y = 4;
                player.speedY = 0;
                tophit = true;
            }
            if (player.y > 670) {
                player.speedY = 0;
                bottomhit = true;
                player.y = 669;
            }
            if (player.y < 675) {
                bottomhit = false;

            }
            if (player.y > 8) {
                tophit = false;

            }
            if (player.x > 7) {

                lefthit = false;

            }
            if (player.x < 1174) {

                righthit = false;

            }
        }

        function playerknockback(knockY, knockX) {
            playerknockbackbool = true;
            player.speedX = ((knockX * diff2) / 2) / knockbackres;
            player.speedY = ((knockY * diff2) / 2) / knockbackres;
            console.log(player.speedX, player.speedY);
            setTimeout(function () { player.speedX = 0; player.speedY = 0; playerknockbackbool = false; }, ((100 * (diff2 / 12))) / stunres);

        }
        function playerknockback2(knockY, knockX) {
            playerknockbackbool = true;
            player.speedX = knockX;
            player.speedY = knockY;
            setTimeout(function () { player.speedX = 0; player.speedY = 0; playerknockbackbool = false; }, 2000);

        }

    </script>
    <script>//GameArea and general
        function fixinventory(img, index) {
            if (index > 25) { }
            else {
                if (index < 22) {
                    if (img == 35) {
                        img = 1;
                        Inventory[index] = 1;
                    }
                }
            }

            switch (index) {
                case 0:
                    document.getElementById('InventorySlot1').style.background = 'url(inventory/' + img + '.jpg)';

                    break;
                case 1:
                    document.getElementById('InventorySlot2').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 2:
                    document.getElementById('InventorySlot3').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 3:
                    document.getElementById('InventorySlot4').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 4:
                    document.getElementById('InventorySlot5').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 5:
                    document.getElementById('InventorySlot6').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 6:
                    document.getElementById('InventorySlot7').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 7:
                    document.getElementById('InventorySlot8').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 8:
                    document.getElementById('InventorySlot9').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 9:
                    document.getElementById('InventorySlot10').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 10:
                    document.getElementById('InventorySlot11').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 11:
                    document.getElementById('InventorySlot12').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 12:
                    document.getElementById('InventorySlot13').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 13:
                    document.getElementById('InventorySlot14').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 14:
                    document.getElementById('InventorySlot15').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 15:
                    document.getElementById('InventorySlot16').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 16:
                    document.getElementById('InventorySlot17').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 17:
                    document.getElementById('InventorySlot18').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 18:
                    document.getElementById('InventorySlot19').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 19:
                    document.getElementById('InventorySlot20').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 20:
                    document.getElementById('InventorySlot21').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 21:
                    document.getElementById('InventorySlot22').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 22:
                    if (img == 1) {
                        img = 35;
                        Inventory[22] = 35

                    }

                    document.getElementById('InventorySlot23').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 23:
                    if (img == 1) {
                        img = 35;
                        Inventory[23] = 35

                    }

                    document.getElementById('InventorySlot24').style.background = 'url(inventory/' + img + '.jpg)';
                    break;
                case 24:
                    if (img == 1) {
                        img = 35;
                        Inventory[24] = 35

                    }
                    document.getElementById('InventorySlot25').style.background = 'url(inventory/' + img + '.jpg)';
                    break;






            }




        }
        function over(slot) {
            switch (slot) {
                case 1:
                    if (Darkness >= 20000 * ArmourLvl[0]) {
                        fixinventory(0, 0);
                        var cost = 20000 * ArmourLvl[0];
                        document.getElementById('Cost').innerHTML = cost + " Darkness";
                        document.getElementById('InventorySlot1').title = " Increase the control of chaos";
                    }
                    break;
                case 2:
                    if (ArmourLvl[1] < 4) {
                        fixinventory(0, 1);
                        var cost = 200 * ArmourLvl[1];
                        document.getElementById('Cost').innerHTML = cost;
                    }
                    break;
                case 3:
                    if (ArmourLvl[2] < 5) {
                        fixinventory(0, 2);
                        var cost = 600 * ArmourLvl[2];
                        document.getElementById('Cost').innerHTML = cost;
                    }
                    break;
                case 4:
                    if (ArmourLvl[3] < 3) {
                        fixinventory(0, 3);
                        var cost = 400 * ArmourLvl[3];
                        document.getElementById('Cost').innerHTML = cost;
                    }
                    break;
                case 5:
                    if (ArmourLvl[4] < 3) {
                        fixinventory(0, 4);
                        var cost = 250 * ArmourLvl[4];
                        document.getElementById('Cost').innerHTML = cost;
                    }
                    break;
                case 6:
                    if (ArmourLvl[5] < 6) {
                        fixinventory(0, 5);
                        var cost = 1000 * ArmourLvl[5];
                        document.getElementById('Cost').innerHTML = cost;
                    }
                    break;
                case 7:
                    document.getElementById('InventorySlot7').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[6]] != null)
                        document.getElementById('InventorySlot7').title = InventoryDesc[Inventory[6]];
                    else
                        document.getElementById('InventorySlot7').title = "";
                    break;
                case 8:
                    document.getElementById('InventorySlot8').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[7]] != null)
                        document.getElementById('InventorySlot8').title = InventoryDesc[Inventory[7]];
                    else
                        document.getElementById('InventorySlot8').title = "";
                    break;
                case 9:
                    document.getElementById('InventorySlot9').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[8]] != null)
                        document.getElementById('InventorySlot9').title = InventoryDesc[Inventory[8]];
                    else
                        document.getElementById('InventorySlot9').title = "";
                    break;
                case 10:
                    document.getElementById('InventorySlot10').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[9]] != null)
                        document.getElementById('InventorySlot10').title = InventoryDesc[Inventory[9]];
                    else
                        document.getElementById('InventorySlot10').title = "";
                    break;
                case 11:
                    document.getElementById('InventorySlot11').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[10]] != null)
                        document.getElementById('InventorySlot11').title = InventoryDesc[Inventory[10]];
                    else
                        document.getElementById('InventorySlot11').title = "";
                    break;
                case 12:
                    document.getElementById('InventorySlot12').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[11]] != null)
                        document.getElementById('InventorySlot12').title = InventoryDesc[Inventory[11]];
                    else
                        document.getElementById('InventorySlot12').title = "";
                    break;
                case 13:
                    document.getElementById('InventorySlot13').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[12]] != null)
                        document.getElementById('InventorySlot13').title = InventoryDesc[Inventory[12]];
                    else
                        document.getElementById('InventorySlot13').title = "";
                    break;
                case 14:
                    document.getElementById('InventorySlot14').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[13]] != null)
                        document.getElementById('InventorySlot14').title = InventoryDesc[Inventory[13]];
                    else
                        document.getElementById('InventorySlot14').title = "";
                    break;
                case 15:
                    document.getElementById('InventorySlot15').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[14]] != null)
                        document.getElementById('InventorySlot15').title = InventoryDesc[Inventory[14]];
                    else
                        document.getElementById('InventorySlot15').title = "";
                    break;
                case 16:
                    document.getElementById('InventorySlot16').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[15]] != null)
                        document.getElementById('InventorySlot16').title = InventoryDesc[Inventory[15]];
                    else
                        document.getElementById('InventorySlot16').title = "";
                    break;
                case 17:
                    document.getElementById('InventorySlot17').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[16]] != null)
                        document.getElementById('InventorySlot17').title = InventoryDesc[Inventory[16]];
                    else
                        document.getElementById('InventorySlot17').title = "";
                    break;
                case 18:
                    document.getElementById('InventorySlot18').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[17]] != null)
                        document.getElementById('InventorySlot18').title = InventoryDesc[Inventory[17]];
                    else
                        document.getElementById('InventorySlot18').title = "";
                    break;
                case 19:
                    document.getElementById('InventorySlot19').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[18]] != null)
                        document.getElementById('InventorySlot19').title = InventoryDesc[Inventory[18]];
                    else
                        document.getElementById('InventorySlot19').title = "";
                    break;
                case 20:
                    document.getElementById('InventorySlot20').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[19]] != null)
                        document.getElementById('InventorySlot20').title = InventoryDesc[Inventory[19]];
                    else
                        document.getElementById('InventorySlot20').title = "";
                    break;
                case 21:
                    document.getElementById('InventorySlot21').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[20]] != null)
                        document.getElementById('InventorySlot21').title = InventoryDesc[Inventory[20]];
                    else
                        document.getElementById('InventorySlot21').title = "";
                    break;
                case 22:
                    document.getElementById('InventorySlot22').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[21]] != null)
                        document.getElementById('InventorySlot22').title = InventoryDesc[Inventory[21]];
                    else
                        document.getElementById('InventorySlot22').title = "";
                    break;
                case 23:
                    document.getElementById('InventorySlot23').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[22]] != null)
                        document.getElementById('InventorySlot23').title = InventoryDesc[Inventory[22]];
                    else
                        document.getElementById('InventorySlot23').title = "Accessory slot";
                    break;
                case 24:
                    document.getElementById('InventorySlot24').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[23]] != null)
                        document.getElementById('InventorySlot24').title = InventoryDesc[Inventory[23]];
                    else
                        document.getElementById('InventorySlot24').title = "Accessory slot";
                    break;
                case 25:
                    document.getElementById('InventorySlot25').style.boxShadow = "2px 1px 16px 1px";
                    if (InventoryDesc[Inventory[24]] != null)
                        document.getElementById('InventorySlot25').title = InventoryDesc[Inventory[24]];
                    else
                        document.getElementById('InventorySlot25').title = "Accessory slot";
                    break;


            }
        }
        function out(slot) {
            switch (slot) {
                case 1:
                    fixinventory(Inventory[0], 0);
                    break;
                case 2:
                    fixinventory(Inventory[1], 1);
                    break;
                case 3:
                    fixinventory(Inventory[2], 2);
                    break;
                case 4:
                    fixinventory(Inventory[3], 3);
                    break;
                case 5:
                    fixinventory(Inventory[4], 4);
                    break;
                case 6:
                    fixinventory(Inventory[5], 5);
                    break;
                case 7:
                    document.getElementById('InventorySlot7').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 8:
                    document.getElementById('InventorySlot8').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 9:
                    document.getElementById('InventorySlot9').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 10:
                    document.getElementById('InventorySlot10').style.boxShadow = "0px 0px 0px 0px";
                    break;
                case 11:
                    document.getElementById('InventorySlot11').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 12:
                    document.getElementById('InventorySlot12').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 13:
                    document.getElementById('InventorySlot13').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 14:
                    document.getElementById('InventorySlot14').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 15:
                    document.getElementById('InventorySlot15').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 16:
                    document.getElementById('InventorySlot16').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 17:
                    document.getElementById('InventorySlot17').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 18:
                    document.getElementById('InventorySlot18').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 19:
                    document.getElementById('InventorySlot19').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 20:
                    document.getElementById('InventorySlot20').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 21:
                    document.getElementById('InventorySlot21').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 22:
                    document.getElementById('InventorySlot22').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 23:
                    document.getElementById('InventorySlot23').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 24:
                    document.getElementById('InventorySlot24').style.boxShadow = "0px 0px 0px 0px";

                    break;
                case 25:
                    document.getElementById('InventorySlot25').style.boxShadow = "0px 0px 0px 0px";

                    break;






            }


            document.getElementById('Cost').innerHTML = "";
        }
        function upgrade(slot) {

            switch (slot) {
                case 1:
                    if (Darkness >= 20000 * ArmourLvl[0]) {
                        if (ArmourLvl[0] < 4) {
                            Darkness -= 20000 * ArmourLvl[0];



                            switch (ArmourLvl[0]) {
                                case 1:
                                    Inventory[0] = 9;
                                    bosskilled++;
                                    LifeDrainSpeedfix();
                                    document.getElementById('InventorySlot1').title = "You are imbued with immense power";
                                    document.getElementById('Shieldcontainer').style.display = "block";
                                    document.getElementById('inventorycontainer').style.marginTop = "-75px";
                                    document.getElementById('Stat').style.marginTop = "-1.825%";
                                    break;
                                case 2:
                                    Inventory[0] = 10;
                                    document.getElementById('InventorySlot1').title = "You have been toched by chaos";
                                    LifeDrainSpeedfix();
                                    bosskilled++;
                                    break;
                                case 3:
                                    Inventory[0] = 11;
                                    document.getElementById('InventorySlot1').title = "You control chaos";
                                    LifeDrainSpeedfix();
                                    bosskilled++;
                                    break;

                            }
                            ArmourLvl[0]++;
                            fixinventory(Inventory[0], 0);
                        }
                    }
                    break;
                case 2:
                    if (Gold >= 200 * ArmourLvl[1]) {
                        if (ArmourLvl[1] < 4) {
                            Gold -= 200 * ArmourLvl[1];
                            document.getElementById('CurrentGold').innerHTML = Gold;


                            switch (ArmourLvl[1]) {
                                case 1:
                                    Inventory[1] = 6;
                                    playerhealth += 3;
                                    lives += 3;
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot2').title = "Helmet: 4 Max health";
                                    playerstunres += 0.2;
                                    break;
                                case 2:
                                    Inventory[1] = 7;
                                    playerhealth += 1;
                                    lives += 1;
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot2').title = "Helmet: 5 Max health";
                                    playerstunres += 0.4;
                                    break;
                                case 3:
                                    Inventory[1] = 8;
                                    playerhealth += 3;
                                    lives += 3;
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot2').title = "Helmet: 8 Max health";
                                    playerstunres += 1.2;
                                    break;

                            }
                            ArmourLvl[1]++;
                            fixinventory(Inventory[1], 1);
                        }
                    }
                    break;
                case 3:
                    if (Gold >= 600 * ArmourLvl[2]) {
                        if (ArmourLvl[2] < 5) {
                            Gold -= 600 * ArmourLvl[2];
                            document.getElementById('CurrentGold').innerHTML = Gold;


                            switch (ArmourLvl[2]) {
                                case 1:
                                    Inventory[2] = 12;
                                    playerhealth += 2;
                                    lives += 2;
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot3').title = "Chestplate: 6 Max health";
                                    playerstunres += 1;
                                    break;
                                case 2:
                                    Inventory[2] = 13;
                                    playerhealth += 4;
                                    lives += 4;
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot3').title = "Chestplate: 10 Max health";
                                    playerstunres += 1.5;
                                    break;
                                case 3:
                                    Inventory[2] = 14;
                                    playerhealth += 2;
                                    lives += 2;
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot3').title = "Chestplate: 12 Max health";
                                    playerstunres += 1.5;
                                    break;
                                case 4:
                                    Inventory[2] = 15;
                                    playerhealth += 4;
                                    lives += 4;
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot3').title = "Chestplate: 16 Max health";
                                    playerstunres += 2;

                            }
                            ArmourLvl[2]++;
                            fixinventory(Inventory[2], 2);
                        }
                    }
                    break;
                case 4:
                    if (Gold >= 400 * ArmourLvl[3]) {
                        if (ArmourLvl[3] < 3) {
                            Gold -= 400 * ArmourLvl[3];
                            document.getElementById('CurrentGold').innerHTML = Gold;


                            switch (ArmourLvl[3]) {
                                case 1:
                                    Inventory[3] = 16;
                                    playerhealth += 2;
                                    lives += 2;
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot4').title = "Leggings: 4 Max health";
                                    playerknockbackres += 0.5;
                                    break;
                                case 2:
                                    Inventory[3] = 17;
                                    playerhealth += 2;
                                    lives += 2;
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot4').title = "Leggings: 6 Max health";
                                    playerknockbackres += 1.5;
                                    break;


                            }
                            ArmourLvl[3]++;
                            fixinventory(Inventory[3], 3);
                        }
                    }
                    break;
                case 5:
                    if (Gold >= 250 * ArmourLvl[4]) {
                        if (ArmourLvl[4] < 3) {
                            Gold -= 250 * ArmourLvl[4];
                            document.getElementById('CurrentGold').innerHTML = Gold;


                            switch (ArmourLvl[4]) {
                                case 1:
                                    Inventory[4] = 18;
                                    playerhealth += 2;
                                    lives += 2;
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot5').title = "Boots: 2 Max health";
                                    playerknockbackres += 1;
                                    break;
                                case 2:
                                    Inventory[4] = 19;
                                    playerhealth += 2;
                                    lives += 2
                                    document.getElementById('maxHP').innerHTML = maxhealth;
                                    document.getElementById('lives').innerHTML = lives;
                                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                                    document.getElementById('InventorySlot5').title = "Boots: 4 Max health";
                                    playerknockbackres += 2;
                                    break;


                            }
                            ArmourLvl[4]++;
                            fixinventory(Inventory[4], 4);
                        }
                    }
                    break;
                case 6:
                    if (Gold >= 1000 * ArmourLvl[5]) {
                        if (ArmourLvl[5] < 6) {
                            Gold -= 1000 * ArmourLvl[5];
                            document.getElementById('CurrentGold').innerHTML = Gold;


                            switch (ArmourLvl[5]) {
                                case 1:
                                    Inventory[5] = 20;
                                    playerdmg += 1;
                                    document.getElementById('InventorySlot6').title = "Sword: 2 Damage";
                                    break;
                                case 2:
                                    Inventory[5] = 21;
                                    playerdmg += 1;
                                    document.getElementById('InventorySlot6').title = "Sword: 3 Damage";
                                    break;
                                case 3:
                                    Inventory[5] = 22;
                                    playerdmg += 2;
                                    document.getElementById('InventorySlot6').title = "Sword: 5 Damage";
                                    break;
                                case 4:
                                    Inventory[5] = 23;
                                    playerdmg += 5;
                                    document.getElementById('InventorySlot6').title = "Sword: 10 Damage";
                                    break;
                                case 5:
                                    Inventory[5] = 24;
                                    playerdmg += 10;
                                    document.getElementById('InventorySlot6').title = "Sword: 20 Damage";
                                    break;
                            }
                            ArmourLvl[5]++;
                            fixinventory(Inventory[5], 5);
                        }
                    }
                    break;



            }
            GivePlayerBonuses();
        }
        function InventorySwitch(slot) {
            slot = slot + 5;
            if (Invenoryusebool) {
                if (InventoryChosen == null) {
                    if (Inventory[slot] != 35) {
                        InventoryChosen = slot;
                        Inventorytmp = slot;
                        document.getElementById('InventorySlot' + (slot + 1)).style.background = "url(inventory/25.jpg)";
                        InventoryChosenReset = setTimeout(function () { InventoryChosen = null; fixinventory(Inventory[Inventorytmp], Inventorytmp); }, 5000);
                    }
                }
                else {
                    if (Inventory[slot] < 34 || Inventory[slot] > 46) {
                        clearInterval(InventoryChosenReset);
                        var tmp = Inventory[slot];
                        Inventory[slot] = Inventory[InventoryChosen];
                        Inventory[InventoryChosen] = tmp;
                        fixinventory(Inventory[slot], slot);
                        fixinventory(Inventory[InventoryChosen], InventoryChosen);
                        InventoryChosen = null;

                    }
                    else {
                        if (Inventory[InventoryChosen] > 35 && Inventory[InventoryChosen] < 47) {
                            clearInterval(InventoryChosenReset);
                            var tmp = Inventory[slot];
                            Inventory[slot] = Inventory[InventoryChosen];
                            Inventory[InventoryChosen] = 35;
                            Inventory[InventoryChosen] = tmp;
                            fixinventory(Inventory[slot], slot);
                            fixinventory(Inventory[InventoryChosen], InventoryChosen);
                            InventoryChosen = null;
                            getBonus(slot);

                        }
                    }
                    getBonus(-1, true);

                }




            }

            else {

                switch (Inventory[slot]) {
                    case 26:
                        energy = 100;
                        Inventory[slot] = 1;
                        fixinventory(Inventory[slot], slot);
                        document.getElementById('energy').innerHTML = Math.round(energy);
                        document.getElementById('Energybox').style.width = (Math.round(energy * 1000) / 1000 * 6) + "px";
                        break;
                    case 27:
                        lives = maxhealth;
                        Inventory[slot] = 1;
                        fixinventory(Inventory[slot], slot);
                        document.getElementById('lives').innerHTML = lives;
                        document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                        break;
                    case 28:
                        Healtregenreset = 0;
                        Healthregen();
                        Inventory[slot] = 1;
                        fixinventory(Inventory[slot], slot);
                        break;
                    case 29:
                        Gold += 20;
                        for (i = 0; i < 3; i++) {

                            switch (i) {
                                case 0:
                                    if (Quest1 != null) {
                                        if (Quest1.type == 2) {

                                            Quest1.done++;
                                            if (Quest1.done == Quest1.amount) {
                                                document.getElementById('Quest1button').disabled = false;

                                            }
                                            if (Quest1.done > Quest1.amount)
                                                Quest1.done = Quest1.amount;
                                            document.getElementById('Quest1content').innerHTML = 'Sell ' + Quest1.done + '/' + Quest1.amount + '<br />' + ' Furs' + '<br />';
                                        }

                                    }
                                    break;
                                case 1:
                                    if (Quest2 != null) {
                                        if (Quest2.type == 2) {

                                            Quest2.done++;
                                            if (Quest2.done == Quest2.amount) {
                                                document.getElementById('Quest2button').disabled = false;

                                            }
                                            if (Quest2.done > Quest2.amount)
                                                Quest2.done = Quest2.amount;
                                            document.getElementById('Quest2content').innerHTML = 'Sell ' + Quest2.done + '/' + Quest2.amount + '<br />' + ' Furs' + '<br />';
                                        }

                                    }
                                    break;
                                case 2:
                                    if (Quest3 != null) {
                                        if (Quest3.type == 2) {

                                            Quest3.done++;
                                            if (Quest3.done == Quest3.amount) {
                                                document.getElementById('Quest3button').disabled = false;

                                            }
                                            if (Quest3.done > Quest3.amount)
                                                Quest3.done = Quest3.amount;
                                            document.getElementById('Quest3content').innerHTML = 'Sell ' + Quest3.done + '/' + Quest3.amount + '<br />' + ' Furs' + '<br />';
                                        }

                                    }
                                    break;

                            }

                        }

                        Inventory[slot] = 1;
                        fixinventory(Inventory[slot], slot);
                        document.getElementById('CurrentGold').innerHTML = Gold;

                        break;
                    case 30:
                        Gold += 25;
                        for (i = 0; i < 3; i++) {

                            switch (i) {
                                case 0:
                                    if (Quest1 != null) {
                                        if (Quest1.type == 4) {

                                            Quest1.done++;
                                            if (Quest1.done == Quest1.amount) {
                                                document.getElementById('Quest1button').disabled = false;

                                            }
                                            if (Quest1.done > Quest1.amount)
                                                Quest1.done = Quest1.amount;
                                            document.getElementById('Quest1content').innerHTML = 'Sell ' + Quest1.done + '/' + Quest1.amount + ' Crooked teeths';
                                        }

                                    }
                                    break;
                                case 1:
                                    if (Quest2 != null) {
                                        if (Quest2.type == 4) {

                                            Quest2.done++;
                                            if (Quest2.done == Quest2.amount) {
                                                document.getElementById('Quest2button').disabled = false;

                                            }
                                            if (Quest2.done > Quest2.amount)
                                                Quest2.done = Quest2.amount;
                                            document.getElementById('Quest2content').innerHTML = 'Sell ' + Quest2.done + '/' + Quest2.amount + ' Crooked teeths';
                                        }

                                    }
                                    break;
                                case 2:
                                    if (Quest3 != null) {
                                        if (Quest3.type == 4) {

                                            Quest3.done++;
                                            if (Quest3.done == Quest3.amount) {
                                                document.getElementById('Quest3button').disabled = false;

                                            }
                                            if (Quest3.done > Quest3.amount)
                                                Quest3.done = Quest3.amount;
                                            document.getElementById('Quest3content').innerHTML = 'Sell ' + Quest3.done + '/' + Quest3.amount + ' Crooked teeths';
                                        }

                                    }
                                    break;

                            }

                        }

                        Inventory[slot] = 1;
                        fixinventory(Inventory[slot], slot);
                        document.getElementById('CurrentGold').innerHTML = Gold;
                        break;
                    case 31:
                        Gold += 120;
                        Inventory[slot] = 1;
                        fixinventory(Inventory[slot], slot);
                        document.getElementById('CurrentGold').innerHTML = Gold;
                        break;
                    case 32:

                        Darkness += 20000;
                        Inventory[slot] = 1;
                        fixinventory(Inventory[slot], slot);
                        LifeDrainSpeedfix();
                        break;
                    case 33:
                        GetQuest();
                        Inventory[slot] = 1;
                        fixinventory(Inventory[slot], slot);
                        break;
                    case 34:
                        var trher = 1;
                        GetQuest(trher);
                        Inventory[slot] = 1;
                        fixinventory(Inventory[slot], slot);
                        break;
                    case 36:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 36;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/36.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/36.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/36.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 37:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 37;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/37.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/37.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/37.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 38:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 38;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/38.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/38.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/38.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 39:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 39;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/39.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/39.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/39.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 40:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 40;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/40.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/40.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/40.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 41:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 41;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/41.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/41.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/41.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 42:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 42;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/42.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/42.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/42.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 43:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 43;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/43.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/43.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/43.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 44:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 44;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/44.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/44.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/44.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 45:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 45;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/45.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/45.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/45.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 46:
                        for (n = 0; n < 3; n++) {
                            var s;
                            if (auctionInUse[n] == 0) {
                                s = n;
                                break;
                            }
                        }
                        if (s != null) {

                            auctionInUse[s] = 46;
                            Inventory[slot] = 1;
                            fixinventory(Inventory[slot], slot);
                            switch (s) {
                                case 0:
                                    document.getElementById('auctionSlot1').style.background = 'url(inventory/46.jpg)';
                                    document.getElementById('auctionSlot1Text').innerHTML = "Looking for biders";
                                    auctionSlot1Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                                auctionInUse[0] = 0;

                                                clearInterval(auctionSlot1Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 1:
                                    document.getElementById('auctionSlot2').style.background = 'url(inventory/46.jpg)';
                                    document.getElementById('auctionSlot2Text').innerHTML = "Looking for biders";

                                    auctionSlot2Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                                auctionInUse[1] = 0;

                                                clearInterval(auctionSlot2Timer);

                                            }

                                        }
                                    }, 400);
                                    break;
                                case 2:
                                    document.getElementById('auctionSlot3').style.background = 'url(inventory/46.jpg)';
                                    document.getElementById('auctionSlot3Text').innerHTML = "Looking for biders";
                                    auctionSlot3Timer = setInterval(function () {
                                        if (!pauseineffect) {
                                            var r = Math.round(Math.random() * 100);

                                            if (r == 50) {
                                                var r2 = Math.round((Math.round(Math.random() * 1000)) / 4);
                                                Gold += r2;
                                                document.getElementById('CurrentGold').innerHTML = Gold;
                                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                                auctionInUse[2] = 0;

                                                clearInterval(auctionSlot3Timer);

                                            }

                                        }
                                    }, 400);
                                    break;


                            }
                        }


                        break;
                    case 49:
                        FinalBoss();
                        Inventory[slot] = 1;
                        fixinventory(Inventory[slot], slot);
                        break;














                }





            }



        }
        function returnItem(s) {

            switch (s) {
                case 1:
                    if (auctionInUse[0] != 0) {
                        for (i = 6; i < 24; i++) {

                            if (Inventory[i] == 1) {

                                Inventory[i] = auctionInUse[0];
                                auctionInUse[0] = 0;
                                clearInterval(auctionSlot1Timer);
                                document.getElementById('auctionSlot1').style.background = 'url(inventory/1.jpg)';
                                document.getElementById('auctionSlot1Text').innerHTML = "Open!";
                                fixinventory(Inventory[i], i);
                                break;
                            }
                        }
                    }



                    break;
                case 2:
                    if (auctionInUse[1] != 0) {
                        for (i = 6; i < 24; i++) {


                            if (Inventory[i] == 1) {

                                Inventory[i] = auctionInUse[1];
                                auctionInUse[1] = 0;
                                clearInterval(auctionSlot2Timer);
                                document.getElementById('auctionSlot2').style.background = 'url(inventory/1.jpg)';
                                document.getElementById('auctionSlot2Text').innerHTML = "Open!";
                                fixinventory(Inventory[i], i);
                                break;
                            }
                        }
                    }

                    break;
                case 3:
                    if (auctionInUse[2] != 0) {
                        for (i = 6; i < 24; i++) {

                            if (Inventory[i] == 1) {

                                Inventory[i] = auctionInUse[2];
                                auctionInUse[2] = 0;
                                clearInterval(auctionSlot3Timer);
                                document.getElementById('auctionSlot3').style.background = 'url(inventory/1.jpg)';
                                document.getElementById('auctionSlot3Text').innerHTML = "Open!";
                                fixinventory(Inventory[i], i);
                                break;
                            }
                        }
                    }

                    break;



            }



        }
        function Quest(type, amount, reward, special) {
            this.type = type;
            this.amount = amount;
            this.reward = reward;
            this.special = special;
            this.done = 0;

        }
        function GetQuest(c) {
            if (c == 1) {
                var amount2;
                var reward2;
                var type2;
                var r = Math.round(Math.random() * 100);
                var r2 = Math.round(Math.random() * 10);




                amount2 = Math.round(r / 5);


                switch (r2) {
                    case 1: case 5:
                        var r3 = Math.round(Math.random() * 10) / 5;
                        if (r3 < 1)
                            r3 = 1;
                        reward2 = r3;
                        type2 = "damage";
                        break;
                    case 2: case 6: case 9: case 10:
                        var r3 = Math.round(Math.random() * 4000);
                        reward2 = r3 + (amount2 * 10);
                        type2 = "darkness";
                        break;
                    case 3: case 7:
                        var r3 = Math.round(Math.random() * 2000);
                        reward2 = r3 + (amount2 * 2);
                        type2 = "gold";
                        break;
                    case 4: case 8:
                        var r3 = Math.round(Math.random() * 10);
                        reward2 = r3;
                        type2 = "item";
                        break;



                }
                if (Quest4 == null) {
                    Quest4 = new Quest(type2, amount2, reward2);
                    document.getElementById('Questspecialcontent').innerHTML = 'Kill 0/' + amount2 + ' Golems' + '<br>';
                    switch (type2) {
                        case "damage":
                            document.getElementById('Questspecialreward').innerHTML = reward2 + ' Damage';
                            break;
                        case "darkness":
                            document.getElementById('Questspecialreward').innerHTML = reward2 + ' Darkness';
                            break;
                        case "gold":
                            document.getElementById('Questspecialreward').innerHTML = reward2 + ' Gold';
                            break;
                        case "item":
                            document.getElementById('Questspecialreward').innerHTML = '1 item';
                            break;
                    }
                }
            }
            else {
                var type;
                var amount;
                var reward;
                type = Math.round(Math.random() * 100);
                if (type < 25)
                    type = 1;
                else if (type >= 25 && type < 50)
                    type = 2;
                else if (type >= 50 && type < 75)
                    type = 3;
                else
                    type = 4
                switch (type) {
                    case 1:
                        amount = Math.round(Math.random() * 10 + 1);
                        reward = Math.round(Math.random() * 150);

                        break;
                    case 2:
                        amount = Math.round(Math.random() * 8 + 1);
                        reward = Math.round(Math.random() * 180);

                        break;
                    case 3:
                        amount = Math.round(Math.random() * 5 + 1);
                        reward = Math.round(Math.random() * 270);

                        break;
                    case 4:
                        amount = Math.round(Math.random() * 10 + 1);
                        reward = Math.round(Math.random() * 300);

                        break;

                }
                if (Quest1 == null) {
                    Quest1 = new Quest(type, amount, reward);
                    switch (type) {
                        case 1:
                            document.getElementById('Quest1content').innerHTML = 'Kill 0/' + amount + ' Wolfs' + '<br />';
                            document.getElementById('Quest1reward').innerHTML = reward + ' Gold';
                            document.getElementById('for1').innerHTML = 'For';
                            break;
                        case 2:
                            document.getElementById('Quest1content').innerHTML = 'Sell 0/' + amount + '<br />' + ' Furs' + '<br />';
                            document.getElementById('Quest1reward').innerHTML = reward + ' Gold';
                            document.getElementById('for1').innerHTML = 'For';
                            break;
                        case 3:
                            document.getElementById('Quest1content').innerHTML = 'Kill 0/' + amount + ' Witches' + '<br />';
                            document.getElementById('Quest1reward').innerHTML = reward + ' Gold';
                            document.getElementById('for1').innerHTML = 'For';
                            break;
                        case 4:
                            document.getElementById('Quest1content').innerHTML = 'Sell 0/' + amount + ' Crooked teeths';
                            document.getElementById('Quest1reward').innerHTML = reward + ' Gold';
                            document.getElementById('for1').innerHTML = 'For';
                            break;
                    }
                }
                else if (Quest2 == null) {
                    Quest2 = new Quest(type, amount, reward);
                    switch (type) {
                        case 1:
                            document.getElementById('Quest2content').innerHTML = 'Kill 0/' + amount + ' Wolfs' + '<br />';
                            document.getElementById('Quest2reward').innerHTML = reward + ' Gold';
                            document.getElementById('for2').innerHTML = 'For';
                            break;
                        case 2:
                            document.getElementById('Quest2content').innerHTML = 'Sell 0/' + amount + ' Furs' + '<br />';
                            document.getElementById('Quest2reward').innerHTML = reward + ' Gold';
                            document.getElementById('for2').innerHTML = 'For';
                            break;
                        case 3:
                            document.getElementById('Quest2content').innerHTML = 'Kill 0/' + amount + ' Witches' + '<br />';
                            document.getElementById('Quest2reward').innerHTML = reward + ' Gold';
                            document.getElementById('for2').innerHTML = 'For';
                            break;
                        case 4:
                            document.getElementById('Quest2content').innerHTML = 'Sell 0/' + amount + ' Crooked teeths';
                            document.getElementById('Quest2reward').innerHTML = reward + ' Gold';
                            document.getElementById('for2').innerHTML = 'For';
                            break;
                    }
                }
                else if (Quest3 == null) {
                    Quest3 = new Quest(type, amount, reward);
                    switch (type) {
                        case 1:
                            document.getElementById('Quest3content').innerHTML = 'Kill 0/' + amount + ' Wolfs' + '<br />';
                            document.getElementById('Quest3reward').innerHTML = reward + ' Gold';
                            document.getElementById('for3').innerHTML = 'For';
                            break;
                        case 2:
                            document.getElementById('Quest3content').innerHTML = 'Sell 0/' + amount + ' Furs' + '<br />';
                            document.getElementById('Quest3reward').innerHTML = reward + ' Gold';
                            document.getElementById('for3').innerHTML = 'For';
                            break;
                        case 3:
                            document.getElementById('Quest3content').innerHTML = 'Kill 0/' + amount + ' Witches' + '<br />';
                            document.getElementById('Quest3reward').innerHTML = reward + ' Gold';
                            document.getElementById('for3').innerHTML = 'For';
                            break;
                        case 4:
                            document.getElementById('Quest3content').innerHTML = 'Sell 0/' + amount + ' Crooked teeths';
                            document.getElementById('Quest3reward').innerHTML = reward + ' Gold';
                            document.getElementById('for3').innerHTML = 'For';
                            break;
                    }


                }
            }
        }
        function ChaosGolemShake() {


            document.body.style.animation = "shake 0.75s";
            document.body.style.webkitAnimation = "shake 0.75s";
            setTimeout(function () {
                document.body.style.animation = "";
                document.body.style.webkitAnimation = "";
            }, 750);

        }
        function CompleteQuest(which) {
            switch (which) {
                case 1:
                    Gold += Quest1.reward;
                    document.getElementById('CurrentGold').innerHTML = Gold;
                    Quest1 = null;
                    document.getElementById('Quest1content').innerHTML = '';
                    document.getElementById('Quest1reward').innerHTML = '';
                    document.getElementById('for1').innerHTML = '';
                    document.getElementById('Quest1button').disabled = true;

                    break;
                case 2:
                    Gold += Quest2.reward;
                    Quest2 = null;
                    document.getElementById('CurrentGold').innerHTML = Gold;
                    document.getElementById('Quest2content').innerHTML = '';
                    document.getElementById('Quest2reward').innerHTML = '';
                    document.getElementById('for2').innerHTML = '';
                    document.getElementById('Quest2button').disabled = true;
                    break;
                case 3:
                    Gold += Quest3.reward;
                    Quest3 = null;
                    document.getElementById('CurrentGold').innerHTML = Gold;
                    document.getElementById('Quest3content').innerHTML = '';
                    document.getElementById('Quest3reward').innerHTML = '';
                    document.getElementById('for3').innerHTML = '';
                    document.getElementById('Quest3button').disabled = true;
                    break;
                case 4:
                    Gold += Quest4.reward;
                    Quest4 = null;
                    document.getElementById('CurrentGold').innerHTML = Gold;
                    document.getElementById('Questspecialcontent').innerHTML = '';
                    document.getElementById('Questspecialreward').innerHTML = '';
                    document.getElementById('for4').innerHTML = '';
                    document.getElementById('Quest4button').disabled = true;
                    break;
            }


        }
        function tooglequests() {

            if (document.getElementById('Questcontainer').style.display == "block") {
                document.getElementById('Questcontainer').style.display = "none";




            }
            else {
                document.getElementById('Questcontainer').style.display = "block";

            }


        }
        function toogleshop() {

            if (document.getElementById('shopcontainer').style.display == "block") {
                document.getElementById('shopcontainer').style.display = "none";




            }
            else {
                document.getElementById('shopcontainer').style.display = "block";

            }


        }
        function GivePlayerBonuses() {


            maxhealth = playerhealth + (bonuses[0].health + bonuses[1].health + bonuses[2].health);
            player.dmg = playerdmg + (bonuses[0].dmg + bonuses[1].dmg + bonuses[2].dmg);
            Eregen = Energyregen + (bonuses[0].energyregen + bonuses[1].energyregen + bonuses[2].energyregen);
            energymax = 100 + (bonuses[0].maxenergy + bonuses[1].maxenergy + bonuses[2].maxenergy);
            sprint = playerspeed + (bonuses[0].speed + bonuses[1].speed + bonuses[2].speed);
            knockbackres = playerknockbackres + (bonuses[0].knockbackres + bonuses[1].knockbackres + bonuses[2].knockbackres);
            stunresres = playerstunres + (bonuses[0].stunres + bonuses[1].stunres + bonuses[2].stunres);
            if (sprint < 1.5) {
                penalty = 1.4;
                sprint = 0;
            }
            else
                penalty = 0;
            if (player.dmg < 0)
                player.dmg = 0;
            if (maxhealth <= 0)
                maxhealth = 1;
            document.getElementById('maxHP').innerHTML = maxhealth;
            if (maxhealth < lives)
                lives = maxhealth;
            document.getElementById('lives').innerHTML = lives;
            document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";

        }
        function getBonus(x, bool) {
            var tmp = x


            var s = 0;

            switch (Inventory[22]) {
                case 36:
                    bonuses[s].health = -5;
                    bonuses[s].dmg = 5;
                    bonuses[s].maxenergy = 10;
                    bonuses[s].speed = 2;
                    bonuses[s].energyregen = -1;
                    break;
                case 37:
                    bonuses[s].health = 1;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = -10;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 4;
                    break;
                case 38:
                    bonuses[s].health = 2;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = 1;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 0;
                    break;
                case 39:
                    bonuses[s].health = 0;
                    bonuses[s].dmg = 1;
                    bonuses[s].maxenergy = 10;
                    bonuses[s].speed = 1;
                    bonuses[s].energyregen = 0;
                    break;
                case 40:
                    bonuses[s].health = 5;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = 0;
                    bonuses[s].speed = -0.5;
                    bonuses[s].energyregen = 0;
                    bonuses[s].knockbackres = 1;
                    bonuses[s].stunresres = 1;
                    break;
                case 41:
                    bonuses[s].health = -6;
                    bonuses[s].dmg = 6;
                    bonuses[s].maxenergy = -50;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 5;
                    break;
                case 42:
                    bonuses[s].health = 4;
                    bonuses[s].dmg = -1;
                    bonuses[s].maxenergy = 5;
                    bonuses[s].speed = 10;
                    bonuses[s].energyregen = -1;
                    break;
                case 43:
                    bonuses[s].health = 10;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = 0;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 0;
                    bonuses[s].knockbackres = 2;
                    bonuses[s].stunresres = 2;
                    break;
                case 44:
                    bonuses[s].health = 10;
                    bonuses[s].dmg = -5;
                    bonuses[s].maxenergy = 20;
                    bonuses[s].speed = 2;
                    bonuses[s].energyregen = 1;
                    break;
                case 45:
                    bonuses[s].health = 0;
                    bonuses[s].dmg = 6;
                    bonuses[s].maxenergy = 5;
                    bonuses[s].speed = -1;
                    bonuses[s].energyregen = 0;
                    break;
                case 46:
                    bonuses[s].health = -20;
                    bonuses[s].dmg = 20;
                    bonuses[s].maxenergy = -70;
                    bonuses[s].speed = -10;
                    bonuses[s].energyregen = 2;
                    break;

            }

            var s = 1
            switch (Inventory[23]) {
                case 36:
                    bonuses[s].health = -5;
                    bonuses[s].dmg = 5;
                    bonuses[s].maxenergy = 10;
                    bonuses[s].speed = 2;
                    bonuses[s].energyregen = -1;
                    break;
                case 37:
                    bonuses[s].health = 1;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = -10;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 4;
                    break;
                case 38:
                    bonuses[s].health = 2;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = 1;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 0;
                    break;
                case 39:
                    bonuses[s].health = 0;
                    bonuses[s].dmg = 1;
                    bonuses[s].maxenergy = 10;
                    bonuses[s].speed = 1;
                    bonuses[s].energyregen = 0;
                    break;
                case 40:
                    bonuses[s].health = 5;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = 0;
                    bonuses[s].speed = -0.5;
                    bonuses[s].energyregen = 0;
                    break;
                case 41:
                    bonuses[s].health = -6;
                    bonuses[s].dmg = 6;
                    bonuses[s].maxenergy = -50;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 5;
                    break;
                case 42:
                    bonuses[s].health = 4;
                    bonuses[s].dmg = -1;
                    bonuses[s].maxenergy = 5;
                    bonuses[s].speed = 10;
                    bonuses[s].energyregen = -1;
                    break;
                case 43:
                    bonuses[s].health = 10;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = 0;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 0;
                    break;
                case 44:
                    bonuses[s].health = 10;
                    bonuses[s].dmg = -5;
                    bonuses[s].maxenergy = 20;
                    bonuses[s].speed = 2;
                    bonuses[s].energyregen = 1;
                    break;
                case 45:
                    bonuses[s].health = 0;
                    bonuses[s].dmg = 6;
                    bonuses[s].maxenergy = 5;
                    bonuses[s].speed = -1;
                    bonuses[s].energyregen = 0;
                    break;
                case 46:
                    bonuses[s].health = -20;
                    bonuses[s].dmg = 20;
                    bonuses[s].maxenergy = -70;
                    bonuses[s].speed = -10;
                    bonuses[s].energyregen = 2;
                    break;

            }






            var s = 2;

            switch (Inventory[24]) {
                case 36:
                    bonuses[s].health = -5;
                    bonuses[s].dmg = 5;
                    bonuses[s].maxenergy = 10;
                    bonuses[s].speed = 2;
                    bonuses[s].energyregen = -1;
                    break;
                case 37:
                    bonuses[s].health = 1;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = -10;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 4;
                    break;
                case 38:
                    bonuses[s].health = 2;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = 1;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 0;
                    break;
                case 39:
                    bonuses[s].health = 0;
                    bonuses[s].dmg = 1;
                    bonuses[s].maxenergy = 10;
                    bonuses[s].speed = 1;
                    bonuses[s].energyregen = 0;
                    break;
                case 40:
                    bonuses[s].health = 5;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = 0;
                    bonuses[s].speed = -0.5;
                    bonuses[s].energyregen = 0;
                    break;
                case 41:
                    bonuses[s].health = -6;
                    bonuses[s].dmg = 6;
                    bonuses[s].maxenergy = -50;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 5;
                    break;
                case 42:
                    bonuses[s].health = 4;
                    bonuses[s].dmg = -1;
                    bonuses[s].maxenergy = 5;
                    bonuses[s].speed = 10;
                    bonuses[s].energyregen = -1;
                    break;
                case 43:
                    bonuses[s].health = 10;
                    bonuses[s].dmg = 0;
                    bonuses[s].maxenergy = 0;
                    bonuses[s].speed = 0;
                    bonuses[s].energyregen = 0;
                    break;
                case 44:
                    bonuses[s].health = 10;
                    bonuses[s].dmg = -5;
                    bonuses[s].maxenergy = 20;
                    bonuses[s].speed = 2;
                    bonuses[s].energyregen = 1;
                    break;
                case 45:
                    bonuses[s].health = 0;
                    bonuses[s].dmg = 6;
                    bonuses[s].maxenergy = 5;
                    bonuses[s].speed = -1;
                    bonuses[s].energyregen = 0;
                    break;
                case 46:
                    bonuses[s].health = -20;
                    bonuses[s].dmg = 20;
                    bonuses[s].maxenergy = -70;
                    bonuses[s].speed = -10;
                    bonuses[s].energyregen = 2;
                    break;

            }










            if (Inventory[22] == 35) {

                slot23bonus = false;
                bonuses[0].speed = 0;
                bonuses[0].dmg = 0;
                bonuses[0].health = 0;
                bonuses[0].energyregen = 0;
                bonuses[0].maxenergy = 0;


            }
            if (Inventory[23] == 35) {

                slot24bonus = false;
                bonuses[1].speed = 0;
                bonuses[1].dmg = 0;
                bonuses[1].health = 0;
                bonuses[1].energyregen = 0;
                bonuses[1].maxenergy = 0;


            }
            if (Inventory[24] == 35) {

                slot25bonus = false;
                bonuses[2].speed = 0;
                bonuses[2].dmg = 0;
                bonuses[2].health = 0;
                bonuses[2].energyregen = 0;
                bonuses[2].maxenergy = 0;


            }
            if (bool) {
                if (Inventory[22] == 35) {

                    slot23bonus = false;
                    bonuses[0].speed = 0;
                    bonuses[0].dmg = 0;
                    bonuses[0].health = 0;
                    bonuses[0].energyregen = 0;
                    bonuses[0].maxenergy = 0;


                }
                if (Inventory[23] == 35) {

                    slot24bonus = false;
                    bonuses[1].speed = 0;
                    bonuses[1].dmg = 0;
                    bonuses[1].health = 0;
                    bonuses[1].energyregen = 0;
                    bonuses[1].maxenergy = 0;


                }
                if (Inventory[24] == 35) {

                    slot25bonus = false;
                    bonuses[2].speed = 0;
                    bonuses[2].dmg = 0;
                    bonuses[2].health = 0;
                    bonuses[2].energyregen = 0;
                    bonuses[2].maxenergy = 0;


                }



            }


            GivePlayerBonuses();


        }
        function bonus(speed, dmg, health, energyregen, maxenergy, knockbackres, stunres, healthregen) {
            this.speed = speed;
            this.dmg = dmg;
            this.health = health;
            this.energyregen = energyregen;
            this.maxenergy = maxenergy;
            this.healthregen = healthregen;
            this.knockbackres = 0;
            this.stunres = 0;

        }
        function LifeDrainSpeedfix() {

            LifeDrainSpeed = 1 * ((Darkness / 10000) + 1);
            if (LifeDrainSpeed >= 9)
                LifeDrainSpeed = 9;

        }
        var currentPotionSlot = 1;

        function shopBuy(s) {

            switch (s) {
                case 1:

                    if (Gold >= 100) {
                        potions[0]++;
                        Gold -= 100;
                        document.getElementById('CurrentGold').innerHTML = Gold;
                        document.getElementById('Potion2').title = potions[0];

                    }

                    break;
                case 2:
                    if (Gold >= 400) {
                        potions[1]++;
                        Gold -= 400;
                        document.getElementById('CurrentGold').innerHTML = Gold;
                        document.getElementById('Potion3').title = potions[1];

                    }
                    break;
                case 3:
                    if (Gold >= 200) {
                        potions[2]++;
                        Gold -= 200;
                        document.getElementById('CurrentGold').innerHTML = Gold;
                        document.getElementById('Potion4').title = potions[2];

                    }
                    break;
                case 4:
                    if (Gold >= 120) {
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {

                                Gold -= 120;
                                document.getElementById('CurrentGold').innerHTML = Gold;
                                Inventory[i] = 33
                                fixinventory(33, i);
                                break;
                            }

                        }
                    }
                    break;
                case 5:
                    if (Gold >= 1000) {
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Gold -= 1000;
                                document.getElementById('CurrentGold').innerHTML = Gold;
                                Inventory[i] = 34;
                                fixinventory(34, i);
                                break;

                            }

                        }
                    }
                    break;
                case 6:
                    if (Gold >= 10000 && Darkness >= 100000) {
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Gold -= 10000;
                                Darkness -= 100000;
                                document.getElementById('CurrentGold').innerHTML = Gold;
                                Inventory[i] = 49;
                                fixinventory(49, i);
                                break;

                            }

                        }
                    }
                    break;
            }


        }

        function cyclePotion() {
            currentPotionSlot++;
            if (currentPotionSlot >= 5)
                currentPotionSlot = 1;
            switch (currentPotionSlot) {
                case 1:

                    document.getElementById('Potion1').style.background = "url(inventory/28.jpg)";
                    document.getElementById('Potion2').style.boxShadow = "2px 1px 16px 1px";
                    document.getElementById('Potion5').style.boxShadow = "";
                    document.getElementById('potionAmount').innerHTML = document.getElementById('Potion2').title;
                    potionSelect[0] = 1;
                    potionSelect[1] = 0;
                    potionSelect[2] = 0;
                    potionSelect[3] = 0;



                    break;
                case 2:

                    document.getElementById('Potion1').style.background = "url(inventory/27.jpg)";
                    document.getElementById('Potion3').style.boxShadow = "2px 1px 16px 1px";
                    document.getElementById('Potion2').style.boxShadow = "";
                    document.getElementById('potionAmount').innerHTML = document.getElementById('Potion3').title;
                    potionSelect[0] = 0;
                    potionSelect[1] = 1;
                    potionSelect[2] = 0;
                    potionSelect[3] = 0;
                    break;
                case 3:

                    document.getElementById('Potion1').style.background = "url(inventory/26.jpg)";
                    document.getElementById('Potion4').style.boxShadow = "2px 1px 16px 1px";
                    document.getElementById('Potion3').style.boxShadow = "";
                    document.getElementById('potionAmount').innerHTML = document.getElementById('Potion4').title;
                    potionSelect[0] = 0;
                    potionSelect[1] = 0;
                    potionSelect[2] = 1;
                    potionSelect[3] = 0;
                    break;
                case 4:

                    document.getElementById('Potion1').style.background = "url(inventory/1.jpg)";
                    document.getElementById('Potion5').style.boxShadow = "2px 1px 16px 1px";
                    document.getElementById('Potion4').style.boxShadow = "";
                    document.getElementById('potionAmount').innerHTML = document.getElementById('Potion5').title;
                    potionSelect[0] = 0;
                    potionSelect[1] = 0;
                    potionSelect[2] = 0;
                    potionSelect[3] = 1;
                    break;


            }



        }
        function usePotion() {
            var tmp;
            for (i = 0; i < 4; i++) {
                if (potionSelect[i] == 1)
                    tmp = i
            }
            switch (tmp) {
                case 0:
                    if (potions[0] != 0 && potions[0] > 0) {
                        potions[0]--;
                        document.getElementById('Potion2').title = potions[0];
                        document.getElementById('potionAmount').innerHTML = document.getElementById('Potion2').title;
                        Healtregenreset = 0;
                        Healthregen();
                    }
                    else {
                        document.getElementById('Potion1').style.innerHTML = 'url(inventory/1.jpg)';
                    }
                    break;
                case 1:
                    if (potions[1] != 0 && potions[1] > 0) {
                        potions[1]--;
                        document.getElementById('Potion3').title = potions[1];
                        document.getElementById('potionAmount').innerHTML = document.getElementById('Potion3').title;
                        lives = maxhealth;

                        document.getElementById('lives').innerHTML = lives;
                        document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                    }
                    else {
                        document.getElementById('Potion1').style.innerHTML = 'url(inventory/1.jpg)';
                    }

                    break;
                case 2:
                    if (potions[2] != 0 && potions[2] > 0) {

                        potions[2]--;
                        document.getElementById('Potion4').title = potions[2];
                        document.getElementById('potionAmount').innerHTML = document.getElementById('Potion4').title;
                        energy = 100;

                        document.getElementById('energy').innerHTML = Math.round(energy);
                        document.getElementById('Energybox').style.width = (Math.round(energy * 1000) / 1000 * 6) + "px";
                    }
                    else {
                        document.getElementById('Potion1').style.innerHTML = 'url(inventory/1.jpg)';
                    }
                    break;
                case 3:
                    if (potions[3] != 0 && potions[3] > 0) {


                    }

                    break;


            }



        }

        function Cheats() {
            if (event.keyCode == 13) {
                var x = document.getElementById('cheatconsole').value;

                document.getElementById('cheatconsole').value = "";
                if (x == "K1") {
                    audio.pause();

                    epicwin1.play();


                    document.getElementById('cheatconsole').value = "EpicWinMode Activated";
                    setTimeout(function () { document.getElementById('cheatconsole').value = ""; document.getElementById('cheatconsole').style.display = "none"; }, 5000);
                    setTimeout(function () {
                        epicwintime = setInterval(function () {

                            document.body.style.animation = "EpicWin 1.9s ";
                            document.body.style.webkitAnimation = "EpicWin 1.9s ";
                            document.getElementById('inventorycontainer').style.animation = " EpicWin2 1.9s ";
                            setTimeout(function () {
                                document.body.style.animation = "";
                                document.getElementById('inventorycontainer').style.animation = "";
                                document.body.style.webkitAnimation = "";
                            }, 1850);
                        }, 1900);

                    }, 17004);
                    setTimeout(function () {
                        clearInterval(epicwintime);
                        epicwintime = setInterval(function () {

                            document.body.style.animation = "EpicWin 0.95s ";
                            document.body.style.webkitAnimation = "EpicWin 0.95s ";
                            document.getElementById('inventorycontainer').style.animation = " EpicWin2 0.95s ";
                            setTimeout(function () {
                                document.body.style.animation = "";
                                document.getElementById('inventorycontainer').style.animation = "";
                                document.body.style.webkitAnimation = "";
                            }, 900);
                        }, 950);

                    }, 47520);

                    setTimeout(function () {
                        clearInterval(epicwintime);
                        epicwintime = setInterval(function () {

                            document.body.style.animation = "EpicWin3 1.9s ";
                            document.body.style.webkitAnimation = "EpicWin3 1.9s ";

                            setTimeout(function () {
                                document.body.style.animation = "";
                                document.getElementById('inventorycontainer').style.animation = "";
                                document.body.style.webkitAnimation = "";
                            }, 1850);
                        }, 1900);

                    }, 85610);
                    setTimeout(function () {
                        clearInterval(epicwintime);


                    }, 71380);
                    setTimeout(function () {
                        clearInterval(epicwintime);
                        epicwintime = setInterval(function () {

                            document.body.style.animation = "EpicWin 0.95s ";
                            document.body.style.webkitAnimation = "EpicWin 0.95s ";
                            document.getElementById('inventorycontainer').style.animation = " EpicWin2 0.95s ";
                            setTimeout(function () {
                                document.body.style.animation = "";
                                document.getElementById('inventorycontainer').style.animation = "";
                                document.body.style.webkitAnimation = "";
                            }, 900);
                        }, 950);

                    }, 132300);
                    setTimeout(function () {
                        clearInterval(epicwintime);


                    }, 193780);


                }
                else if (x == "Gold")
                    Gold += 5000;
                else if (x == "Darkness")
                    Darkness += 50000;
                else if (x == "Endgame")
                    FinalBoss();

            }
        }
        function gooditem() {

            var r = Math.random()
            r = Math.round(r * 100);

            var r4 = Math.random();
            r4 = Math.round(r4 * 100);
            switch (r4) {



                case 49:
                    for (i = 6; i < 24; i++) {
                        if (Inventory[i] == 1) {
                            Inventory[i] = 34;
                            fixinventory(34, i);
                            break;
                        }

                    }
                    break;
                case 50:
                case 51:
                case 52:




                    for (i = 6; i < 24; i++) {
                        if (Inventory[i] == 1) {
                            Inventory[i] = 33;
                            fixinventory(33, i);
                            break;
                        }

                    }

                    break;
            }

            if (r == 50) {

                var r2 = Math.random();
                r2 = Math.round(r2 * 10);
                var r3 = Math.random();
                r3 = Math.round(r3 * 100);
                switch (r2) {
                    case 1:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 36;
                                fixinventory(36, i);
                                break;
                            }

                        }
                        break;
                    case 2:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 37;
                                fixinventory(37, i);
                                break;
                            }

                        }
                    case 3:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 38;
                                fixinventory(38, i);
                                break;
                            }

                        }
                        break;
                    case 4:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 39;
                                fixinventory(39, i);
                                break;
                            }

                        }
                        break;
                    case 5:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 40;
                                fixinventory(40, i);
                                break;
                            }

                        }
                        break;
                    case 6:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 41;
                                fixinventory(41, i);
                                break;
                            }

                        }
                        break;
                    case 7:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 42;
                                fixinventory(42, i);
                                break;
                            }

                        }
                        break;
                    case 8:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 43;
                                fixinventory(43, i);
                                break;
                            }

                        }
                        break;
                    case 9:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 44;
                                fixinventory(44, i);
                                break;
                            }

                        }
                        break;
                    case 10:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 45;
                                fixinventory(45, i);
                                break;
                            }

                        }
                        break;

                }

                switch (r3) {

                    case 45:
                        for (i = 6; i < 24; i++) {
                            if (Inventory[i] == 1) {
                                Inventory[i] = 46;
                                fixinventory(46, i);
                                break;
                            }

                        }
                        break;

                }

            }
        }
        var currentsong = 0;
        var myTimerSongs = setTimeout(function () { }, 1000);
        function MusicBot(x, type) {
            if (type == 1) {
                var r = Math.round(Math.floor(Math.random() * 6) + 1);

                if (r == x)
                    r += 1;
                if (r >= 7)
                    r = 1;
                if (x == 9)
                    r = 1;
                switch (r) {
                    case 1:
                        clearTimeout(myTimerSongs);
                        audio.play();
                        myTimerSongs = setTimeout(function () { MusicBot(1, 1); }, 197000);
                        currentsong = 1;


                        break;
                    case 2:
                        clearTimeout(myTimerSongs);
                        SongBehindTheMemories.play();
                        myTimerSongs = setTimeout(function () { MusicBot(2, 1); }, 139000);
                        currentsong = 2;
                        break;
                    case 3:
                        clearTimeout(myTimerSongs);
                        SongLife.play();
                        myTimerSongs = setTimeout(function () { MusicBot(3, 1); }, 162000);
                        currentsong = 3;
                        break;
                    case 4:
                        clearTimeout(myTimerSongs);
                        SongDragonWar.play();
                        myTimerSongs = setTimeout(function () { MusicBot(4, 1); }, 110000);
                        currentsong = 4;
                        break;
                    case 5:
                        clearTimeout(myTimerSongs);
                        SongTheWar.play();
                        myTimerSongs = setTimeout(function () { MusicBot(5, 1); }, 147000);
                        currentsong = 5;
                        break;
                    case 6:
                        clearTimeout(myTimerSongs);
                        SongDreamsAndFantasies.play();
                        myTimerSongs = setTimeout(function () { MusicBot(6, 1); }, 166000);
                        currentsong = 6;
                        break;



                }




            }
            else {
                clearTimeout(myTimerSongs);
                switch (currentsong) {
                    case 1:
                        audio.pause();
                        audio.currentTime = 0;
                        break;
                    case 2:
                        SongBehindTheMemories.pause();
                        SongBehindTheMemories.currentTime = 0;
                        break;
                    case 3:
                        SongLife.pause();
                        SongLife.currentTime = 0;
                        break;
                    case 4:
                        SongDragonWar.pause();
                        SongDragonWar.currentTime = 0;
                        break;
                    case 5:
                        SongTheWar.pause();
                        SongTheWar.currentTime = 0;
                        break;
                    case 6:
                        SongDreamsAndFantasies.pause();
                        SongDreamsAndFantasies.currentTime = 0;
                        break;
                }
            }
        }

        function helperAI() {

            var closestfiend;
            var closestx = 0;
            var x;
            var y;
            if (ChaosGolem == null) {
                for (var i = 0; i < fiender.length; i++) {
                    if (fiender[i] == null)
                        break;
                    var tmp = fiender[i].x;
                    if (tmp < 0)
                        tmp = 1;
                    if (tmp > closestx) {
                        if (helper2target != fiender[i] && helper3target != fiender[i]) {

                            closestx = tmp;
                            closestfiend = i;
                            if (fiender[i] == null)
                                break;
                        }
                    }
                    helper1target = fiender[closestfiend];
                }



                x = Math.round(fiender[closestfiend].x);
                y = Math.round(fiender[closestfiend].y);

            }
            else {
                x = Math.round(ChaosGolem.x);
                y = Math.round(ChaosGolem.y);

            }

            if (helper != null) {

                var dx = Math.round(helper.x + 25) - x;

                var dy = Math.round(helper.y + 30) - y;
                if (x > helper.x)
                    dx *= -1;
                if (y > helper.y)
                    dy *= -1;
                var angle = Math.round(10 * Math.atan2(dy, dx)) / 10;
                var velX = Math.round(10 * (LifeDrainSpeed * Math.cos(angle))) / 10;
                var velY = Math.round(10 * (LifeDrainSpeed * Math.sin(angle))) / 10;
                if (x > helper.x)
                    velX = velX;
                else if (x < helper.x)
                    velX *= -1;
                if (y > helper.y)
                    velY = velY;
                else if (y < helper.y)
                    velY *= -1;
                helper.speedX = velX;
                helper.speedY = velY;
                if (!BossEvent) {

                    if (helper.x > (fiender[closestfiend].x - 35) && helper.x < (fiender[closestfiend].x - 25)) {

                        if (helper.y < (fiender[closestfiend].y + 20) && helper.y > (fiender[closestfiend].y - 35)) {

                            fiender[closestfiend].hp -= player.dmg;
                            if (fiender[closestfiend].hp <= 0) {
                                soundhit = true;

                                swordAudiohit.play();
                                var tmp = fiender[closestfiend].type;
                                exp += Math.round(4 * ((diff2 / 10) * diff) + 3);
                                score += 5;
                                document.getElementById('score').innerHTML = score;
                                fiends[closestfiend] = 0;
                                fiender[closestfiend].speedX = 0;
                                fiender[closestfiend].x = -55;
                                currentnumber--;
                                bosscounter++;
                                helper1target = null;
                                document.getElementById('exp').innerHTML = exp;

                                switch (tmp) {
                                    case "Wolf":
                                        for (i = 0; i < 3; i++) {

                                            switch (i) {
                                                case 0:
                                                    if (Quest1 != null) {
                                                        if (Quest1.type == 1) {

                                                            Quest1.done++;
                                                            if (Quest1.done == Quest1.amount) {
                                                                document.getElementById('Quest1button').disabled = false;

                                                            }
                                                            if (Quest1.done > Quest1.amount)
                                                                Quest1.done = Quest1.amount;
                                                            document.getElementById('Quest1content').innerHTML = 'Kill ' + Quest1.done + '/' + Quest1.amount + ' Wolfs' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 1:
                                                    if (Quest2 != null) {
                                                        if (Quest2.type == 1) {

                                                            Quest2.done++;
                                                            if (Quest2.done == Quest2.amount) {
                                                                document.getElementById('Quest2button').disabled = false;

                                                            }
                                                            if (Quest2.done > Quest2.amount)
                                                                Quest2.done = Quest2.amount;
                                                            document.getElementById('Quest2content').innerHTML = 'Kill ' + Quest2.done + '/' + Quest2.amount + ' Wolfs' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 2:
                                                    if (Quest3 != null) {
                                                        if (Quest3.type == 1) {

                                                            Quest3.done++;
                                                            if (Quest3.done == Quest3.amount) {
                                                                document.getElementById('Quest3button').disabled = false;

                                                            }
                                                            if (Quest3.done > Quest3.amount)
                                                                Quest3.done = Quest3.amount;
                                                            document.getElementById('Quest3content').innerHTML = 'Kill ' + Quest3.done + '/' + Quest3.amount + ' Wolfs' + '<br />';
                                                        }

                                                    }
                                                    break;

                                            }

                                        }

                                        break;
                                    case "Witch":
                                        for (i = 0; i < 3; i++) {

                                            switch (i) {
                                                case 0:
                                                    if (Quest1 != null) {
                                                        if (Quest1.type == 3) {

                                                            Quest1.done++;
                                                            if (Quest1.done == Quest1.amount) {
                                                                document.getElementById('Quest1button').disabled = false;

                                                            }
                                                            if (Quest1.done > Quest1.amount)
                                                                Quest1.done = Quest1.amount;
                                                            document.getElementById('Quest1content').innerHTML = 'Kill ' + Quest1.done + '/' + Quest1.amount + ' Witches' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 1:
                                                    if (Quest2 != null) {
                                                        if (Quest2.type == 3) {

                                                            Quest2.done++;
                                                            if (Quest2.done == Quest2.amount) {
                                                                document.getElementById('Quest2button').disabled = false;

                                                            }
                                                            if (Quest2.done > Quest2.amount)
                                                                Quest2.done = Quest2.amount;
                                                            document.getElementById('Quest2content').innerHTML = 'Kill ' + Quest2.done + '/' + Quest2.amount + ' Witches' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 2:
                                                    if (Quest3 != null) {
                                                        if (Quest3.type == 3) {

                                                            Quest3.done++;
                                                            if (Quest3.done == Quest3.amount) {
                                                                document.getElementById('Quest3button').disabled = false;

                                                            }
                                                            if (Quest3.done > Quest3.amount)
                                                                Quest3.done = Quest3.amount;
                                                            document.getElementById('Quest3content').innerHTML = 'Kill ' + Quest3.done + '/' + Quest3.amount + ' Witches' + '<br />';
                                                        }

                                                    }
                                                    break;

                                            }

                                        }

                                        break;
                                    case "Golem":

                                        break;


                                }
                            }
                            else { }


                            helperactive = false;
                            clearInterval(LifeDrainKeyFrames);

                        }
                    }

                }
                else {
                    helperactive = false;
                    helper1target = null;
                    clearInterval(LifeDrainKeyFrames);
                }
            }
        }
        function helperAI2() {

            var closestfiend;
            var closestx = 0;
            var x;
            var y;
            if (ChaosGolem == null) {
                for (var i = 0; i < fiender.length; i++) {
                    if (fiender[i] == null)
                        break;
                    var tmp = fiender[i].x;
                    if (tmp < 0)
                        tmp = 1;
                    if (tmp > closestx) {
                        if (helper1target != fiender[i] && helper3target != fiender[i]) {

                            closestx = tmp;
                            closestfiend = i;
                            if (fiender[i] == null)
                                break;
                        }
                    }
                    helper2target = fiender[closestfiend];
                }


                x = Math.round(fiender[closestfiend].x);
                y = Math.round(fiender[closestfiend].y);

            }
            else {
                x = Math.round(ChaosGolem.x);
                y = Math.round(ChaosGolem.y);

            }

            if (helper2 != null) {

                var dx = Math.round(helper2.x + 25) - x;

                var dy = Math.round(helper2.y + 30) - y;
                if (x > helper2.x)
                    dx *= -1;
                if (y > helper2.y)
                    dy *= -1;
                var angle = Math.round(10 * Math.atan2(dy, dx)) / 10;
                var velX = Math.round(10 * (LifeDrainSpeed * Math.cos(angle))) / 10;
                var velY = Math.round(10 * (LifeDrainSpeed * Math.sin(angle))) / 10;
                if (x > helper2.x)
                    velX = velX;
                else if (x < helper2.x)
                    velX *= -1;
                if (y > helper2.y)
                    velY = velY;
                else if (y < helper2.y)
                    velY *= -1;
                helper2.speedX = velX;
                helper2.speedY = velY;
                if (!BossEvent) {

                    if (helper2.x > (fiender[closestfiend].x - 35) && helper2.x < (fiender[closestfiend].x - 25)) {

                        if (helper2.y < (fiender[closestfiend].y + 20) && helper2.y > (fiender[closestfiend].y - 35)) {

                            fiender[closestfiend].hp -= player.dmg;
                            if (fiender[closestfiend].hp <= 0) {
                                soundhit = true;

                                swordAudiohit.play();
                                var tmp = fiender[closestfiend].type;
                                exp += Math.round(4 * ((diff2 / 10) * diff) + 3);
                                score += 5;
                                document.getElementById('score').innerHTML = score;
                                fiends[closestfiend] = 0;
                                fiender[closestfiend].speedX = 0;
                                fiender[closestfiend].x = -55;
                                currentnumber--;
                                bosscounter++;
                                helper2target = null;
                                document.getElementById('exp').innerHTML = exp;
                                switch (tmp) {
                                    case "Wolf":
                                        for (i = 0; i < 3; i++) {

                                            switch (i) {
                                                case 0:
                                                    if (Quest1 != null) {
                                                        if (Quest1.type == 1) {

                                                            Quest1.done++;
                                                            if (Quest1.done == Quest1.amount) {
                                                                document.getElementById('Quest1button').disabled = false;

                                                            }
                                                            if (Quest1.done > Quest1.amount)
                                                                Quest1.done = Quest1.amount;
                                                            document.getElementById('Quest1content').innerHTML = 'Kill ' + Quest1.done + '/' + Quest1.amount + ' Wolfs' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 1:
                                                    if (Quest2 != null) {
                                                        if (Quest2.type == 1) {

                                                            Quest2.done++;
                                                            if (Quest2.done == Quest2.amount) {
                                                                document.getElementById('Quest2button').disabled = false;

                                                            }
                                                            if (Quest2.done > Quest2.amount)
                                                                Quest2.done = Quest2.amount;
                                                            document.getElementById('Quest2content').innerHTML = 'Kill ' + Quest2.done + '/' + Quest2.amount + ' Wolfs' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 2:
                                                    if (Quest3 != null) {
                                                        if (Quest3.type == 1) {

                                                            Quest3.done++;
                                                            if (Quest3.done == Quest3.amount) {
                                                                document.getElementById('Quest3button').disabled = false;

                                                            }
                                                            if (Quest3.done > Quest3.amount)
                                                                Quest3.done = Quest3.amount;
                                                            document.getElementById('Quest3content').innerHTML = 'Kill ' + Quest3.done + '/' + Quest3.amount + ' Wolfs' + '<br />';
                                                        }

                                                    }
                                                    break;

                                            }

                                        }

                                        break;
                                    case "Witch":
                                        for (i = 0; i < 3; i++) {

                                            switch (i) {
                                                case 0:
                                                    if (Quest1 != null) {
                                                        if (Quest1.type == 3) {

                                                            Quest1.done++;
                                                            if (Quest1.done == Quest1.amount) {
                                                                document.getElementById('Quest1button').disabled = false;

                                                            }
                                                            if (Quest1.done > Quest1.amount)
                                                                Quest1.done = Quest1.amount;
                                                            document.getElementById('Quest1content').innerHTML = 'Kill ' + Quest1.done + '/' + Quest1.amount + ' Witches' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 1:
                                                    if (Quest2 != null) {
                                                        if (Quest2.type == 3) {

                                                            Quest2.done++;
                                                            if (Quest2.done == Quest2.amount) {
                                                                document.getElementById('Quest2button').disabled = false;

                                                            }
                                                            if (Quest2.done > Quest2.amount)
                                                                Quest2.done = Quest2.amount;
                                                            document.getElementById('Quest2content').innerHTML = 'Kill ' + Quest2.done + '/' + Quest2.amount + ' Witches' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 2:
                                                    if (Quest3 != null) {
                                                        if (Quest3.type == 3) {

                                                            Quest3.done++;
                                                            if (Quest3.done == Quest3.amount) {
                                                                document.getElementById('Quest3button').disabled = false;

                                                            }
                                                            if (Quest3.done > Quest3.amount)
                                                                Quest3.done = Quest3.amount;
                                                            document.getElementById('Quest3content').innerHTML = 'Kill ' + Quest3.done + '/' + Quest3.amount + ' Witches' + '<br />';
                                                        }

                                                    }
                                                    break;

                                            }

                                        }

                                        break;
                                    case "Golem":

                                        break;


                                }
                            }
                            else { }

                            helper2active = false;

                            clearInterval(LifeDrainKeyFrames2);

                        }
                    }

                }
                else {
                    helper2active = false;
                    helper2target = null;
                    clearInterval(LifeDrainKeyFrames2);
                }
            }
        }
        function helperAI3() {

            var closestfiend;
            var closestx = 0;
            var x;
            var y;
            if (ChaosGolem == null) {
                for (var i = 0; i < fiender.length; i++) {
                    if (fiender[i] == null)
                        break;
                    var tmp = fiender[i].x;
                    if (tmp < 0)
                        tmp = 1;
                    if (tmp > closestx) {
                        if (helper1target != fiender[i] && helper2target != fiender[i]) {

                            closestx = tmp;
                            closestfiend = i;
                            if (fiender[i] == null)
                                break;
                        }
                    }
                    helper3target = fiender[closestfiend];
                }


                x = Math.round(fiender[closestfiend].x);
                y = Math.round(fiender[closestfiend].y);

            }
            else {
                x = Math.round(ChaosGolem.x);
                y = Math.round(ChaosGolem.y);

            }

            if (helper3 != null) {

                var dx = Math.round(helper3.x + 25) - x;

                var dy = Math.round(helper3.y + 30) - y;
                if (x > helper3.x)
                    dx *= -1;
                if (y > helper3.y)
                    dy *= -1;
                var angle = Math.round(10 * Math.atan2(dy, dx)) / 10;
                var velX = Math.round(10 * (LifeDrainSpeed * Math.cos(angle))) / 10;
                var velY = Math.round(10 * (LifeDrainSpeed * Math.sin(angle))) / 10;
                if (x > helper3.x)
                    velX = velX;
                else if (x < helper3.x)
                    velX *= -1;
                if (y > helper3.y)
                    velY = velY;
                else if (y < helper3.y)
                    velY *= -1;
                helper3.speedX = velX;
                helper3.speedY = velY;
                if (!BossEvent) {

                    if (helper3.x > (fiender[closestfiend].x - 35) && helper3.x < (fiender[closestfiend].x - 25)) {

                        if (helper3.y < (fiender[closestfiend].y + 20) && helper3.y > (fiender[closestfiend].y - 35)) {

                            fiender[closestfiend].hp -= player.dmg;
                            if (fiender[closestfiend].hp <= 0) {
                                soundhit = true;

                                swordAudiohit.play();
                                var tmp = fiender[closestfiend].type;
                                exp += Math.round(4 * ((diff2 / 10) * diff) + 3);
                                score += 5;
                                document.getElementById('score').innerHTML = score;
                                fiends[closestfiend] = 0;
                                fiender[closestfiend].speedX = 0;
                                fiender[closestfiend].x = -55;
                                currentnumber--;
                                bosscounter++;
                                helper3target = null;
                                document.getElementById('exp').innerHTML = exp;
                                switch (tmp) {
                                    case "Wolf":
                                        for (i = 0; i < 3; i++) {

                                            switch (i) {
                                                case 0:
                                                    if (Quest1 != null) {
                                                        if (Quest1.type == 1) {

                                                            Quest1.done++;
                                                            if (Quest1.done == Quest1.amount) {
                                                                document.getElementById('Quest1button').disabled = false;

                                                            }
                                                            if (Quest1.done > Quest1.amount)
                                                                Quest1.done = Quest1.amount;
                                                            document.getElementById('Quest1content').innerHTML = 'Kill ' + Quest1.done + '/' + Quest1.amount + ' Wolfs' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 1:
                                                    if (Quest2 != null) {
                                                        if (Quest2.type == 1) {

                                                            Quest2.done++;
                                                            if (Quest2.done == Quest2.amount) {
                                                                document.getElementById('Quest2button').disabled = false;

                                                            }
                                                            if (Quest2.done > Quest2.amount)
                                                                Quest2.done = Quest2.amount;
                                                            document.getElementById('Quest2content').innerHTML = 'Kill ' + Quest2.done + '/' + Quest2.amount + ' Wolfs' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 2:
                                                    if (Quest3 != null) {
                                                        if (Quest3.type == 1) {

                                                            Quest3.done++;
                                                            if (Quest3.done == Quest3.amount) {
                                                                document.getElementById('Quest3button').disabled = false;

                                                            }
                                                            if (Quest3.done > Quest3.amount)
                                                                Quest3.done = Quest3.amount;
                                                            document.getElementById('Quest3content').innerHTML = 'Kill ' + Quest3.done + '/' + Quest3.amount + ' Wolfs' + '<br />';
                                                        }

                                                    }
                                                    break;

                                            }

                                        }

                                        break;
                                    case "Witch":
                                        for (i = 0; i < 3; i++) {

                                            switch (i) {
                                                case 0:
                                                    if (Quest1 != null) {
                                                        if (Quest1.type == 3) {

                                                            Quest1.done++;
                                                            if (Quest1.done == Quest1.amount) {
                                                                document.getElementById('Quest1button').disabled = false;

                                                            }
                                                            if (Quest1.done > Quest1.amount)
                                                                Quest1.done = Quest1.amount;
                                                            document.getElementById('Quest1content').innerHTML = 'Kill ' + Quest1.done + '/' + Quest1.amount + ' Witches' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 1:
                                                    if (Quest2 != null) {
                                                        if (Quest2.type == 3) {

                                                            Quest2.done++;
                                                            if (Quest2.done == Quest2.amount) {
                                                                document.getElementById('Quest2button').disabled = false;

                                                            }
                                                            if (Quest2.done > Quest2.amount)
                                                                Quest2.done = Quest2.amount;
                                                            document.getElementById('Quest2content').innerHTML = 'Kill ' + Quest2.done + '/' + Quest2.amount + ' Witches' + '<br />';
                                                        }

                                                    }
                                                    break;
                                                case 2:
                                                    if (Quest3 != null) {
                                                        if (Quest3.type == 3) {

                                                            Quest3.done++;
                                                            if (Quest3.done == Quest3.amount) {
                                                                document.getElementById('Quest3button').disabled = false;

                                                            }
                                                            if (Quest3.done > Quest3.amount)
                                                                Quest3.done = Quest3.amount;
                                                            document.getElementById('Quest3content').innerHTML = 'Kill ' + Quest3.done + '/' + Quest3.amount + ' Witches' + '<br />';
                                                        }

                                                    }
                                                    break;

                                            }

                                        }

                                        break;
                                    case "Golem":

                                        break;


                                }

                            }
                            else { }

                            helper3active = false;
                            clearInterval(LifeDrainKeyFrames3);

                        }
                    }

                }
                else {
                    helper3active = false;
                    helper3target = null;
                    clearInterval(LifeDrainKeyFrames3);
                }
            }
        }

        function Healthregen(x, y, z) {

            if (Healtregenreset < 4) {
                Healthregens = setTimeout(function () {
                    if (lives != maxhealth) {
                        lives += 1;


                    }
                    if (lives > maxhealth)
                        lives = maxhealth;
                    document.getElementById('lives').innerHTML = lives;
                    document.getElementById('maxHP').innerHTML = maxhealth;
                    document.getElementById('Livesbox').style.width = (Math.round(lives * 1000) / 1000 * (600 / maxhealth)) + "px";
                    Healtregenreset++;
                    Healthregen();
                }, 1000);


            }
        }

        function refreshLoop() {
            window.requestAnimationFrame(() => {
                const now = performance.now();
                while (times.length > 0 && times[0] <= now - 1000) {
                    times.shift();
                }
                times.push(now);
                fps = times.length;
                refreshLoop();
            });
            document.getElementById('FPS').innerHTML = " " + fps;

        }
        function scores() {

            scoreen = setInterval(function () {
                if (!pauseineffect) {
                    score += Math.round(diff * diff2) / 4;
                    document.getElementById('score').innerHTML = Math.round(score);
                }
            }, 1000);

        }
        masterslider.oninput = function () {

            masterlvl = this.value / 100;
            fixvolume();
        }
        musicslider.oninput = function () {

            musiclvl = this.value / 100;
            fixvolume();
        }
        sfxslider.oninput = function () {

            sfxlvl = this.value / 100;
            fixvolume();
        }
        function fixvolume() {
            audio.volume = (musiclvl * masterlvl) * 0.5;
            swordAudiofast.volume = sfxlvl * masterlvl;
            swordAudiohit.volume = sfxlvl * masterlvl;
            swordAudioslow.volume = sfxlvl * masterlvl;
            SongBehindTheMemories.volume = musiclvl * masterlvl;
            SongDragonWar.volume = musiclvl * masterlvl;
            SongDreamsAndFantasies.volume = musiclvl * masterlvl;
            SongLife.volume = musiclvl * masterlvl;
            SongTheWar.volume = musiclvl * masterlvl;
            finalbossmusic.volume = musiclvl * masterlvl;
            ChaosGolemTheme.volume = musiclvl * masterlvl;
            death.volume = musiclvl * masterlvl;
        }
        function chaosreset() {
            clearInterval(chaosregen);
            chaosregen = setInterval(function () {
                if (shield < 100) {

                    if (!pauseineffect) {
                        shield += 1;
                    }
                    if (shield > 100) {
                        shield = 100;
                    }
                    shield = Math.round(shield * 1000) / 1000;
                    document.getElementById('shield').innerHTML = Math.round(shield);
                    document.getElementById('Shieldbox').style.width = (Math.round(shield * 1000) / 1000 * 6) + "px";
                }

                chaosreset();

            }, (2500 / (bosskilled + 1)));
        }
        var myGameArea = {


            canvas: document.createElement("canvas"),
            start: function () {


                setInterval(function () {
                    if (!pauseineffect) {
                        diff += 0.0001;
                        diff2 += 0.0005;
                        document.getElementById('healthmultipler').innerHTML = Math.round(diff * 100) / 100;
                        <!-- document.getElementById('bosswhen').innerHTML = Math.round(bosscounter/(diff2/10)) +' / '+Math.round((7500/(diff2*10))); -->
                    }
                }, 100);
                chaosregen = setInterval(function () {
                    if (shield < 100) {

                        if (!pauseineffect) {
                            shield += 1;
                        }
                        if (shield > 100) {
                            shield = 100;
                        }
                        shield = Math.round(shield * 1000) / 1000;
                        document.getElementById('shield').innerHTML = Math.round(shield);

                        document.getElementById('Shieldbox').style.width = (Math.round(shield * 1000) / 1000 * 6) + "px";
                    }

                    chaosreset();

                }, (2500 / (bosskilled + 1)));
                setInterval(function () {

                    if (energy < energymax) {
                        if (!pauseineffect) {
                            energy += (Eregen / 100);
                        }
                        if (energy > energymax) {
                            energy = energymax;
                        }
                        energy = Math.round(energy * 1000) / 1000;


                    }
                    else
                        energy = energymax;

                    document.getElementById('energy').innerHTML = Math.round(energy);
                    document.getElementById('maxEnergy').innerHTML = Math.round(energymax);
                    document.getElementById('Energybox').style.width = (Math.round(energy * 1000) / 1000 * (600 / energymax)) + "px";

                }, 1);
                this.canvas.width = 1200;
                this.canvas.height = 700;
                this.context = this.canvas.getContext("2d");
                document.body.insertBefore(this.canvas, document.body.childNodes[0]);
                this.canvas.style.zIndex = 0;
                gam = setInterval(updateGameArea, 15);
            },
            clear: function () {
                this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);


            }
        }
        var restart1 = 0;

        var Witchwalknumber = 0;
        var FinalBossFlying = false;
        function FinalBoss() {


            TheFinalBoss = new component(640, 640, "FinalBossIdle", -400, 175, 20000);
            document.getElementById('BossHealth').innerHTML = TheFinalBoss.hp;
            document.getElementById('BossHealthBox').style.width = (Math.round(TheFinalBoss.hp * 1000) / 1000 * (1200 / Bossmaxhealth)) + "px";
            document.getElementById('BossHealthContainer').style.display = "block";
            document.getElementById('BossmaxHp').innerHTML = TheFinalBoss.hp;
            document.getElementById('BossHealth').innerHTML = "Supreme Sorcerer Nadir Drach " + TheFinalBoss.hp;
            Bossmaxhealth = TheFinalBoss.hp;
            BossEvent = true;
            MusicBot(0, 2);
            finalbossmusic.play();
            finalbossmusic.loop = true;
            ChaosGolemShake();
            finalbossactive = true;
            TheFinalBoss.speedX = 1;
            setTimeout(function () {
                TheFinalBoss.speedX = 0;
                FinalBossAttacks();
            }, 4000);
            for (i = 0; i < fiender.length; i++) {

                fiender[i] = null;

            }

            spawnValue = 0;
        }

        function FinalBossFlys() {
            TheFinalBoss.type = "FinalBossFly";
            var x;
            var y;

            x = (player.x + 100);
            xtarget = (player.x);
            y = (player.y - 120);
            ytarget = (player.y - 200);
            var dx = (TheFinalBoss.x) - x;

            var dy = (TheFinalBoss.y) - y;
            if (x > TheFinalBoss.x)
                dx *= -1;
            if (y > TheFinalBoss.y)
                dy *= -1;
            var angle = Math.atan2(dy, dx);
            Math.round(Math.random() * 10)
            var velX = ((3 + (Math.round(Math.random() * 10) / 4)) * Math.cos(angle));
            var velY = ((3 + (Math.round(Math.random() * 10) / 4)) * Math.sin(angle));
            if (x > TheFinalBoss.x)
                velX = velX;
            else if (x < TheFinalBoss.x)
                velX *= -1;
            if (y > TheFinalBoss.y)
                velY = velY;
            else if (y < TheFinalBoss.y)
                velY *= -1;
            TheFinalBoss.speedX = velX;
            TheFinalBoss.speedY = velY;


        }
        function EnergyRegenAdd() {
            if (eregenlvl < 50) {
                if (exp >= Eregenreq) {
                    Energyregen += 0.1;
                    exp -= Eregenreq;
                    exp = Math.round(exp);
                    Eregenreq = Eregenreq * 1.5;
                    eregenlvl++;
                    document.getElementById('exp').innerHTML = exp;
                    document.getElementById('eregenlvl').innerHTML = eregenlvl;
                    exp = Math.round(exp);
                    Eregenreq = Math.round(Eregenreq);
                    document.getElementById('eregens').innerHTML = Eregenreq;
                    if (eregenlvl == 50)
                        document.getElementById('eregens').innerHTML = "Maxed";
                    GivePlayerBonuses();
                }
            }
        }
        function component(width, height, t, x, y, HP, dmg, number) {

            this.width = width;
            this.height = height;
            this.x = x;
            this.y = y;
            this.hp = HP;
            this.speedX = 0;
            this.speedY = 0;
            this.type = t;
            this.angle = 0;
            this.dmg = dmg;
            this.tmp;
            this.fire = 0;
            this.number = number;

            this.update = function () {
                ctx = myGameArea.context;
                ctx.save();
                ctx.translate(this.x, this.y);



                ctx.rotate(this.angle);

                if (this.type == "Witch") {

                    var Witchiwalk;

                    if (currentframe < 7)
                        Witchiwalk = 1;
                    else if (currentframe >= 7 && currentframe < 13)
                        Witchiwalk = 2;
                    else if (currentframe >= 13 && currentframe < 18)
                        Witchiwalk = 3;
                    else if (currentframe >= 18 && currentframe < 23)
                        Witchiwalk = 4;
                    else if (currentframe >= 23 && currentframe < 29)
                        Witchiwalk = 5;
                    else if (currentframe >= 29 && currentframe < 34)
                        Witchiwalk = 6;
                    else if (currentframe >= 34 && currentframe < 39)
                        Witchiwalk = 7;
                    else if (currentframe >= 39)
                        Witchiwalk = 8;


                    var pat = ctx.createPattern(WitchWalk[Witchiwalk - 1], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();
                }
                else if (this.type == "Wolf") {
                    var Wolfiwalk;
                    if (currentframe < 7)
                        Wolfiwalk = 1;
                    else if (currentframe >= 7 && currentframe < 13)
                        Wolfiwalk = 2;
                    else if (currentframe >= 13 && currentframe < 18)
                        Wolfiwalk = 3;
                    else if (currentframe >= 18 && currentframe < 23)
                        Wolfiwalk = 4;
                    else if (currentframe >= 23 && currentframe < 29)
                        Wolfiwalk = 5;
                    else if (currentframe >= 29 && currentframe < 34)
                        Wolfiwalk = 6;
                    else if (currentframe >= 34 && currentframe < 39)
                        Wolfiwalk = 7;
                    else if (currentframe >= 39)
                        Wolfiwalk = 8;
                    var pat = ctx.createPattern(WolfWalk[Wolfiwalk - 1], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();
                }
                else if (this.type == "Golem") {

                    var Golemiwalk;
                    if (currentframe < 7)
                        Golemiwalk = 1;
                    else if (currentframe >= 7 && currentframe < 14)
                        Golemiwalk = 2;
                    else if (currentframe >= 14 && currentframe < 21)
                        Golemiwalk = 3;
                    else if (currentframe >= 21 && currentframe < 27)
                        Golemiwalk = 4;
                    else if (currentframe >= 27 && currentframe < 34)
                        Golemiwalk = 5;
                    else if (currentframe >= 34 && currentframe < 41)
                        Golemiwalk = 6;
                    else if (currentframe >= 41)
                        Golemiwalk = 7;

                    var pat = ctx.createPattern(GolemWalk[Golemiwalk - 1], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();


                }
                else if (this.type == "ChaosGolem") {

                    var ChaosGolemiwalk;
                    if (currentframe1 < 21)
                        ChaosGolemiwalk = 1;
                    else if (currentframe1 >= 21 && currentframe1 < 42)
                        ChaosGolemiwalk = 2;
                    else if (currentframe1 >= 42 && currentframe1 < 63)
                        ChaosGolemiwalk = 3;
                    else if (currentframe1 >= 63 && currentframe1 < 84)
                        ChaosGolemiwalk = 4;
                    else if (currentframe1 >= 84 && currentframe1 < 105)
                        ChaosGolemiwalk = 5;
                    else if (currentframe1 >= 105 && currentframe1 < 126)
                        ChaosGolemiwalk = 6;
                    else if (currentframe1 >= 126)
                        ChaosGolemiwalk = 7;

                    var pat = ctx.createPattern(ChaosGolemWalk[ChaosGolemiwalk - 1], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();


                }
                else if (this.type == "helper") {

                    if (helperactive) {
                        var pat = ctx.createPattern(LifeDrainImages[LifeDrainKeyFrame], 'no-repeat');
                        ctx.fillStyle = pat;
                        ctx.fill();

                    }
                    else if (helper2active) {

                        var pat = ctx.createPattern(LifeDrainImages[LifeDrainKeyFrame2], 'no-repeat');
                        ctx.fillStyle = pat;
                        ctx.fill();
                    }
                    else {
                        var pat = ctx.createPattern(LifeDrainImages[LifeDrainKeyFrame3], 'no-repeat');
                        ctx.fillStyle = pat;
                        ctx.fill();

                    }

                }
                else if (this.type == "casterwalk") {
                    var frame;
                    if (currentframe < 7)
                        frame = 1;
                    else if (currentframe >= 7 && currentframe < 14)
                        frame = 2;
                    else if (currentframe >= 14 && currentframe < 21)
                        frame = 3;
                    else if (currentframe >= 21 && currentframe < 27)
                        frame = 4;
                    else if (currentframe >= 27)
                        frame = 5

                    var pat = ctx.createPattern(CasterWalk[frame - 1], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();

                }
                else if (this.type == "casterattack") {


                    var pat = ctx.createPattern(CasterAttacks[1], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();

                }
                else if (this.type == "casterpro") {

                    var frame;
                    if (currentframe1 < 3)
                        frame = 1;
                    else if (currentframe1 >= 3 && currentframe1 < 5)
                        frame = 2;
                    else if (currentframe1 >= 5 && currentframe1 < 8)
                        frame = 3;
                    else if (currentframe1 >= 8 && currentframe1 < 10)
                        frame = 4;
                    else if (currentframe1 >= 10 && currentframe1 < 13)
                        frame = 5;
                    else if (currentframe1 >= 13 && currentframe1 < 15)
                        frame = 6;
                    else if (currentframe1 >= 15 && currentframe1 < 18)
                        frame = 7;
                    else if (currentframe1 >= 18 && currentframe1 < 20)
                        frame = 8;
                    else if (currentframe1 >= 20 && currentframe1 < 23)
                        frame = 9;
                    else if (currentframe1 >= 23 && currentframe1 < 25)
                        frame = 10;
                    else if (currentframe1 >= 25 && currentframe1 < 27)
                        frame = 11;
                    else if (currentframe1 >= 27 && currentframe1 < 30)
                        frame = 12;
                    else if (currentframe1 >= 30 && currentframe1 < 32)
                        frame = 13;
                    else if (currentframe1 >= 32 && currentframe1 < 35)
                        frame = 14;
                    else if (currentframe1 >= 35 && currentframe1 < 37)
                        frame = 15;
                    else if (currentframe1 >= 37 && currentframe1 < 40)
                        frame = 16;
                    else if (currentframe1 >= 40 && currentframe1 < 42)
                        frame = 17;
                    else if (currentframe1 >= 42 && currentframe1 < 45)
                        frame = 18;
                    else if (currentframe1 >= 45 && currentframe1 < 47)
                        frame = 19;
                    else if (currentframe1 >= 47 && currentframe1 < 50)
                        frame = 20;
                    else if (currentframe1 >= 50 && currentframe1 < 52)
                        frame = 21;
                    else if (currentframe1 >= 52 && currentframe1 < 55)
                        frame = 22;
                    else if (currentframe1 >= 55 && currentframe1 < 57)
                        frame = 23;
                    else if (currentframe1 >= 57 && currentframe1 < 60)
                        frame = 24;
                    else if (currentframe1 >= 60 && currentframe1 < 62)
                        frame = 25;
                    else if (currentframe1 >= 62 && currentframe1 < 65)
                        frame = 26;
                    else if (currentframe1 >= 65 && currentframe1 < 67)
                        frame = 27;
                    else if (currentframe1 >= 67 && currentframe1 < 70)
                        frame = 28;
                    else if (currentframe1 >= 70 && currentframe1 < 72)
                        frame = 29;
                    else if (currentframe1 >= 72 && currentframe1 < 75)
                        frame = 30;
                    else if (currentframe1 >= 75 && currentframe1 < 77)
                        frame = 31;
                    else if (currentframe1 >= 77 && currentframe1 < 80)
                        frame = 32;
                    else if (currentframe1 >= 80 && currentframe1 < 83)
                        frame = 33;
                    else if (currentframe1 >= 83 && currentframe1 < 85)
                        frame = 34;
                    else if (currentframe1 >= 85 && currentframe1 < 87)
                        frame = 35;
                    else if (currentframe1 >= 87 && currentframe1 < 90)
                        frame = 36;
                    else if (currentframe1 >= 90 && currentframe1 < 92)
                        frame = 37;
                    else if (currentframe1 >= 92 && currentframe1 < 95)
                        frame = 38;
                    else if (currentframe1 >= 95 && currentframe1 < 97)
                        frame = 39;
                    else if (currentframe1 >= 97 && currentframe1 < 100)
                        frame = 40;
                    else if (currentframe1 >= 100 && currentframe1 < 102)
                        frame = 41;
                    else if (currentframe1 >= 102 && currentframe1 < 105)
                        frame = 42;
                    else if (currentframe1 >= 105 && currentframe1 < 107)
                        frame = 43;
                    else if (currentframe1 >= 107 && currentframe1 < 110)
                        frame = 44;
                    else if (currentframe1 >= 110 && currentframe1 < 112)
                        frame = 45;
                    else if (currentframe1 >= 112 && currentframe1 < 115)
                        frame = 46;
                    else if (currentframe1 >= 115 && currentframe1 < 117)
                        frame = 47;
                    else if (currentframe1 >= 117 && currentframe1 < 120)
                        frame = 48;
                    else if (currentframe1 >= 120 && currentframe1 < 122)
                        frame = 49;
                    else if (currentframe1 >= 122 && currentframe1 < 125)
                        frame = 50;
                    else if (currentframe1 >= 125 && currentframe1 < 127)
                        frame = 51;
                    else if (currentframe1 >= 127 && currentframe1 < 130)
                        frame = 52;
                    else if (currentframe1 >= 130 && currentframe1 < 132)
                        frame = 53;
                    else if (currentframe1 >= 132 && currentframe1 < 135)
                        frame = 54;
                    else if (currentframe1 >= 135 && currentframe1 < 137)
                        frame = 55;
                    else if (currentframe1 >= 137 && currentframe1 < 140)
                        frame = 56;
                    else if (currentframe1 >= 140 && currentframe1 < 142)
                        frame = 57;
                    else if (currentframe1 >= 142 && currentframe1 < 143)
                        frame = 58;
                    else if (currentframe1 >= 143 && currentframe1 < 144)
                        frame = 59;
                    else if (currentframe1 >= 144 && currentframe1 < 145)
                        frame = 60;
                    else if (currentframe1 >= 145)
                        frame = 61;

                    var pat = ctx.createPattern(CasterAttack[frame - 1], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();

                }

                else if (this.type == "FinalBossIdle") {

                    var frame;
                    if (finalbossframe < 5)
                        frame = 0;
                    else if (finalbossframe >= 5 && finalbossframe < 10)
                        frame = 1;
                    else if (finalbossframe >= 10 && finalbossframe < 15)
                        frame = 2;
                    else if (finalbossframe >= 15 && finalbossframe < 20)
                        frame = 3;
                    else if (finalbossframe >= 20 && finalbossframe < 25)
                        frame = 4;
                    else if (finalbossframe >= 25 && finalbossframe < 30)
                        frame = 5;
                    else if (finalbossframe >= 30 && finalbossframe < 35)
                        frame = 6;
                    else if (finalbossframe >= 35 && finalbossframe < 40)
                        frame = 7;
                    else if (finalbossframe >= 40 && finalbossframe < 45)
                        frame = 8;
                    else if (finalbossframe >= 45 && finalbossframe < 50)
                        frame = 9;
                    else if (finalbossframe >= 50 && finalbossframe < 55)
                        frame = 10;
                    else if (finalbossframe >= 55 && finalbossframe < 60)
                        frame = 11;
                    else if (finalbossframe >= 60 && finalbossframe < 65)
                        frame = 12;
                    else if (finalbossframe >= 65 && finalbossframe < 70)
                        frame = 13;
                    else if (finalbossframe >= 70 && finalbossframe < 75)
                        frame = 14;
                    else if (finalbossframe >= 75 && finalbossframe < 80)
                        frame = 15;
                    else if (finalbossframe >= 80 && finalbossframe < 85)
                        frame = 16;
                    else if (finalbossframe >= 85 && finalbossframe < 90)
                        frame = 17;
                    else if (finalbossframe >= 90)
                        frame = 18;

                    var pat = ctx.createPattern(FinalBossIdle[frame], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();

                }

                else if (this.type == "FinalBossAttack") {

                    var frame;
                    if (finalbossframe < 5)
                        frame = 0;
                    else if (finalbossframe >= 5 && finalbossframe < 11)
                        frame = 1;
                    else if (finalbossframe >= 11 && finalbossframe < 16)
                        frame = 2;
                    else if (finalbossframe >= 16 && finalbossframe < 22)
                        frame = 3;
                    else if (finalbossframe >= 22 && finalbossframe < 27)
                        frame = 4;
                    else if (finalbossframe >= 27 && finalbossframe < 33)
                        frame = 5;
                    else if (finalbossframe >= 33 && finalbossframe < 38)
                        frame = 6;
                    else if (finalbossframe >= 38 && finalbossframe < 44)
                        frame = 7;
                    else if (finalbossframe >= 44 && finalbossframe < 49)
                        frame = 8;
                    else if (finalbossframe >= 49 && finalbossframe < 55)
                        frame = 9;
                    else if (finalbossframe >= 55 && finalbossframe < 60)
                        frame = 10;
                    else if (finalbossframe >= 60 && finalbossframe < 66)
                        frame = 11;
                    else if (finalbossframe >= 66 && finalbossframe < 71)
                        frame = 12;
                    else if (finalbossframe >= 71 && finalbossframe < 77)
                        frame = 13;
                    else if (finalbossframe >= 77 && finalbossframe < 82)
                        frame = 14;
                    else if (finalbossframe >= 82 && finalbossframe < 88)
                        frame = 15;
                    else if (finalbossframe >= 88)
                        frame = 16;

                    var pat = ctx.createPattern(FinalBossAttack[frame], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();

                }

                else if (this.type == "FinalBossFly") {

                    var frame;
                    if (finalbossframe < 8)
                        frame = 0;
                    else if (finalbossframe >= 8 && finalbossframe < 17)
                        frame = 1;
                    else if (finalbossframe >= 17 && finalbossframe < 25)
                        frame = 2;
                    else if (finalbossframe >= 25 && finalbossframe < 34)
                        frame = 3;
                    else if (finalbossframe >= 34 && finalbossframe < 42)
                        frame = 4;
                    else if (finalbossframe >= 42 && finalbossframe < 51)
                        frame = 5;
                    else if (finalbossframe >= 51 && finalbossframe < 59)
                        frame = 6;
                    else if (finalbossframe >= 59 && finalbossframe < 68)
                        frame = 7;
                    else if (finalbossframe >= 68 && finalbossframe < 76)
                        frame = 8;
                    else if (finalbossframe >= 76 && finalbossframe < 85)
                        frame = 9;
                    else if (finalbossframe >= 85)
                        frame = 10;



                    var pat = ctx.createPattern(FinalBossFly[frame], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();

                }

                else if (this.type == "FinalBossDeath") {

                    var frame;
                    if (finalbossframe < 9)
                        frame = 0;
                    else if (finalbossframe >= 9 && finalbossframe < 19)
                        frame = 1;
                    else if (finalbossframe >= 19 && finalbossframe < 28)
                        frame = 2;
                    else if (finalbossframe >= 28 && finalbossframe < 38)
                        frame = 3;
                    else if (finalbossframe >= 38 && finalbossframe < 47)
                        frame = 4;
                    else if (finalbossframe >= 47 && finalbossframe < 57)
                        frame = 5;
                    else if (finalbossframe >= 57 && finalbossframe < 66)
                        frame = 6;
                    else if (finalbossframe >= 66 && finalbossframe < 76)
                        frame = 7;
                    else if (finalbossframe >= 76 && finalbossframe < 85)
                        frame = 8;
                    else if (finalbossframe >= 85)
                        frame = 9;



                    var pat = ctx.createPattern(FinalBossDeath[frame], 'no-repeat');
                    ctx.fillStyle = pat;
                    ctx.fill();

                }



                else if (this.type == 0 && attacknow == 0 && keysdown[0] == 0 && keysdown[1] == 1) {

                    rightnum++;

                    switch (rightnum) {

                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:

                            var pat = ctx.createPattern(playermoveright1, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 9:
                        case 10:
                        case 11:
                        case 12:
                        case 13:
                        case 14:
                        case 15:
                        case 16:

                            var pat = ctx.createPattern(playermoveright2, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 17:
                        case 18:
                        case 19:
                        case 20:
                        case 21:
                        case 22:
                        case 23:
                        case 24:

                            var pat = ctx.createPattern(playermoveright3, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 25:
                        case 26:
                        case 27:
                        case 28:
                        case 29:
                        case 30:
                        case 31:
                        case 32:

                            var pat = ctx.createPattern(playermoveright4, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 33:
                        case 34:
                        case 35:
                        case 36:
                        case 37:
                        case 38:
                        case 39:
                        case 40:

                            var pat = ctx.createPattern(playermoveright5, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 41:
                        case 42:
                        case 43:
                        case 44:
                        case 45:
                        case 46:
                        case 47:
                        case 48:

                            var pat = ctx.createPattern(playermoveright6, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:

                            var pat = ctx.createPattern(playermoveright7, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 57:
                        case 58:
                        case 59:
                        case 60:
                        case 61:
                        case 62:
                        case 63:
                        case 64:

                            var pat = ctx.createPattern(playermoveright8, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();
                            if (rightnum == 64) {
                                rightnum = 0;
                            }
                            break;

                    }

                }
                else if (this.type == 0 && attacknow == 0 && keysdown[0] == 1 && keysdown[1] == 0) {

                    leftnum++;

                    switch (leftnum) {

                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:

                            var pat = ctx.createPattern(playermoveleft1, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 9:
                        case 10:
                        case 11:
                        case 12:
                        case 13:
                        case 14:
                        case 15:
                        case 16:

                            var pat = ctx.createPattern(playermoveleft2, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 17:
                        case 18:
                        case 19:
                        case 20:
                        case 21:
                        case 22:
                        case 23:
                        case 24:

                            var pat = ctx.createPattern(playermoveleft3, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 25:
                        case 26:
                        case 27:
                        case 28:
                        case 29:
                        case 30:
                        case 31:
                        case 32:

                            var pat = ctx.createPattern(playermoveleft4, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 33:
                        case 34:
                        case 35:
                        case 36:
                        case 37:
                        case 38:
                        case 39:
                        case 40:

                            var pat = ctx.createPattern(playermoveleft5, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 41:
                        case 42:
                        case 43:
                        case 44:
                        case 45:
                        case 46:
                        case 47:
                        case 48:

                            var pat = ctx.createPattern(playermoveleft6, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:

                            var pat = ctx.createPattern(playermoveleft7, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 57:
                        case 58:
                        case 59:
                        case 60:
                        case 61:
                        case 62:
                        case 63:
                        case 64:

                            var pat = ctx.createPattern(playermoveleft8, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();
                            if (leftnum == 64) {
                                leftnum = 0;
                            }
                            break;
                    }
                }
                else if (this.type == 0 && attacknow == 0 && keysdown[0] == 0 && keysdown[1] == 0 && keysdown[2] == 1 && leftorright[1] == 1) {

                    rightnum++;

                    switch (rightnum) {

                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:

                            var pat = ctx.createPattern(playermoveright1, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 9:
                        case 10:
                        case 11:
                        case 12:
                        case 13:
                        case 14:
                        case 15:
                        case 16:

                            var pat = ctx.createPattern(playermoveright2, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 17:
                        case 18:
                        case 19:
                        case 20:
                        case 21:
                        case 22:
                        case 23:
                        case 24:

                            var pat = ctx.createPattern(playermoveright3, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 25:
                        case 26:
                        case 27:
                        case 28:
                        case 29:
                        case 30:
                        case 31:
                        case 32:

                            var pat = ctx.createPattern(playermoveright4, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 33:
                        case 34:
                        case 35:
                        case 36:
                        case 37:
                        case 38:
                        case 39:
                        case 40:

                            var pat = ctx.createPattern(playermoveright5, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 41:
                        case 42:
                        case 43:
                        case 44:
                        case 45:
                        case 46:
                        case 47:
                        case 48:

                            var pat = ctx.createPattern(playermoveright6, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:

                            var pat = ctx.createPattern(playermoveright7, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 57:
                        case 58:
                        case 59:
                        case 60:
                        case 61:
                        case 62:
                        case 63:
                        case 64:

                            var pat = ctx.createPattern(playermoveright8, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();
                            if (rightnum == 64) {
                                rightnum = 0;
                            }
                            break;

                    }

                }
                else if (this.type == 0 && attacknow == 0 && keysdown[0] == 0 && keysdown[1] == 0 && keysdown[2] == 0 && keysdown[3] == 1 && leftorright[0] == 1) {

                    leftnum++;

                    switch (leftnum) {

                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:

                            var pat = ctx.createPattern(playermoveleft1, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 9:
                        case 10:
                        case 11:
                        case 12:
                        case 13:
                        case 14:
                        case 15:
                        case 16:

                            var pat = ctx.createPattern(playermoveleft2, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 17:
                        case 18:
                        case 19:
                        case 20:
                        case 21:
                        case 22:
                        case 23:
                        case 24:

                            var pat = ctx.createPattern(playermoveleft3, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 25:
                        case 26:
                        case 27:
                        case 28:
                        case 29:
                        case 30:
                        case 31:
                        case 32:

                            var pat = ctx.createPattern(playermoveleft4, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 33:
                        case 34:
                        case 35:
                        case 36:
                        case 37:
                        case 38:
                        case 39:
                        case 40:

                            var pat = ctx.createPattern(playermoveleft5, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 41:
                        case 42:
                        case 43:
                        case 44:
                        case 45:
                        case 46:
                        case 47:
                        case 48:

                            var pat = ctx.createPattern(playermoveleft6, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:

                            var pat = ctx.createPattern(playermoveleft7, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 57:
                        case 58:
                        case 59:
                        case 60:
                        case 61:
                        case 62:
                        case 63:
                        case 64:

                            var pat = ctx.createPattern(playermoveleft8, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();
                            if (leftnum == 64) {
                                leftnum = 0;
                            }
                            break;
                    }
                }
                else if (this.type == 0 && attacknow == 0 && keysdown[0] == 0 && keysdown[1] == 0 && keysdown[2] == 0 && keysdown[3] == 1 && leftorright[1] == 1) {

                    rightnum++;

                    switch (rightnum) {

                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:

                            var pat = ctx.createPattern(playermoveright1, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 9:
                        case 10:
                        case 11:
                        case 12:
                        case 13:
                        case 14:
                        case 15:
                        case 16:

                            var pat = ctx.createPattern(playermoveright2, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 17:
                        case 18:
                        case 19:
                        case 20:
                        case 21:
                        case 22:
                        case 23:
                        case 24:

                            var pat = ctx.createPattern(playermoveright3, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 25:
                        case 26:
                        case 27:
                        case 28:
                        case 29:
                        case 30:
                        case 31:
                        case 32:

                            var pat = ctx.createPattern(playermoveright4, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 33:
                        case 34:
                        case 35:
                        case 36:
                        case 37:
                        case 38:
                        case 39:
                        case 40:

                            var pat = ctx.createPattern(playermoveright5, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 41:
                        case 42:
                        case 43:
                        case 44:
                        case 45:
                        case 46:
                        case 47:
                        case 48:

                            var pat = ctx.createPattern(playermoveright6, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:

                            var pat = ctx.createPattern(playermoveright7, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 57:
                        case 58:
                        case 59:
                        case 60:
                        case 61:
                        case 62:
                        case 63:
                        case 64:

                            var pat = ctx.createPattern(playermoveright8, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();
                            if (rightnum == 64) {
                                rightnum = 0;
                            }
                            break;

                    }

                }
                else if (this.type == 0 && attacknow == 0 && keysdown[0] == 0 && keysdown[1] == 0 && keysdown[2] == 1 && leftorright[0] == 1) {

                    leftnum++;

                    switch (leftnum) {

                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:

                            var pat = ctx.createPattern(playermoveleft1, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 9:
                        case 10:
                        case 11:
                        case 12:
                        case 13:
                        case 14:
                        case 15:
                        case 16:

                            var pat = ctx.createPattern(playermoveleft2, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 17:
                        case 18:
                        case 19:
                        case 20:
                        case 21:
                        case 22:
                        case 23:
                        case 24:

                            var pat = ctx.createPattern(playermoveleft3, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 25:
                        case 26:
                        case 27:
                        case 28:
                        case 29:
                        case 30:
                        case 31:
                        case 32:

                            var pat = ctx.createPattern(playermoveleft4, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 33:
                        case 34:
                        case 35:
                        case 36:
                        case 37:
                        case 38:
                        case 39:
                        case 40:

                            var pat = ctx.createPattern(playermoveleft5, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 41:
                        case 42:
                        case 43:
                        case 44:
                        case 45:
                        case 46:
                        case 47:
                        case 48:

                            var pat = ctx.createPattern(playermoveleft6, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:

                            var pat = ctx.createPattern(playermoveleft7, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 57:
                        case 58:
                        case 59:
                        case 60:
                        case 61:
                        case 62:
                        case 63:
                        case 64:

                            var pat = ctx.createPattern(playermoveleft8, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();
                            if (leftnum == 64) {
                                leftnum = 0;
                            }
                            break;
                    }
                }
                else if (this.type == 0 && attacknow == 0 && keysdown[0] == 0 && keysdown[1] == 0 && keysdown[2] == 0 && keysdown[3] == 0 && leftorright[1] == 1) {

                    idlenum++;

                    switch (idlenum) {

                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:

                            var pat = ctx.createPattern(playeridle1, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 9:
                        case 10:
                        case 11:
                        case 12:
                        case 13:
                        case 14:
                        case 15:
                        case 16:

                            var pat = ctx.createPattern(playeridle2, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 17:
                        case 18:
                        case 19:
                        case 20:
                        case 21:
                        case 22:
                        case 23:
                        case 24:

                            var pat = ctx.createPattern(playeridle3, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 25:
                        case 26:
                        case 27:
                        case 28:
                        case 29:
                        case 30:
                        case 31:
                        case 32:

                            var pat = ctx.createPattern(playeridle4, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 33:
                        case 34:
                        case 35:
                        case 36:
                        case 37:
                        case 38:
                        case 39:
                        case 40:

                            var pat = ctx.createPattern(playeridle5, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 41:
                        case 42:
                        case 43:
                        case 44:
                        case 45:
                        case 46:
                        case 47:
                        case 48:

                            var pat = ctx.createPattern(playeridle6, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:

                            var pat = ctx.createPattern(playeridle7, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 57:
                        case 58:
                        case 59:
                        case 60:
                        case 61:
                        case 62:
                        case 63:
                        case 64:

                            var pat = ctx.createPattern(playeridle8, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 65:
                        case 66:
                        case 67:
                        case 68:
                        case 69:
                        case 70:
                        case 71:
                        case 72:

                            var pat = ctx.createPattern(playeridle9, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 73:
                        case 74:
                        case 75:
                        case 76:
                        case 77:
                        case 78:
                        case 79:
                        case 80:

                            var pat = ctx.createPattern(playeridle10, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;
                        case 81:
                        case 82:
                        case 83:
                        case 84:
                        case 85:
                        case 86:
                        case 87:
                        case 88:

                            var pat = ctx.createPattern(playeridle11, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;
                        case 89:
                        case 90:
                        case 91:
                        case 92:
                        case 93:
                        case 94:
                        case 95:
                        case 96:

                            var pat = ctx.createPattern(playeridle12, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;
                        case 97:
                        case 98:
                        case 99:
                        case 100:
                        case 101:
                        case 102:
                        case 103:
                        case 104:

                            var pat = ctx.createPattern(playeridle13, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;
                        case 105:
                        case 106:
                        case 107:
                        case 108:
                        case 109:
                        case 110:
                        case 111:
                        case 112:

                            var pat = ctx.createPattern(playeridle14, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;
                        case 113:
                        case 114:
                        case 115:
                        case 116:
                        case 117:
                        case 118:
                        case 119:
                        case 120:

                            var pat = ctx.createPattern(playeridle15, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();
                            if (idlenum == 120) {
                                idlenum = 0;
                            }
                            break;

                    }
                }
                else if (this.type == 0 && attacknow == 0 && keysdown[0] == 0 && keysdown[1] == 0 && keysdown[2] == 0 && keysdown[3] == 0 && leftorright[0] == 1) {

                    idlenum++;

                    switch (idlenum) {

                        case 0:
                        case 1:
                        case 2:
                        case 3:
                        case 4:
                        case 5:
                        case 6:
                        case 7:
                        case 8:

                            var pat = ctx.createPattern(playeridleleft1, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 9:
                        case 10:
                        case 11:
                        case 12:
                        case 13:
                        case 14:
                        case 15:
                        case 16:

                            var pat = ctx.createPattern(playeridleleft2, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 17:
                        case 18:
                        case 19:
                        case 20:
                        case 21:
                        case 22:
                        case 23:
                        case 24:

                            var pat = ctx.createPattern(playeridleleft3, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 25:
                        case 26:
                        case 27:
                        case 28:
                        case 29:
                        case 30:
                        case 31:
                        case 32:

                            var pat = ctx.createPattern(playeridleleft4, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 33:
                        case 34:
                        case 35:
                        case 36:
                        case 37:
                        case 38:
                        case 39:
                        case 40:

                            var pat = ctx.createPattern(playeridleleft5, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 41:
                        case 42:
                        case 43:
                        case 44:
                        case 45:
                        case 46:
                        case 47:
                        case 48:

                            var pat = ctx.createPattern(playeridleleft6, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 49:
                        case 50:
                        case 51:
                        case 52:
                        case 53:
                        case 54:
                        case 55:
                        case 56:

                            var pat = ctx.createPattern(playeridleleft7, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 57:
                        case 58:
                        case 59:
                        case 60:
                        case 61:
                        case 62:
                        case 63:
                        case 64:

                            var pat = ctx.createPattern(playeridleleft8, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 65:
                        case 66:
                        case 67:
                        case 68:
                        case 69:
                        case 70:
                        case 71:
                        case 72:

                            var pat = ctx.createPattern(playeridleleft9, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;

                        case 73:
                        case 74:
                        case 75:
                        case 76:
                        case 77:
                        case 78:
                        case 79:
                        case 80:

                            var pat = ctx.createPattern(playeridleleft10, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;
                        case 81:
                        case 82:
                        case 83:
                        case 84:
                        case 85:
                        case 86:
                        case 87:
                        case 88:

                            var pat = ctx.createPattern(playeridleleft11, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;
                        case 89:
                        case 90:
                        case 91:
                        case 92:
                        case 93:
                        case 94:
                        case 95:
                        case 96:

                            var pat = ctx.createPattern(playeridleleft12, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;
                        case 97:
                        case 98:
                        case 99:
                        case 100:
                        case 101:
                        case 102:
                        case 103:
                        case 104:

                            var pat = ctx.createPattern(playeridleleft13, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;
                        case 105:
                        case 106:
                        case 107:
                        case 108:
                        case 109:
                        case 110:
                        case 111:
                        case 112:

                            var pat = ctx.createPattern(playeridleleft14, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();

                            break;
                        case 113:
                        case 114:
                        case 115:
                        case 116:
                        case 117:
                        case 118:
                        case 119:
                        case 120:

                            var pat = ctx.createPattern(playeridleleft15, 'no-repeat');
                            ctx.fillStyle = pat;

                            ctx.fill();
                            if (idlenum == 120) {
                                idlenum = 0;
                            }
                            break;

                    }
                }
                else if (this.type == 0 && attacknow == 1 && leftorright[1] == 1) {
                    attacknum++;
                    switch (combos) {
                        case 1:
                        case 4:
                        case 0:
                            switch (attacknum) {

                                case 0:
                                case 1:
                                case 2:
                                case 3:
                                case 4:

                                    var pat = ctx.createPattern(playerattack1, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 5:
                                case 6:
                                case 7:
                                case 8:

                                    var pat = ctx.createPattern(playerattack2, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 9:
                                case 10:
                                case 11:
                                case 12:

                                    var pat = ctx.createPattern(playerattack3, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 13:
                                case 14:
                                case 15:
                                case 16:

                                    var pat = ctx.createPattern(playerattack4, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 17:
                                case 18:
                                case 19:
                                case 20:

                                    var pat = ctx.createPattern(playerattack5, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 21:
                                case 22:
                                case 23:
                                case 24:

                                    var pat = ctx.createPattern(playerattack6, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 25:
                                case 26:
                                case 27:
                                case 28:

                                    var pat = ctx.createPattern(playerattack7, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();
                                    if (attacknum == 28) {
                                        attacknum = 0;
                                    }
                                    break;

                            }
                            break;
                        case 2:
                            switch (attacknum) {

                                case 0:
                                case 1:
                                case 2:
                                case 3:
                                case 4:

                                    var pat = ctx.createPattern(playerattack4, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 5:
                                case 6:
                                case 7:
                                case 8:

                                    var pat = ctx.createPattern(playerattack7, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 9:
                                case 10:
                                case 11:
                                case 12:

                                    var pat = ctx.createPattern(playerattack8, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 13:
                                case 14:
                                case 15:
                                case 16:

                                    var pat = ctx.createPattern(playerattack9, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 17:
                                case 18:
                                case 19:
                                case 20:

                                    var pat = ctx.createPattern(playerattack10, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 21:
                                case 22:
                                case 23:
                                case 24:

                                    var pat = ctx.createPattern(playerattack11, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 25:
                                case 26:
                                case 27:
                                case 28:

                                    var pat = ctx.createPattern(playerattack12, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();
                                    if (attacknum == 28) {
                                        attacknum = 0;
                                    }
                                    break;

                            }
                            break;
                        case 3:
                            switch (attacknum) {

                                case 0:
                                case 1:
                                case 2:
                                case 3:
                                case 4:

                                    var pat = ctx.createPattern(playerattack13, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 5:
                                case 6:
                                case 7:
                                case 8:

                                    var pat = ctx.createPattern(playerattack14, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 9:
                                case 10:
                                case 11:
                                case 12:

                                    var pat = ctx.createPattern(playerattack15, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 13:
                                case 14:
                                case 15:
                                case 16:

                                    var pat = ctx.createPattern(playerattack16, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 17:
                                case 18:
                                case 19:
                                case 20:

                                    var pat = ctx.createPattern(playerattack17, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 21:
                                case 22:
                                case 23:
                                case 24:

                                    var pat = ctx.createPattern(playerattack18, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 25:
                                case 26:
                                case 27:
                                case 28:

                                    var pat = ctx.createPattern(playerattack19, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();
                                    if (attacknum == 28) {
                                        attacknum = 0;
                                    }
                                    break;
                            }
                            break;

                    }
                }
                else if (this.type == 0 && attacknow == 1 && leftorright[0] == 1) {
                    attacknum++;
                    switch (combos) {
                        case 1:
                        case 4:
                        case 0:
                            switch (attacknum) {

                                case 0:
                                case 1:
                                case 2:
                                case 3:
                                case 4:

                                    var pat = ctx.createPattern(playerattackleft1, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 5:
                                case 6:
                                case 7:
                                case 8:

                                    var pat = ctx.createPattern(playerattackleft2, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 9:
                                case 10:
                                case 11:
                                case 12:

                                    var pat = ctx.createPattern(playerattackleft3, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 13:
                                case 14:
                                case 15:
                                case 16:

                                    var pat = ctx.createPattern(playerattackleft4, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 17:
                                case 18:
                                case 19:
                                case 20:

                                    var pat = ctx.createPattern(playerattackleft5, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 21:
                                case 22:
                                case 23:
                                case 24:

                                    var pat = ctx.createPattern(playerattackleft6, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 25:
                                case 26:
                                case 27:
                                case 28:

                                    var pat = ctx.createPattern(playerattackleft7, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();
                                    if (attacknum == 28) {
                                        attacknum = 0;
                                    }
                                    break;

                            }
                            break;
                        case 2:
                            switch (attacknum) {

                                case 0:
                                case 1:
                                case 2:
                                case 3:
                                case 4:

                                    var pat = ctx.createPattern(playerattackleft4, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 5:
                                case 6:
                                case 7:
                                case 8:

                                    var pat = ctx.createPattern(playerattackleft7, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 9:
                                case 10:
                                case 11:
                                case 12:

                                    var pat = ctx.createPattern(playerattackleft8, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 13:
                                case 14:
                                case 15:
                                case 16:

                                    var pat = ctx.createPattern(playerattackleft9, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 17:
                                case 18:
                                case 19:
                                case 20:

                                    var pat = ctx.createPattern(playerattackleft10, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 21:
                                case 22:
                                case 23:
                                case 24:

                                    var pat = ctx.createPattern(playerattackleft11, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 25:
                                case 26:
                                case 27:
                                case 28:

                                    var pat = ctx.createPattern(playerattackleft12, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();
                                    if (attacknum == 28) {
                                        attacknum = 0;
                                    }
                                    break;

                            }
                            break;
                        case 3:
                            switch (attacknum) {

                                case 0:
                                case 1:
                                case 2:
                                case 3:
                                case 4:

                                    var pat = ctx.createPattern(playerattackleft13, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 5:
                                case 6:
                                case 7:
                                case 8:

                                    var pat = ctx.createPattern(playerattackleft14, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 9:
                                case 10:
                                case 11:
                                case 12:

                                    var pat = ctx.createPattern(playerattackleft15, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 13:
                                case 14:
                                case 15:
                                case 16:

                                    var pat = ctx.createPattern(playerattackleft16, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 17:
                                case 18:
                                case 19:
                                case 20:

                                    var pat = ctx.createPattern(playerattackleft17, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 21:
                                case 22:
                                case 23:
                                case 24:

                                    var pat = ctx.createPattern(playerattackleft18, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();

                                    break;

                                case 25:
                                case 26:
                                case 27:
                                case 28:

                                    var pat = ctx.createPattern(playerattackleft19, 'no-repeat');
                                    ctx.fillStyle = pat;

                                    ctx.fill();
                                    if (attacknum == 28) {
                                        attacknum = 0;
                                    }
                                    break;
                            }
                            break;

                    }
                }

                ctx.fillRect(this.width / -2, this.height / -2, this.width, this.height);

                ctx.restore();

            }

            this.newPos = function () {
                this.x += this.speedX;
                this.y += this.speedY;
            }
        }

        function FinalBossAttacks() {
            FinalBossAttackPattern++;
            switch (FinalBossAttackPattern) {

                case 1: case 2: case 3: case 4: case 5: case 7: case 8: case 13: case 14: case 20: case 21: case 22: case 23: case 24:
                    FinalBossFlys();

                    FinalBossFlying = true;
                    finalbossframe = 0;


                    break;

                case 6: case 9: case 16:
                    FinalBossSpell();
                    break;
                case 10: case 17:
                    TheFinalBoss.speedX = -5;
                    setTimeout(function () {
                        TheFinalBoss.speedX = 0;

                    }, 1000)

                    ChaosGolem = new component(608, 608, "ChaosGolem", -150, 250, 750, 15);
                    ChaosGolem.speedX = 0.35;
                    Bossmaxhealth = 750;
                    var color;


                    if (ChaosGolem.hp >= (Bossmaxhealth / 2)) {
                        color = "Purple";
                    }
                    if (ChaosGolem.hp <= (Bossmaxhealth / 2)) {
                        color = "Yellow";
                    }
                    if (ChaosGolem.hp <= (Bossmaxhealth / 4)) {
                        color = "rgb(171, 80, 5)";

                    }

                    document.getElementById('BossHealth').innerHTML = ChaosGolem.hp;
                    document.getElementById('BossHealthBox').style.width = (Math.round(ChaosGolem.hp * 1000) / 1000 * (1200 / Bossmaxhealth)) + "px";
                    document.getElementById('BossHealthContainer').style.display = "block";
                    document.getElementById('BossmaxHp').innerHTML = ChaosGolem.hp;
                    document.getElementById('BossHealth').innerHTML = "Nadir Drach's minion " + ChaosGolem.hp;
                    document.getElementById('BossReturn').style.display = "block";
                    bosstimervalue = 60;
                    document.getElementById('BossReturnTimer').innerHTML = bosstimervalue;
                    bosstimer = setInterval(function () {
                        if (!pauseineffect) bosstimervalue--;
                        document.getElementById('BossReturnTimer').innerHTML = bosstimervalue;
                        if (bosstimervalue <= 0) {
                            Bossmaxhealth = 20000;
                            var color;


                            if (TheFinalBoss.hp >= (Bossmaxhealth / 2)) {
                                color = "Purple";
                            }
                            if (TheFinalBoss.hp <= (Bossmaxhealth / 2)) {
                                color = "Yellow";
                            }
                            if (TheFinalBoss.hp <= (Bossmaxhealth / 4)) {
                                color = "rgb(171, 80, 5)";

                            }
                            document.getElementById('BossHealthBox').style.background = color
                            clearInterval(bosstimer);
                            document.getElementById('BossReturn').style.display = "none";
                            document.getElementById('BossHealth').innerHTML = TheFinalBoss.hp;
                            document.getElementById('BossHealthBox').style.width = (Math.round(TheFinalBoss.hp * 1000) / 1000 * (1200 / Bossmaxhealth)) + "px";
                            document.getElementById('BossHealthContainer').style.display = "block";
                            document.getElementById('BossmaxHp').innerHTML = TheFinalBoss.hp;
                            document.getElementById('BossHealth').innerHTML = "Supreme Sorcerer Nadir Drach " + TheFinalBoss.hp;
                            SummoningPhase = false;
                            FinalBossAttacks();



                        }
                    }, 1000);

                    break;
                case 11: case 18:
                    TheFinalBoss.speedX = 1;
                    finalbossreturn = setInterval(function () {
                        if (TheFinalBoss.x >= -100) {
                            TheFinalBoss.speedX = 0;
                            FinalBossAttacks();
                            clearInterval(finalbossreturn);
                        }
                    }, 100);
                    break;
                case 12: case 15: case 19:
                    setTimeout(function () {
                        FinalBossAttacks();;
                    }, 20000);
                    break;
                case 25:
                    setTimeout(function () {
                        FinalBossAttackPattern = 0;
                        FinalBossAttacks();;
                    }, 20000);
                    break;
            }

        }
        var finalbossreturn;
        var bosstimer;
        var bosstimervalue = 60;
        function FinalBossSpell() {
            TheFinalBoss.type = "FinalBossAttack";

            setTimeout(function () {
                for (i = 0; i < 22; i++) {
                    projectile[i] = new component(200, 200, "casterpro", TheFinalBoss.x + 150, TheFinalBoss.y + 150)

                }
                projectile[0].speedX = 0.5 * 5;
                projectile[0].speedY = 1 * 5;
                projectile[1].speedX = 0.55 * 5;
                projectile[1].speedY = 0.9 * 5;
                projectile[2].speedX = 0.6 * 5;
                projectile[2].speedY = 0.8 * 5;
                projectile[3].speedX = 0.65 * 5;
                projectile[3].speedY = 0.7 * 5;
                projectile[4].speedX = 0.7 * 5;
                projectile[4].speedY = 0.6 * 5;
                projectile[5].speedX = 0.75 * 5;
                projectile[5].speedY = 0.5 * 5;
                projectile[6].speedX = 0.8 * 5;
                projectile[6].speedY = 0.4 * 5;
                projectile[7].speedX = 0.85 * 5;
                projectile[7].speedY = 0.3 * 5;
                projectile[8].speedX = 0.9 * 5;
                projectile[8].speedY = 0.2 * 5;
                projectile[9].speedX = 0.95 * 5;
                projectile[9].speedY = 0.1 * 5;
                projectile[10].speedX = 1 * 5;
                projectile[10].speedY = 0;
                projectile[11].speedX = 0.5 * 5;
                projectile[11].speedY = -1 * 5;
                projectile[12].speedX = 0.55 * 5;
                projectile[12].speedY = -0.9 * 5;
                projectile[13].speedX = 0.6 * 5;
                projectile[13].speedY = -0.8 * 5;
                projectile[14].speedX = 0.65 * 5;
                projectile[14].speedY = -0.7 * 5;
                projectile[15].speedX = 0.7 * 5;
                projectile[15].speedY = -0.6 * 5;
                projectile[16].speedX = 0.75 * 5;
                projectile[16].speedY = -0.5 * 5;
                projectile[17].speedX = 0.8 * 5;
                projectile[17].speedY = -0.4 * 5;
                projectile[18].speedX = 0.85 * 5;
                projectile[18].speedY = -0.3 * 5;
                projectile[19].speedX = 0.9 * 5;
                projectile[19].speedY = -0.2 * 5;
                projectile[20].speedX = 0.95 * 5;
                projectile[20].speedY = - 0.1 * 5;
                projectile[21].speedX = 1 * 5;
                projectile[21].speedY = 0;
            }, 800);
            setTimeout(function () {
                for (i = 22; i < 44; i++) {
                    projectile[i] = new component(200, 200, "casterpro", TheFinalBoss.x + 150, TheFinalBoss.y + 150)

                }
                projectile[22].speedX = 0.5 * 5;
                projectile[22].speedY = 1 * 5;
                projectile[23].speedX = 0.55 * 5;
                projectile[23].speedY = 0.9 * 5;
                projectile[24].speedX = 0.6 * 5;
                projectile[24].speedY = 0.8 * 5;
                projectile[25].speedX = 0.65 * 5;
                projectile[25].speedY = 0.7 * 5;
                projectile[26].speedX = 0.7 * 5;
                projectile[26].speedY = 0.6 * 5;
                projectile[27].speedX = 0.75 * 5;
                projectile[27].speedY = 0.5 * 5;
                projectile[28].speedX = 0.8 * 5;
                projectile[28].speedY = 0.4 * 5;
                projectile[29].speedX = 0.85 * 5;
                projectile[29].speedY = 0.3 * 5;
                projectile[30].speedX = 0.9 * 5;
                projectile[30].speedY = 0.2 * 5;
                projectile[31].speedX = 0.95 * 5;
                projectile[31].speedY = 0.1 * 5;
                projectile[32].speedX = 1 * 5;
                projectile[32].speedY = 0;
                projectile[33].speedX = 0.5 * 5;
                projectile[33].speedY = -1 * 5;
                projectile[34].speedX = 0.55 * 5;
                projectile[34].speedY = -0.9 * 5;
                projectile[35].speedX = 0.6 * 5;
                projectile[35].speedY = -0.8 * 5;
                projectile[36].speedX = 0.65 * 5;
                projectile[36].speedY = -0.7 * 5;
                projectile[37].speedX = 0.7 * 5;
                projectile[37].speedY = -0.6 * 5;
                projectile[38].speedX = 0.75 * 5;
                projectile[38].speedY = -0.5 * 5;
                projectile[39].speedX = 0.8 * 5;
                projectile[39].speedY = -0.4 * 5;
                projectile[40].speedX = 0.85 * 5;
                projectile[40].speedY = -0.3 * 5;
                projectile[41].speedX = 0.9 * 5;
                projectile[41].speedY = -0.2 * 5;
                projectile[42].speedX = 0.95 * 5;
                projectile[42].speedY = - 0.1 * 5;
                projectile[43].speedX = 1 * 5;
                projectile[43].speedY = 0;
            }, 4000);
            setTimeout(function () {
                TheFinalBoss.type = "FinalBossIdle";
                FinalBossAttacks();

            }, 5000);


        }

        function updateGameArea() {
            if (!pauseineffect) {
                myGameArea.clear();
                if (ast == 0) {
                    player = new component(80, 80, 0, 400, 300, 1, 1);
                    GivePlayerBonuses();
                    for (i = 0; i < 41; i++) {

                        fixinventory(Inventory[i], i);

                    }
                    ast++

                }

                player.newPos();
                player.update();
                Checkobs();
                if (finalbossactive) {
                    TheFinalBoss.update();
                    TheFinalBoss.newPos();

                }
                if (ChaosGolem != null) {
                    ChaosGolem.update();
                    ChaosGolem.newPos();
                    if (ChaosGolem.x >= 1200) {
                        ChaosGolem.speedX = 0
                        lives -= ChaosGolem.dmg;
                        ChaosGolem = null;
                        diff += 0.5;
                    }
                    if (lives <= 0)
                        gameStop();
                }
                for (i = 0; i < projectile.length + 1; i++) {
                    if (projectile[i] != null) {
                        if (projectile[i].type == "casterpro") {

                            projectile[i].update();
                            projectile[i].newPos();
                            if (projectile[i].x < (player.x + 15) && projectile[i].x > (player.x - 15)) {
                                if (projectile[i].y < (player.y + 15) && projectile[i].y > (player.y - 15)) {
                                    if (finalbossactive) {
                                        playerknockback2(projectile[i].speedY, projectile[i].speedX);
                                        lives--;
                                        document.getElementById('lives').innerHTML = lives;
                                        document.getElementById('maxHP').innerHTML = maxhealth;
                                        document.getElementById('Livesbox').style.width = (lives * (600 / maxhealth)) + "px";
                                        backgroundflash();
                                        ChaosGolemShake();
                                    }
                                    else
                                        playerknockback(projectile[i].speedY, projectile[i].speedX);
                                    projectile[i] = null;

                                }
                            }
                            if (projectile[i] != null) {
                                if (projectile[i].x >= 1300)
                                    projectile[i] = null;
                                else if (projectile[i].y >= 800)
                                    projectile[i] = null;
                                else if (projectile[i].x <= -75)
                                    projectile[i] = null;
                                else if (projectile[i].y <= -75)
                                    projectile[i] = null;
                            }
                        }
                    }
                }

                fiendmove();

                if (helperactive) {
                    helperAI();
                    helper.update();
                    helper.newPos();
                }
                else {
                    helper = null;
                    LifeDrainKeyFrame = 0;
                }
                if (helper2active) {
                    helperAI2();
                    helper2.update();
                    helper2.newPos();
                }
                else {
                    helper2 = null;
                    LifeDrainKeyFrame2 = 0;
                }
                if (helper3active) {
                    helperAI3();
                    helper3.update();
                    helper3.newPos();
                }
                else {
                    helper3 = null;
                    LifeDrainKeyFrame3 = 0;
                }

                FiendSpawn();
                if (ability1 === true) {
                    CheckFiendDetahligthning();

                }
                document.getElementById('lives').innerHTML = lives;
                currentframe++;
                currentframe1++;
                shakeIt++;
                if (currentframe >= 50) {
                    currentframe = 0;
                    document.getElementById('playerdamage').innerHTML = playerdmg;
                    document.getElementById('playerhealth').innerHTML = maxhealth;
                    document.getElementById('playerknockback').innerHTML = knockbackstrength;
                    document.getElementById('playerreach').innerHTML = reachlvl;
                    document.getElementById('playerdarkness').innerHTML = Darkness;
                    document.getElementById('darkness').innerHTML = " " + Darkness;
                    document.getElementById('playerEnergyRegen').innerHTML = Math.round(Eregen * 100) / 100;
                    document.getElementById('playerChaosRegen').innerHTML = Math.round(2500 / (bosskilled + 1)) / 1000;


                }
                if (currentframe1 >= 147)
                    currentframe1 = 0;
                if (finalbossframe >= 95 && FinalBossFlying != true) {
                    finalbossframe = 0;
                }

                finalbossframe += 0.5;

                if (shakeIt == 250) {
                    shakeIt = 0;
                }
                if (BossEvent && TheFinalBoss == null) {
                    ChaosGolemShake();

                }



                if (FinalBossFlying === true) {
                    if (TheFinalBoss.x < (player.x - 100) && TheFinalBoss.x > (player.x - 200)) {
                        if (TheFinalBoss.y < (player.y - 100) && TheFinalBoss.y > (player.y - 200)) {

                            if (playerknockbackbool === false) {
                                playerknockback2(TheFinalBoss.speedY * 2, TheFinalBoss.speedX * 2);
                                lives--;
                                document.getElementById('lives').innerHTML = lives;
                                document.getElementById('maxHP').innerHTML = maxhealth;
                                document.getElementById('Livesbox').style.width = (lives * (600 / maxhealth)) + "px";
                                backgroundflash();
                                ChaosGolemShake();
                                if (lives <= 0) {
                                    TheFinalBoss = null;
                                    BossEvent = false;
                                    finalbossactive = false;
                                    gameStop();
                                }

                            }
                        }
                    }
                    if (TheFinalBoss.x >= xtarget && TheFinalBoss.y >= ytarget) {

                        FinalBossFlying = false;
                        TheFinalBoss.type = "FinalBossIdle";

                        TheFinalBoss.speedX *= -1;
                        TheFinalBoss.speedY *= -1;
                        ReturnBoss = setInterval(function () {
                            if (TheFinalBoss.x <= -100) {
                                TheFinalBoss.speedX = 0;
                                TheFinalBoss.speedY = 0;

                                finalbossframe = 0;
                                setTimeout(function () {
                                    FinalBossAttacks();
                                }, 100);
                                clearInterval(ReturnBoss);
                            }

                        }, 100);

                    }

                }

            }
        }
        var Lightning = [];
        var ReturnBoss;
        function loadimg() {
            document.getElementById('Deathscreen').style.display = "none";
            document.getElementById('BossHealthContainer').style.display = "none";
            for (i = 0; i < 8; i++) {
                WitchWalk[i] = new Image();
                WitchWalk[i].src = 'Enemyani/WitchWalk' + (i + 1) + '.png';
                WolfWalk[i] = new Image();
                WolfWalk[i].src = 'Enemyani/WolfWalk' + (i + 1) + '.png';

            }
            for (i = 0; i < 61; i++) {

                CasterAttack[i] = new Image();
                CasterAttack[i].src = 'SpellsSep/spell2/Spell' + (i + 1) + '.png';

            }
            for (i = 0; i < 7; i++) {
                GolemWalk[i] = new Image();
                GolemWalk[i].src = 'Enemyani/GolemWalk' + (i + 1) + '.png';
                ChaosGolemWalk[i] = new Image();
                ChaosGolemWalk[i].src = 'Enemyani/GolemBossWalk' + (i + 1) + '.png';

            }
            for (i = 0; i < 61; i++) {
                LifeDrainImages[i] = new Image();
                LifeDrainImages[i].src = 'SpellsSep/LifeDrain/LifeDrain' + (i + 1) + '.png';

            }
            for (i = 0; i < 6; i++) {
                CasterWalk[i] = new Image();
                CasterWalk[i].src = 'Enemyani/Casterwalk' + (i + 1) + '.png';


            }
            for (i = 0; i < 17; i++) {

                FinalBossAttack[i] = new Image();
                FinalBossAttack[i].src = 'Enemyani/FinalBoss/Attack' + (i + 1) + '.png';

            }
            for (i = 0; i < 10; i++) {

                FinalBossDeath[i] = new Image();
                FinalBossDeath[i].src = 'Enemyani/FinalBoss/Death' + (i + 1) + '.png';

            }
            for (i = 0; i < 11; i++) {

                FinalBossFly[i] = new Image();
                FinalBossFly[i].src = 'Enemyani/FinalBoss/Fly' + (i + 1) + '.png';

            }
            for (i = 0; i < 19; i++) {

                FinalBossIdle[i] = new Image();
                FinalBossIdle[i].src = 'Enemyani/FinalBoss/Idle' + (i + 1) + '.png';

            }


            CasterAttacks[1] = new Image();
            CasterAttacks[1].src = 'Enemyani/Casterattack1.png';



            backgroundimg.src = 'PlayerMove/IMG_1468.jpg';

            playermoveright1.src = 'PlayerMove/Playermoveright1.png';
            playermoveright2.src = 'PlayerMove/Playermoveright2.png';
            playermoveright3.src = 'PlayerMove/Playermoveright3.png';
            playermoveright4.src = 'PlayerMove/Playermoveright4.png';
            playermoveright5.src = 'PlayerMove/Playermoveright5.png';
            playermoveright6.src = 'PlayerMove/Playermoveright6.png';
            playermoveright7.src = 'PlayerMove/Playermoveright7.png';
            playermoveright8.src = 'PlayerMove/Playermoveright8.png';

            playermoveleft1.src = 'PlayerMove/Playermoveleft1.png';
            playermoveleft2.src = 'PlayerMove/Playermoveleft2.png';
            playermoveleft3.src = 'PlayerMove/Playermoveleft3.png';
            playermoveleft4.src = 'PlayerMove/Playermoveleft4.png';
            playermoveleft5.src = 'PlayerMove/Playermoveleft5.png';
            playermoveleft6.src = 'PlayerMove/Playermoveleft6.png';
            playermoveleft7.src = 'PlayerMove/Playermoveleft7.png';
            playermoveleft8.src = 'PlayerMove/Playermoveleft8.png';

            playerattack1.src = 'PlayerMove/Playerattack1.png';
            playerattack2.src = 'PlayerMove/Playerattack2.png';
            playerattack3.src = 'PlayerMove/Playerattack3.png';
            playerattack4.src = 'PlayerMove/Playerattack4.png';
            playerattack5.src = 'PlayerMove/Playerattack5.png';
            playerattack6.src = 'PlayerMove/Playerattack6.png';
            playerattack7.src = 'PlayerMove/Playerattack7.png';
            playerattack8.src = 'PlayerMove/Playerattack8.png';
            playerattack9.src = 'PlayerMove/Playerattack9.png';
            playerattack10.src = 'PlayerMove/Playerattack10.png';
            playerattack11.src = 'PlayerMove/Playerattack11.png';
            playerattack12.src = 'PlayerMove/Playerattack12.png';
            playerattack13.src = 'PlayerMove/Playerattack13.png';
            playerattack14.src = 'PlayerMove/Playerattack14.png';
            playerattack15.src = 'PlayerMove/Playerattack15.png';
            playerattack16.src = 'PlayerMove/Playerattack16.png';
            playerattack17.src = 'PlayerMove/Playerattack17.png';
            playerattack18.src = 'PlayerMove/Playerattack18.png';
            playerattack19.src = 'PlayerMove/Playerattack19.png';

            playerattackleft1.src = 'PlayerMove/Playerattackleft1.png';
            playerattackleft2.src = 'PlayerMove/Playerattackleft2.png';
            playerattackleft3.src = 'PlayerMove/Playerattackleft3.png';
            playerattackleft4.src = 'PlayerMove/Playerattackleft4.png';
            playerattackleft5.src = 'PlayerMove/Playerattackleft5.png';
            playerattackleft6.src = 'PlayerMove/Playerattackleft6.png';
            playerattackleft7.src = 'PlayerMove/Playerattackleft7.png';
            playerattackleft8.src = 'PlayerMove/Playerattackleft8.png';
            playerattackleft9.src = 'PlayerMove/Playerattackleft9.png';
            playerattackleft10.src = 'PlayerMove/Playerattackleft10.png';
            playerattackleft11.src = 'PlayerMove/Playerattackleft11.png';
            playerattackleft12.src = 'PlayerMove/Playerattackleft12.png';
            playerattackleft13.src = 'PlayerMove/Playerattackleft13.png';
            playerattackleft14.src = 'PlayerMove/Playerattackleft14.png';
            playerattackleft15.src = 'PlayerMove/Playerattackleft15.png';
            playerattackleft16.src = 'PlayerMove/Playerattackleft16.png';
            playerattackleft17.src = 'PlayerMove/Playerattackleft17.png';
            playerattackleft18.src = 'PlayerMove/Playerattackleft18.png';
            playerattackleft19.src = 'PlayerMove/Playerattackleft19.png';

            playeridle1.src = 'PlayerMove/Playeridle1.png';
            playeridle2.src = 'PlayerMove/Playeridle2.png';
            playeridle3.src = 'PlayerMove/Playeridle3.png';
            playeridle4.src = 'PlayerMove/Playeridle4.png';
            playeridle5.src = 'PlayerMove/Playeridle5.png';
            playeridle6.src = 'PlayerMove/Playeridle6.png';
            playeridle7.src = 'PlayerMove/Playeridle7.png';
            playeridle8.src = 'PlayerMove/Playeridle8.png';
            playeridle9.src = 'PlayerMove/Playeridle9.png';
            playeridle10.src = 'PlayerMove/Playeridle10.png';
            playeridle11.src = 'PlayerMove/Playeridle11.png';
            playeridle12.src = 'PlayerMove/Playeridle12.png';
            playeridle13.src = 'PlayerMove/Playeridle13.png';
            playeridle14.src = 'PlayerMove/Playeridle14.png';
            playeridle15.src = 'PlayerMove/Playeridle15.png';

            playeridleleft1.src = 'PlayerMove/Playeridleleft1.png';
            playeridleleft2.src = 'PlayerMove/Playeridleleft2.png';
            playeridleleft3.src = 'PlayerMove/Playeridleleft3.png';
            playeridleleft4.src = 'PlayerMove/Playeridleleft4.png';
            playeridleleft5.src = 'PlayerMove/Playeridleleft5.png';
            playeridleleft6.src = 'PlayerMove/Playeridleleft6.png';
            playeridleleft7.src = 'PlayerMove/Playeridleleft7.png';
            playeridleleft8.src = 'PlayerMove/Playeridleleft8.png';
            playeridleleft9.src = 'PlayerMove/Playeridleleft9.png';
            playeridleleft10.src = 'PlayerMove/Playeridleleft10.png';
            playeridleleft11.src = 'PlayerMove/Playeridleleft11.png';
            playeridleleft12.src = 'PlayerMove/Playeridleleft12.png';
            playeridleleft13.src = 'PlayerMove/Playeridleleft13.png';
            playeridleleft14.src = 'PlayerMove/Playeridleleft14.png';
            playeridleleft15.src = 'PlayerMove/Playeridleleft15.png';


        }

        function backgroundflash(dur) {
            document.documentElement.style.transition = "background 0.2s";
            document.documentElement.style.background = "red";


            setTimeout(function () {
                document.documentElement.style.transition = "background 0.6s";
                document.documentElement.style.background = "lightgray";

            }, 200);

        }
    </script>
    <script>//Key inputs
        document.addEventListener('keyup', (event) => {
            const keyName = event.key;

            if (keyName == "w" || keyName == "W") {
                player.speedY = 0;
                keysdown[2] = 0;
                keysdown[3] = 0;
            } else if (keyName == "a" || keyName == "A") {
                player.speedX = 0;
                keysdown[0] = 0;
                keysdown[1] = 0;
                leftorright[0] = 1;
                leftorright[1] = 0;
            } else if (keyName == "s" || keyName == "S") {
                player.speedY = 0;
                keysdown[3] = 0;
                keysdown[2] = 0;
            } else if (keyName == "d" || keyName == "D") {
                player.speedX = 0;
                keysdown[1] = 0;
                keysdown[0] = 0;
                leftorright[1] = 1;
                leftorright[0] = 0;
            }
            else if (keyName == "j" || keyName == "J") {

                pressed2 = false;
            }
            else if (keyName == "Shift")
                sprinttrue = false;



        });

        var last;

        function whatkey() {

            var x = event.keyCode;

            const keyname = event.key;

            if (x == 87 && tophit == false) {
                if (!playerknockbackbool) {
                    if (sprinttrue) {
                        player.speedY = -1.5 - sprint + penalty;
                    }
                    else {
                        player.speedY = -1.5 + penalty
                    }
                    keysdown[3] = 1;
                    keysdown[2] = 0;
                }
            } else if (x == 65 && lefthit == false) {
                if (!playerknockbackbool) {
                    if (sprinttrue) {
                        player.speedX = -1.5 - sprint + penalty;
                    }
                    else {
                        player.speedX = -1.5 + penalty
                    };
                    keysdown[0] = 1;
                    keysdown[1] = 0;
                    leftorright[1] = 0;
                    leftorright[0] = 1;

                }
            }
            else if (x == 83 && bottomhit == false) {
                if (!playerknockbackbool) {
                    if (sprinttrue) {
                        player.speedY = 1.5 + sprint - penalty;
                    }
                    else {
                        player.speedY = 1.5 - penalty
                    }
                    keysdown[2] = 1;
                    keysdown[3] = 0;
                }
            } else if (x == 68 && righthit == false) {
                if (!playerknockbackbool) {
                    if (sprinttrue) {
                        player.speedX = 1.5 + sprint - penalty;
                    }
                    else {
                        player.speedX = 1.5 - penalty
                    }
                    keysdown[1] = 1;
                    keysdown[0] = 0;
                    leftorright[1] = 1;
                    leftorright[0] = 0;

                }
            }
            if (keyname == "j" || keyname == "J") {
                clearTimeout(resetcombo);

                resetcombo = setTimeout(function () {
                    combos = 0;

                }, 3000);
                if (!pressed2) {
                    pressed2 = true;
                    if (energy > 9) {
                        attacknow = 1;
                        Attack();
                        energy -= 10;

                        document.getElementById('energy').innerHTML = energy;
                    }
                }
            }





            if (keyname == "k" || keyname == "K") {
                pressed = false;

                if (shield >= (20 / (bosskilled + 1))) {

                    if (bosskilled > 0) {
                        if (helper == null) {
                            if (!pressed) {
                                if (!helperactive) {
                                    shield -= Math.round(20 / (bosskilled + 1));
                                    document.getElementById('shield').innerHTML = Math.round(shield);
                                    document.getElementById('Shieldbox').style.width = (Math.round(shield * 1000) / 1000 * 6) + "px";
                                    helper = new component(200, 200, "helper", player.x, player.y);
                                    LifeDrainKeyFrames = setInterval(function () {

                                        LifeDrainKeyFrame++;

                                        if (LifeDrainKeyFrame >= 60)
                                            LifeDrainKeyFrame = 0;

                                    }, 25);
                                    helperactive = true;
                                    pressed = true;
                                }

                            }
                        }
                        if (bosskilled > 1) {
                            if (!pressed) {
                                if (!helper2active) {
                                    shield -= Math.round(20 / (bosskilled + 1));
                                    document.getElementById('shield').innerHTML = Math.round(shield);
                                    document.getElementById('Shieldbox').style.width = (Math.round(shield * 1000) / 1000 * 6) + "px";
                                    helper2 = new component(200, 200, "helper", player.x, player.y);
                                    LifeDrainKeyFrames2 = setInterval(function () {

                                        LifeDrainKeyFrame2++;

                                        if (LifeDrainKeyFrame2 >= 60)
                                            LifeDrainKeyFrame2 = 0;

                                    }, 25);
                                    helper2active = true;
                                    pressed = true;
                                }
                            }
                            if (bosskilled > 2) {
                                if (!pressed) {
                                    if (!helper3active) {
                                        shield -= Math.round(20 / (bosskilled + 1));
                                        document.getElementById('shield').innerHTML = Math.round(shield);
                                        document.getElementById('Shieldbox').style.width = (Math.round(shield * 1000) / 1000 * 6) + "px";
                                        helper3 = new component(200, 200, "helper", player.x, player.y);
                                        LifeDrainKeyFrames3 = setInterval(function () {

                                            LifeDrainKeyFrame3++;

                                            if (LifeDrainKeyFrame3 >= 60)
                                                LifeDrainKeyFrame3 = 0;

                                        }, 25);
                                        helper3active = true;
                                        pressed = true;
                                    }
                                }
                            }
                        }
                    }




                }
            }



            if (keyname == "p" || keyname == "P") {

                if (!pauseineffect)
                    pauseineffect = true;
                else
                    pauseineffect = false;
            }

            if (keyname == "e" || keyname == "E") {
                if (Invenoryusebool) {
                    Invenoryusebool = false;
                    document.getElementById('inventorycontainer').style.background = "rgb(190,190,190)";
                }
                else {
                    Invenoryusebool = true;
                    document.getElementById('inventorycontainer').style.background = "rgb(255, 242, 230)";
                }

            }



            if (keyname == "q" || keyname == "Q") {
                tooglequests();
                if (document.getElementById('shopcontainer').style.display == "block")
                    document.getElementById('shopcontainer').style.display = "none";

                document.getElementById('shopcontainer').style.zIndex = 1;
                document.getElementById('Questcontainer').style.zIndex = 99;
            }
            if (keyname == "f" || keyname == "F") {
                toogleshop();
                if (document.getElementById('Questcontainer').style.display == "block")
                    document.getElementById('Questcontainer').style.display = "none";

                document.getElementById('shopcontainer').style.zIndex = 99;
                document.getElementById('Questcontainer').style.zIndex = 1;
            }
            if (keyname == "Shift") {

                sprinttrue = true;


            }
            if (keyname == "z" || keyname == "Z") {

                if (document.getElementById('cheatconsole').style.display == "block")
                    document.getElementById('cheatconsole').style.display = "none";
                else
                    document.getElementById('cheatconsole').style.display = "block";

            }
            if (keyname == "l" || keyname == "L") {

                cyclePotion();


            }
            if (keyname == "i" || keyname == "I") {
                usePotion();

            }

        }

    </script>
    <script> //Game stop
        function gameStop() {
            death.play();
            audio.pause();
            clearInterval(casterTimer);
            var vid = document.getElementById('Deathscreen');
            document.getElementById('abilityContainer').style.display = "none";
            document.getElementById('Togglequests').style.display = "none";
            document.getElementById('Toggleshop').style.display = "none";
            document.getElementById('Deathscreen').style.display = "block";
            document.getElementById('Deathscreen').style.opacity = 0;
            ChaosGolemTheme.pause();
            finalbossmusic.pause();
            MusicBot(0, 2);
            setInterval(function () {
                opacitydeath += 0.0015;
                document.getElementById('Deathscreen').style.opacity = opacitydeath;
            }, 1);
            vid.play();
            var deathtext = new component(1200, 700, "text", 600, 350);
            deathtext.update();
            pauseineffect = true;
            for (var i = 0; i <= diff2; i++) {

                fiender[i].x = -30;
                player.x = -30;
                fiends[i] = 1;
                fiender[i] = null;
                player = null;


            }

            clearInterval(scoreen);
            clearInterval(gam);
            myGameArea = null;

        }
    </script>
</body>

</html>